{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport Portal from '../../../../Portal';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\nclass InstructorDetailsModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentWillReceiveProps\", nextProps => {\n      if (!this.state.originalInstructor || nextProps.instructor.id !== this.state.originalInstructor.id) {\n        const {\n          instructor: {\n            id,\n            basicInfo,\n            accountInfo,\n            contactInfo,\n            locations\n          } = {}\n        } = nextProps;\n        const updatedInstructor = {\n          id,\n          basicInfo,\n          accountInfo,\n          contactInfo,\n          locations\n        };\n        const {\n          originalInstructor: originalInstructorState\n        } = this.state;\n        const originalInstructor = update(originalInstructorState, {\n          $merge: nextProps.instructor\n        });\n        this.setState({\n          originalInstructor,\n          updatedInstructor\n        });\n      }\n    });\n\n    _defineProperty(this, \"onSetDropdown\", dropdownIndex => this.setState({\n      dropdownIndex,\n      dropdownIsOpen: true\n    }));\n\n    _defineProperty(this, \"onCloseDropdown\", () => this.setState({\n      dropdownIsOpen: false\n    }));\n\n    _defineProperty(this, \"onOpenDeleteLocationModal\", pendingLocationDelete => this.setState({\n      deleteLocationModalOpen: true,\n      pendingLocationDelete\n    }));\n\n    _defineProperty(this, \"onCloseDeleteLocationModal\", () => this.setState({\n      deleteLocationModalOpen: false,\n      pendingLocationDelete: {}\n    }));\n\n    _defineProperty(this, \"onOpenNewLocationModal\", () => this.setState({\n      newLocationModalOpen: true\n    }));\n\n    _defineProperty(this, \"onCloseNewLocationModal\", () => this.setState({\n      newLocationModalOpen: false\n    }));\n\n    _defineProperty(this, \"onOpenEditLocationModal\", activeLocation => this.setState({\n      editLocationModalOpen: true,\n      activeLocation\n    }));\n\n    _defineProperty(this, \"onCloseEditLocationModal\", () => this.setState({\n      editLocationModalOpen: false,\n      dropdownIsOpen: false,\n      activeLocation: {}\n    }));\n\n    _defineProperty(this, \"onCancelChanges\", () => {\n      const {\n        onClose\n      } = this.props;\n      const {\n        updatedInstructor,\n        originalInstructor\n      } = this.state;\n      this.setState({\n        updatedInstructor: originalInstructor\n      }, onClose());\n    });\n\n    _defineProperty(this, \"onSetValidation\", (validation, cb) => this.setState({\n      validation\n    }, cb));\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      const {\n        updatedInstructor: {\n          id,\n          basicInfo,\n          accountInfo,\n          contactInfo,\n          locations\n        }\n      } = this.state;\n      const {\n        onSaveLocationError,\n        onSaveInstructorChanges,\n        onClose\n      } = this.props; // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n      // const valid = true;\n\n      const valid = await nestedEditFieldValidation(this.state, this.state.updatedInstructor, this.onSetValidation, validation => console.warn('validation', validation));\n\n      if (!valid) {\n        // return onSaveLocationError();\n        console.warn('not valid');\n      }\n\n      const postBody = {\n        id,\n        basicInfo,\n        accountInfo,\n        contactInfo,\n        locations\n      };\n      onSaveInstructorChanges(postBody);\n      console.warn('stubbed out save function');\n      onClose();\n    });\n\n    _defineProperty(this, \"initialInstructorMount\", () => this.state.originalInstructor.id !== this.props.instructor.id);\n\n    _defineProperty(this, \"handleDetailsChange\", (event, name, section) => {\n      const {\n        updatedInstructor: previousInstructorState\n      } = this.state;\n      const value = event.target ? event.target.value : event;\n      const updatedInstructor = update(previousInstructorState, {\n        [section]: {\n          $merge: {\n            [name]: value\n          }\n        }\n      });\n      this.setState({\n        updatedInstructor\n      });\n    });\n\n    _defineProperty(this, \"renderModalHeader\", () => {\n      const {\n        instructor: {\n          accountInfo: {\n            lastName: initialLastName,\n            firstName: initialFIrstName,\n            email: initialEmail\n          }\n        }\n      } = this.props;\n      const {\n        updatedInstructor: {\n          accountInfo: {\n            lastName: updatedLastName,\n            firstName: updatedFirstName,\n            email: updatedEmail\n          }\n        }\n      } = this.state;\n      let lastName;\n      let firstName;\n      let email;\n\n      if (this.initialInstructorMount()) {\n        lastName = initialLastName;\n        firstName = initialFIrstName;\n        email = initialEmail;\n      } else {\n        lastName = updatedLastName;\n        firstName = updatedFirstName;\n        email = updatedEmail;\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(\"h4\", {\n        className: \"h3\"\n      }, lastName, \", \", firstName), React.createElement(\"a\", {\n        href: `mailto:${email}`\n      }, email));\n    });\n\n    this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      updatedInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      instructor: {\n        id,\n        basicInfo,\n        accountInfo,\n        contactInfo,\n        locations\n      } = {}\n    } = this.props;\n    const updatedInstructor = {\n      id,\n      basicInfo,\n      accountInfo,\n      contactInfo,\n      locations\n    };\n    const {\n      originalInstructor: originalInstructorState\n    } = this.state;\n    const originalInstructor = update(originalInstructorState, {\n      $merge: updatedInstructor\n    });\n    this.setState({\n      originalInstructor,\n      updatedInstructor\n    }); // eslint-disable-line\n  } // This resets the component state to reflect the details of the next instructor the user clicks on\n\n\n  render() {\n    const {\n      open,\n      instructor: {\n        accountInfo,\n        contactInfo,\n        locations\n      },\n      onOpenDeleteModal,\n      deleteModalOpen\n    } = this.props;\n    const {\n      dropdownIsOpen,\n      dropdownIndex,\n      activeLocation,\n      deleteLocationModalOpen,\n      pendingLocationDelete,\n      newLocationModalOpen,\n      editLocationModalOpen,\n      updatedInstructor: {\n        accountInfo: updatedAccountInfo,\n        contactInfo: updatedContactInfo,\n        locations: updatedLocations\n      }\n    } = this.state;\n    return React.createElement(Portal, {\n      selector: \"#modal\"\n    }, open && React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"overlay\"\n    }, React.createElement(ClickOffComponentWrapper, {\n      onOuterClick: this.onCancelChanges,\n      nestedModals: deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen\n    }, React.createElement(\"div\", {\n      id: \"modal_user_edit\",\n      className: \"jsx-2979935167\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"card-modal card-main card grey lighten-3\"\n    }, React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#31837a',\n        color: '#fff'\n      },\n      className: \"jsx-2979935167\" + \" \" + \"owner-box card-panel card-panel-title\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"card-panel-row row\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"col s9\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"user-block\"\n    }, React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#0085ce',\n        color: '#fff'\n      },\n      className: \"jsx-2979935167\" + \" \" + \"user-circle\"\n    }, React.createElement(\"img\", {\n      src: \"images/img-owner01.jpg\",\n      alt: \"\",\n      className: \"jsx-2979935167\"\n    })), React.createElement(\"div\", {\n      style: {\n        color: '#fff'\n      },\n      className: \"jsx-2979935167\" + \" \" + \"user-text\"\n    }, this.renderModalHeader()))), React.createElement(\"div\", {\n      style: {\n        textAlign: 'right'\n      },\n      className: \"jsx-2979935167\" + \" \" + \"col\"\n    }, React.createElement(\"span\", {\n      className: \"jsx-2979935167\" + \" \" + \"block-icon\"\n    }, React.createElement(\"i\", {\n      className: \"jsx-2979935167\" + \" \" + \"icon-owner\"\n    }), React.createElement(\"span\", {\n      className: \"jsx-2979935167\" + \" \" + \"text-icon\"\n    }, \"Owner\"))))), React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"card-content\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"card-body\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"row mb-0\"\n    }, React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"col s12 l6\"\n    }, React.createElement(AccountInfo, {\n      state: this.initialInstructorMount() ? accountInfo : updatedAccountInfo,\n      handleDetailsChange: this.handleDetailsChange\n    }), React.createElement(ContactInfo, {\n      state: this.initialInstructorMount() ? contactInfo : updatedContactInfo,\n      handleDetailsChange: this.handleDetailsChange\n    })), React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"col s12 l6\"\n    }, React.createElement(Locations, {\n      state: this.initialInstructorMount() ? locations : updatedLocations,\n      handleDetailsChange: this.handleDetailsChange,\n      dropdownIsOpen: dropdownIsOpen,\n      dropdownIndex: dropdownIndex,\n      activeLocation: activeLocation,\n      deleteLocationModalOpen: deleteLocationModalOpen,\n      pendingLocationDelete: pendingLocationDelete,\n      newLocationModalOpen: newLocationModalOpen,\n      editLocationModalOpen: editLocationModalOpen,\n      onSetDropdown: this.onSetDropdown,\n      onCloseDropdown: this.onCloseDropdown,\n      onOpenNewLocationModal: this.onOpenNewLocationModal,\n      onOpenEditLocationModal: this.onOpenEditLocationModal,\n      onCloseNewLocationModal: this.onCloseNewLocationModal,\n      onCloseEditLocationModal: this.onCloseEditLocationModal,\n      onOpenDeleteLocationModal: this.onOpenDeleteLocationModal,\n      onCloseDeleteLocationModal: this.onCloseDeleteLocationModal\n    })))), React.createElement(\"div\", {\n      className: \"jsx-2979935167\" + \" \" + \"modal-footer\"\n    }, React.createElement(\"a\", {\n      href: \"#\",\n      onClick: onOpenDeleteModal,\n      className: \"jsx-2979935167\" + \" \" + \"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n    }, \"Delete\"), React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.onCancelChanges,\n      className: \"jsx-2979935167\" + \" \" + \"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n    }, \"Cancel\"), React.createElement(\"a\", {\n      href: \"#\",\n      onClick: this.onSubmit,\n      className: \"jsx-2979935167\" + \" \" + \"btn\"\n    }, \"Save\"))))))), React.createElement(_JSXStyle, {\n      id: \"2979935167\"\n    }, \".overlay.jsx-2979935167{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:999;}.card-modal.jsx-2979935167{margin:0;border-radius:6px;}.modal.jsx-2979935167{display:block;background-color:white;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}.modal-custom.jsx-2979935167{opacity:1;visibility:visible;}.modal-footer.jsx-2979935167{background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL0luc3RydWN0b3IvTGlzdFBhZ2UvY29tcG9uZW50cy9JbnN0cnVjdG9yRGV0YWlsc01vZGFsL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJRVyxBQUdnQyxBQVNOLEFBSUssQUFTSixBQUlhLFNBaEJMLENBYUMsSUFUSSxDQWJhLFFBMEJ0QyxJQWhCQSxFQWFBLFFBVG9CLFdBYlosTUFDRSxDQWFBLE9BWkMsQ0FhQyxRQVpILEVBYUUsS0FaRyxJQWE0RyxRQVoxSCxxR0FhQSIsImZpbGUiOiIvVm9sdW1lcy9IREQvU2l0ZXMvY2xlYXJjaG9pY2V0ZXN0cHJlcC9jbGVhci1jaG9pY2UtYWRtaW4vY29tcG9uZW50cy9JbnN0cnVjdG9yL0xpc3RQYWdlL2NvbXBvbmVudHMvSW5zdHJ1Y3RvckRldGFpbHNNb2RhbC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB1cGRhdGUgZnJvbSAnaW1tdXRhYmlsaXR5LWhlbHBlcic7XG5cbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vLi4vLi4vLi4vUG9ydGFsJztcbmltcG9ydCBDbGlja09mZkNvbXBvbmVudFdyYXBwZXIgZnJvbSAnLi4vLi4vLi4vLi4vQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyJztcblxuaW1wb3J0IEFjY291bnRJbmZvIGZyb20gJy4uL1NoYXJlZE1vZGFsQ29tcG9uZW50cy9BY2NvdW50SW5mbyc7XG5pbXBvcnQgQ29udGFjdEluZm8gZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0NvbnRhY3RJbmZvJztcbmltcG9ydCBMb2NhdGlvbnMgZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0xvY2F0aW9ucyc7XG5cbmltcG9ydCB7IG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9maWVsZFZhbGlkYXRpb24nO1xuXG5jbGFzcyBJbnN0cnVjdG9yRGV0YWlsc01vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRlbGV0ZUxvY2F0aW9uTW9kYWxPcGVuOiBmYWxzZSxcbiAgICAgIG5ld0xvY2F0aW9uTW9kYWxPcGVuOiBmYWxzZSxcbiAgICAgIGVkaXRMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsXG4gICAgICBwZW5kaW5nTG9jYXRpb25EZWxldGU6IHt9LFxuICAgICAgYWN0aXZlTG9jYXRpb246IHt9LFxuICAgICAgZHJvcGRvd25Jc09wZW46IGZhbHNlLFxuICAgICAgZHJvcGRvd25JbmRleDogbnVsbCxcbiAgICAgIG9yaWdpbmFsSW5zdHJ1Y3Rvcjoge1xuICAgICAgICBhY2NvdW50SW5mbzoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICBnZW5kZXI6ICcnLFxuICAgICAgICB9LFxuICAgICAgICBjb250YWN0SW5mbzoge1xuICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICBzdHJlZXRBZGRyZXNzOiAnJyxcbiAgICAgICAgICBjaXR5OiAnJyxcbiAgICAgICAgICBzdGF0ZTogJycsXG4gICAgICAgICAgemlwOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgICB1cGRhdGVkSW5zdHJ1Y3Rvcjoge1xuICAgICAgICBhY2NvdW50SW5mbzoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICBnZW5kZXI6ICcnLFxuICAgICAgICB9LFxuICAgICAgICBjb250YWN0SW5mbzoge1xuICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICBzdHJlZXRBZGRyZXNzOiAnJyxcbiAgICAgICAgICBjaXR5OiAnJyxcbiAgICAgICAgICBzdGF0ZTogJycsXG4gICAgICAgICAgemlwOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgIGFjY291bnRJbmZvOiB7XG4gICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIGdlbmRlcjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgaW5zdHJ1Y3RvcjogeyBpZCwgYmFzaWNJbmZvLCBhY2NvdW50SW5mbywgY29udGFjdEluZm8sIGxvY2F0aW9ucyB9ID0ge30gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdXBkYXRlZEluc3RydWN0b3IgPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH07XG4gICAgY29uc3QgeyBvcmlnaW5hbEluc3RydWN0b3I6IG9yaWdpbmFsSW5zdHJ1Y3RvclN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IG9yaWdpbmFsSW5zdHJ1Y3RvciA9IHVwZGF0ZShvcmlnaW5hbEluc3RydWN0b3JTdGF0ZSwge1xuICAgICAgJG1lcmdlOiB1cGRhdGVkSW5zdHJ1Y3RvcixcbiAgICB9KTtcbiAgICB0aGlzLnNldFN0YXRlKHsgb3JpZ2luYWxJbnN0cnVjdG9yLCB1cGRhdGVkSW5zdHJ1Y3RvciB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB9XG5cbiAgLy8gVGhpcyByZXNldHMgdGhlIGNvbXBvbmVudCBzdGF0ZSB0byByZWZsZWN0IHRoZSBkZXRhaWxzIG9mIHRoZSBuZXh0IGluc3RydWN0b3IgdGhlIHVzZXIgY2xpY2tzIG9uXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSAobmV4dFByb3BzKSA9PiB7XG4gICAgaWYgKCghdGhpcy5zdGF0ZS5vcmlnaW5hbEluc3RydWN0b3IgfHwgbmV4dFByb3BzLmluc3RydWN0b3IuaWQgIT09IHRoaXMuc3RhdGUub3JpZ2luYWxJbnN0cnVjdG9yLmlkKSkge1xuICAgICAgY29uc3QgeyBpbnN0cnVjdG9yOiB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH0gPSB7fSB9ID0gbmV4dFByb3BzO1xuICAgICAgY29uc3QgdXBkYXRlZEluc3RydWN0b3IgPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH07XG4gICAgICBjb25zdCB7IG9yaWdpbmFsSW5zdHJ1Y3Rvcjogb3JpZ2luYWxJbnN0cnVjdG9yU3RhdGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCBvcmlnaW5hbEluc3RydWN0b3IgPSB1cGRhdGUob3JpZ2luYWxJbnN0cnVjdG9yU3RhdGUsIHtcbiAgICAgICAgJG1lcmdlOiBuZXh0UHJvcHMuaW5zdHJ1Y3RvcixcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9yaWdpbmFsSW5zdHJ1Y3RvciwgdXBkYXRlZEluc3RydWN0b3IgfSk7XG4gICAgfVxuICB9XG5cbiAgb25TZXREcm9wZG93biA9IChkcm9wZG93bkluZGV4KSA9PiB0aGlzLnNldFN0YXRlKHsgZHJvcGRvd25JbmRleCwgZHJvcGRvd25Jc09wZW46IHRydWUgfSk7XG4gIG9uQ2xvc2VEcm9wZG93biA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBkcm9wZG93bklzT3BlbjogZmFsc2UgfSk7XG5cbiAgb25PcGVuRGVsZXRlTG9jYXRpb25Nb2RhbCA9IChwZW5kaW5nTG9jYXRpb25EZWxldGUpID0+IHRoaXMuc2V0U3RhdGUoeyBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbjogdHJ1ZSwgcGVuZGluZ0xvY2F0aW9uRGVsZXRlIH0pO1xuICBvbkNsb3NlRGVsZXRlTG9jYXRpb25Nb2RhbCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZToge30gfSk7XG5cbiAgb25PcGVuTmV3TG9jYXRpb25Nb2RhbCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBuZXdMb2NhdGlvbk1vZGFsT3BlbjogdHJ1ZSB9KTtcbiAgb25DbG9zZU5ld0xvY2F0aW9uTW9kYWwgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgbmV3TG9jYXRpb25Nb2RhbE9wZW46IGZhbHNlIH0pO1xuXG4gIG9uT3BlbkVkaXRMb2NhdGlvbk1vZGFsID0gKGFjdGl2ZUxvY2F0aW9uKSA9PiB0aGlzLnNldFN0YXRlKHsgZWRpdExvY2F0aW9uTW9kYWxPcGVuOiB0cnVlLCBhY3RpdmVMb2NhdGlvbiB9KTtcbiAgb25DbG9zZUVkaXRMb2NhdGlvbk1vZGFsID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGVkaXRMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsIGRyb3Bkb3duSXNPcGVuOiBmYWxzZSwgYWN0aXZlTG9jYXRpb246IHt9IH0pO1xuXG4gIG9uQ2FuY2VsQ2hhbmdlcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB1cGRhdGVkSW5zdHJ1Y3Rvciwgb3JpZ2luYWxJbnN0cnVjdG9yIH0gPSB0aGlzLnN0YXRlO1xuICAgIHRoaXMuc2V0U3RhdGUoeyB1cGRhdGVkSW5zdHJ1Y3Rvcjogb3JpZ2luYWxJbnN0cnVjdG9yIH0sIG9uQ2xvc2UoKSk7XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbnRvIG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24sIGl0IHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24gY2hlY2sgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgLy8gVGhlIHVwZGF0ZWQgY29tcG9uZW50IHZhbGlkYXRpb24gc3RhdGUgaXMgc2V0IGFuZCB0aGVuIHRoZSBjYWxsYmFjayBpcyBkaXNwYXRjaGVkIC0gaW4gdGhpcyBjYXNlLCB0aGUgY2FsbGJhY2sgaGFuZGxlcyB0aGUgdG9hc3Qgd2FybmluZyBhdCB0aGUgY29udGFpbmVyIGxldmVsXG4gIG9uU2V0VmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uLCBjYikgPT4gdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRpb24gfSwgY2IpO1xuXG4gIC8vIElmIGFsbCB0aGUgZmllbGRzIGFyZSB2YWxpZCwgd2UgY29uc3RydWN0IGEgcG9zdCBib2R5IGFuZCBjYWxsIG9uU2F2ZU5ld0xvY2F0aW9uIHBhc3NlZCBkb3duIGZyb20gdGhlIGNvbnRhaW5lciBsZXZlbFxuICBvblN1Ym1pdCA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgeyB1cGRhdGVkSW5zdHJ1Y3RvcjogeyBpZCwgYmFzaWNJbmZvLCBhY2NvdW50SW5mbywgY29udGFjdEluZm8sIGxvY2F0aW9ucyB9IH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgb25TYXZlTG9jYXRpb25FcnJvciwgb25TYXZlSW5zdHJ1Y3RvckNoYW5nZXMsIG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgLy8gTk9URTogU3dhcCBvdXQgd2hhdCBpbnN0YW5jZSBvZiB2YWxpZCBpcyBhY3RpdmUgaWYgeW91IHdhbnQgdG8gdGVzdCBzYXZpbmcgYSBuZXcgbG9jYXRpb24gd2l0aG91dCB3b3JyeWluZyBhYm91dCB2YWxpZGF0aW9uXG4gICAgLy8gY29uc3QgdmFsaWQgPSB0cnVlO1xuICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgbmVzdGVkRWRpdEZpZWxkVmFsaWRhdGlvbih0aGlzLnN0YXRlLCB0aGlzLnN0YXRlLnVwZGF0ZWRJbnN0cnVjdG9yLCB0aGlzLm9uU2V0VmFsaWRhdGlvbiwgKHZhbGlkYXRpb24pID0+IGNvbnNvbGUud2FybigndmFsaWRhdGlvbicsIHZhbGlkYXRpb24pKTtcbiAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAvLyByZXR1cm4gb25TYXZlTG9jYXRpb25FcnJvcigpO1xuICAgICAgY29uc29sZS53YXJuKCdub3QgdmFsaWQnKTtcbiAgICB9XG4gICAgY29uc3QgcG9zdEJvZHkgPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH07XG4gICAgb25TYXZlSW5zdHJ1Y3RvckNoYW5nZXMocG9zdEJvZHkpO1xuICAgIGNvbnNvbGUud2Fybignc3R1YmJlZCBvdXQgc2F2ZSBmdW5jdGlvbicpO1xuICAgIG9uQ2xvc2UoKTtcbiAgfVxuXG4gIGluaXRpYWxJbnN0cnVjdG9yTW91bnQgPSAoKSA9PiB0aGlzLnN0YXRlLm9yaWdpbmFsSW5zdHJ1Y3Rvci5pZCAhPT0gdGhpcy5wcm9wcy5pbnN0cnVjdG9yLmlkO1xuXG4gIC8vIFdlIHB1bGwgdGhlIHZhbHVlIGJhc2VkIG9uIHRoZSBmaWVsZCB0eXBlIHRoZW4gbWVyZ2UgdGhhdCB1cGRhdGVkIGtleS92YWx1ZSBwYWlyIHdpdGggdGhlIGxhc3QgdmVyc2lvbiBvZiBjb21wb25lbnQgc3RhdGVcbiAgaGFuZGxlRGV0YWlsc0NoYW5nZSA9IChldmVudCwgbmFtZSwgc2VjdGlvbikgPT4ge1xuICAgIGNvbnN0IHsgdXBkYXRlZEluc3RydWN0b3I6IHByZXZpb3VzSW5zdHJ1Y3RvclN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHZhbHVlID0gZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LnZhbHVlIDogZXZlbnQ7XG4gICAgY29uc3QgdXBkYXRlZEluc3RydWN0b3IgPSB1cGRhdGUocHJldmlvdXNJbnN0cnVjdG9yU3RhdGUsIHtcbiAgICAgIFtzZWN0aW9uXTogeyAkbWVyZ2U6IHsgW25hbWVdOiB2YWx1ZSB9IH0sXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZWRJbnN0cnVjdG9yIH0pO1xuICB9XG5cbiAgcmVuZGVyTW9kYWxIZWFkZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpbnN0cnVjdG9yOiB7IGFjY291bnRJbmZvOiB7IGxhc3ROYW1lOiBpbml0aWFsTGFzdE5hbWUsIGZpcnN0TmFtZTogaW5pdGlhbEZJcnN0TmFtZSwgZW1haWw6IGluaXRpYWxFbWFpbCB9IH0gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB1cGRhdGVkSW5zdHJ1Y3RvcjogeyBhY2NvdW50SW5mbzogeyBsYXN0TmFtZTogdXBkYXRlZExhc3ROYW1lLCBmaXJzdE5hbWU6IHVwZGF0ZWRGaXJzdE5hbWUsIGVtYWlsOiB1cGRhdGVkRW1haWwgfSB9IH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBsYXN0TmFtZTtcbiAgICBsZXQgZmlyc3ROYW1lO1xuICAgIGxldCBlbWFpbDtcbiAgICBpZiAodGhpcy5pbml0aWFsSW5zdHJ1Y3Rvck1vdW50KCkpIHtcbiAgICAgIGxhc3ROYW1lID0gaW5pdGlhbExhc3ROYW1lO1xuICAgICAgZmlyc3ROYW1lID0gaW5pdGlhbEZJcnN0TmFtZTtcbiAgICAgIGVtYWlsID0gaW5pdGlhbEVtYWlsO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0TmFtZSA9IHVwZGF0ZWRMYXN0TmFtZTtcbiAgICAgIGZpcnN0TmFtZSA9IHVwZGF0ZWRGaXJzdE5hbWU7XG4gICAgICBlbWFpbCA9IHVwZGF0ZWRFbWFpbDtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgPGg0IGNsYXNzTmFtZT1cImgzXCI+e2xhc3ROYW1lfSwge2ZpcnN0TmFtZX08L2g0PlxuICAgICAgICA8YSBocmVmPXtgbWFpbHRvOiR7ZW1haWx9YH0+e2VtYWlsfTwvYT5cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG9wZW4sIGluc3RydWN0b3I6IHsgYWNjb3VudEluZm8sIGNvbnRhY3RJbmZvLCBsb2NhdGlvbnMgfSwgb25PcGVuRGVsZXRlTW9kYWwsIGRlbGV0ZU1vZGFsT3BlbiB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGRyb3Bkb3duSXNPcGVuLCBkcm9wZG93bkluZGV4LCBhY3RpdmVMb2NhdGlvbiwgZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW4sIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZSwgbmV3TG9jYXRpb25Nb2RhbE9wZW4sIGVkaXRMb2NhdGlvbk1vZGFsT3BlbixcbiAgICAgIHVwZGF0ZWRJbnN0cnVjdG9yOiB7XG4gICAgICAgIGFjY291bnRJbmZvOiB1cGRhdGVkQWNjb3VudEluZm8sIGNvbnRhY3RJbmZvOiB1cGRhdGVkQ29udGFjdEluZm8sIGxvY2F0aW9uczogdXBkYXRlZExvY2F0aW9ucyxcbiAgICAgIH0sXG4gICAgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxQb3J0YWwgc2VsZWN0b3I9XCIjbW9kYWxcIj5cbiAgICAgICAge29wZW4gJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmxheVwiPlxuICAgICAgICAgICAgPENsaWNrT2ZmQ29tcG9uZW50V3JhcHBlciBvbk91dGVyQ2xpY2s9e3RoaXMub25DYW5jZWxDaGFuZ2VzfSBuZXN0ZWRNb2RhbHM9e2RlbGV0ZU1vZGFsT3BlbiB8fCBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbiB8fCBlZGl0TG9jYXRpb25Nb2RhbE9wZW4gfHwgbmV3TG9jYXRpb25Nb2RhbE9wZW59PlxuICAgICAgICAgICAgICA8ZGl2IGlkPVwibW9kYWxfdXNlcl9lZGl0XCIgY2xhc3NOYW1lPVwibW9kYWwgbW9kYWwtY3VzdG9tIG1vZGFsLWN1c3RvbS1sYXJnZSBtb2RhbC1ncmF5XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLW1vZGFsIGNhcmQtbWFpbiBjYXJkIGdyZXkgbGlnaHRlbi0zXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm93bmVyLWJveCBjYXJkLXBhbmVsIGNhcmQtcGFuZWwtdGl0bGVcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjMzE4MzdhJywgY29sb3I6ICcjZmZmJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXBhbmVsLXJvdyByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzOVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1jaXJjbGVcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjMDA4NWNlJywgY29sb3I6ICcjZmZmJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImltYWdlcy9pbWctb3duZXIwMS5qcGdcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXRleHRcIiBzdHlsZT17eyBjb2xvcjogJyNmZmYnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck1vZGFsSGVhZGVyKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xcIiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJibG9jay1pY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImljb24tb3duZXJcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtaWNvblwiPk93bmVyPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzMTIgbDZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3RoaXMuaW5pdGlhbEluc3RydWN0b3JNb3VudCgpID8gYWNjb3VudEluZm8gOiB1cGRhdGVkQWNjb3VudEluZm99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17dGhpcy5pbml0aWFsSW5zdHJ1Y3Rvck1vdW50KCkgPyBjb250YWN0SW5mbyA6IHVwZGF0ZWRDb250YWN0SW5mb31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEZXRhaWxzQ2hhbmdlPXt0aGlzLmhhbmRsZURldGFpbHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sIHMxMiBsNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TG9jYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3RoaXMuaW5pdGlhbEluc3RydWN0b3JNb3VudCgpID8gbG9jYXRpb25zIDogdXBkYXRlZExvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEZXRhaWxzQ2hhbmdlPXt0aGlzLmhhbmRsZURldGFpbHNDaGFuZ2V9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bklzT3Blbj17ZHJvcGRvd25Jc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25JbmRleD17ZHJvcGRvd25JbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVMb2NhdGlvbj17YWN0aXZlTG9jYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW49e2RlbGV0ZUxvY2F0aW9uTW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZT17cGVuZGluZ0xvY2F0aW9uRGVsZXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2F0aW9uTW9kYWxPcGVuPXtuZXdMb2NhdGlvbk1vZGFsT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0TG9jYXRpb25Nb2RhbE9wZW49e2VkaXRMb2NhdGlvbk1vZGFsT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNldERyb3Bkb3duPXt0aGlzLm9uU2V0RHJvcGRvd259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZURyb3Bkb3duPXt0aGlzLm9uQ2xvc2VEcm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5OZXdMb2NhdGlvbk1vZGFsPXt0aGlzLm9uT3Blbk5ld0xvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuRWRpdExvY2F0aW9uTW9kYWw9e3RoaXMub25PcGVuRWRpdExvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZU5ld0xvY2F0aW9uTW9kYWw9e3RoaXMub25DbG9zZU5ld0xvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZUVkaXRMb2NhdGlvbk1vZGFsPXt0aGlzLm9uQ2xvc2VFZGl0TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5EZWxldGVMb2NhdGlvbk1vZGFsPXt0aGlzLm9uT3BlbkRlbGV0ZUxvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZURlbGV0ZUxvY2F0aW9uTW9kYWw9e3RoaXMub25DbG9zZURlbGV0ZUxvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uT3BlbkRlbGV0ZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2F2ZXMtZWZmZWN0IHdhdmVzLXRlYWwgYnRuLWZsYXQgcGluay10ZXh0IHRleHQtZGFya2VuLTFcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIERlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbENoYW5nZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtb2RhbC1jbG9zZSB3YXZlcy1lZmZlY3Qgd2F2ZXMtdGVhbCBidG4tZmxhdCBncmV5LXRleHQgdGV4dC1kYXJrZW4tMVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIC5vdmVybGF5IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLmNhcmQtbW9kYWwge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLm1vZGFsIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgdG9wOiAxMCU7XG4gICAgICAgICAgICAgICAgcmlnaHQ6IDEwJTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAxMCU7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAyNHB4IDM4cHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgOXB4IDQ2cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgMTFweCAxNXB4IC03cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5tb2RhbC1jdXN0b20ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAubW9kYWwtZm9vdGVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvUG9ydGFsPlxuICAgICk7XG4gIH1cbn1cblxuSW5zdHJ1Y3RvckRldGFpbHNNb2RhbC5wcm9wVHlwZXMgPSB7XG4gIG9wZW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIGRlbGV0ZU1vZGFsT3BlbjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgb25DbG9zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25PcGVuRGVsZXRlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGluc3RydWN0b3I6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEluc3RydWN0b3JEZXRhaWxzTW9kYWw7XG4iXX0= */\\n/*@ sourceURL=/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Instructor/ListPage/components/InstructorDetailsModal/index.js */\"));\n  }\n\n}\n\nInstructorDetailsModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  instructor: PropTypes.object.isRequired\n};\nexport default InstructorDetailsModal;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Instructor/ListPage/components/InstructorDetailsModal/index.js"],"names":["React","PropTypes","update","Portal","ClickOffComponentWrapper","AccountInfo","ContactInfo","Locations","nestedEditFieldValidation","InstructorDetailsModal","Component","constructor","props","nextProps","state","originalInstructor","instructor","id","basicInfo","accountInfo","contactInfo","locations","updatedInstructor","originalInstructorState","$merge","setState","dropdownIndex","dropdownIsOpen","pendingLocationDelete","deleteLocationModalOpen","newLocationModalOpen","activeLocation","editLocationModalOpen","onClose","validation","cb","event","preventDefault","onSaveLocationError","onSaveInstructorChanges","valid","onSetValidation","console","warn","postBody","name","section","previousInstructorState","value","target","lastName","initialLastName","firstName","initialFIrstName","email","initialEmail","updatedLastName","updatedFirstName","updatedEmail","initialInstructorMount","gender","phone","streetAddress","city","zip","componentDidMount","render","open","onOpenDeleteModal","deleteModalOpen","updatedAccountInfo","updatedContactInfo","updatedLocations","onCancelChanges","backgroundColor","color","renderModalHeader","textAlign","handleDetailsChange","onSetDropdown","onCloseDropdown","onOpenNewLocationModal","onOpenEditLocationModal","onCloseNewLocationModal","onCloseEditLocationModal","onOpenDeleteLocationModal","onCloseDeleteLocationModal","onSubmit","propTypes","bool","isRequired","func","object"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\n\nimport Portal from '../../../../Portal';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\n\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\n\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\nclass InstructorDetailsModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      updatedInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true,\n        },\n      },\n    };\n  }\n\n  componentDidMount() {\n    const { instructor: { id, basicInfo, accountInfo, contactInfo, locations } = {} } = this.props;\n    const updatedInstructor = { id, basicInfo, accountInfo, contactInfo, locations };\n    const { originalInstructor: originalInstructorState } = this.state;\n    const originalInstructor = update(originalInstructorState, {\n      $merge: updatedInstructor,\n    });\n    this.setState({ originalInstructor, updatedInstructor }); // eslint-disable-line\n  }\n\n  // This resets the component state to reflect the details of the next instructor the user clicks on\n  componentWillReceiveProps = (nextProps) => {\n    if ((!this.state.originalInstructor || nextProps.instructor.id !== this.state.originalInstructor.id)) {\n      const { instructor: { id, basicInfo, accountInfo, contactInfo, locations } = {} } = nextProps;\n      const updatedInstructor = { id, basicInfo, accountInfo, contactInfo, locations };\n      const { originalInstructor: originalInstructorState } = this.state;\n      const originalInstructor = update(originalInstructorState, {\n        $merge: nextProps.instructor,\n      });\n      this.setState({ originalInstructor, updatedInstructor });\n    }\n  }\n\n  onSetDropdown = (dropdownIndex) => this.setState({ dropdownIndex, dropdownIsOpen: true });\n  onCloseDropdown = () => this.setState({ dropdownIsOpen: false });\n\n  onOpenDeleteLocationModal = (pendingLocationDelete) => this.setState({ deleteLocationModalOpen: true, pendingLocationDelete });\n  onCloseDeleteLocationModal = () => this.setState({ deleteLocationModalOpen: false, pendingLocationDelete: {} });\n\n  onOpenNewLocationModal = () => this.setState({ newLocationModalOpen: true });\n  onCloseNewLocationModal = () => this.setState({ newLocationModalOpen: false });\n\n  onOpenEditLocationModal = (activeLocation) => this.setState({ editLocationModalOpen: true, activeLocation });\n  onCloseEditLocationModal = () => this.setState({ editLocationModalOpen: false, dropdownIsOpen: false, activeLocation: {} });\n\n  onCancelChanges = () => {\n    const { onClose } = this.props;\n    const { updatedInstructor, originalInstructor } = this.state;\n    this.setState({ updatedInstructor: originalInstructor }, onClose());\n  }\n\n  // This function is passed into nestedEditFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n  onSetValidation = (validation, cb) => this.setState({ validation }, cb);\n\n  // If all the fields are valid, we construct a post body and call onSaveNewLocation passed down from the container level\n  onSubmit = async (event) => {\n    event.preventDefault();\n    const { updatedInstructor: { id, basicInfo, accountInfo, contactInfo, locations } } = this.state;\n    const { onSaveLocationError, onSaveInstructorChanges, onClose } = this.props;\n    // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n    // const valid = true;\n    const valid = await nestedEditFieldValidation(this.state, this.state.updatedInstructor, this.onSetValidation, (validation) => console.warn('validation', validation));\n    if (!valid) {\n      // return onSaveLocationError();\n      console.warn('not valid');\n    }\n    const postBody = { id, basicInfo, accountInfo, contactInfo, locations };\n    onSaveInstructorChanges(postBody);\n    console.warn('stubbed out save function');\n    onClose();\n  }\n\n  initialInstructorMount = () => this.state.originalInstructor.id !== this.props.instructor.id;\n\n  // We pull the value based on the field type then merge that updated key/value pair with the last version of component state\n  handleDetailsChange = (event, name, section) => {\n    const { updatedInstructor: previousInstructorState } = this.state;\n    const value = event.target ? event.target.value : event;\n    const updatedInstructor = update(previousInstructorState, {\n      [section]: { $merge: { [name]: value } },\n    });\n    this.setState({ updatedInstructor });\n  }\n\n  renderModalHeader = () => {\n    const { instructor: { accountInfo: { lastName: initialLastName, firstName: initialFIrstName, email: initialEmail } } } = this.props;\n    const { updatedInstructor: { accountInfo: { lastName: updatedLastName, firstName: updatedFirstName, email: updatedEmail } } } = this.state;\n    let lastName;\n    let firstName;\n    let email;\n    if (this.initialInstructorMount()) {\n      lastName = initialLastName;\n      firstName = initialFIrstName;\n      email = initialEmail;\n    } else {\n      lastName = updatedLastName;\n      firstName = updatedFirstName;\n      email = updatedEmail;\n    }\n    return (\n      <React.Fragment>\n        <h4 className=\"h3\">{lastName}, {firstName}</h4>\n        <a href={`mailto:${email}`}>{email}</a>\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { open, instructor: { accountInfo, contactInfo, locations }, onOpenDeleteModal, deleteModalOpen } = this.props;\n    const { dropdownIsOpen, dropdownIndex, activeLocation, deleteLocationModalOpen, pendingLocationDelete, newLocationModalOpen, editLocationModalOpen,\n      updatedInstructor: {\n        accountInfo: updatedAccountInfo, contactInfo: updatedContactInfo, locations: updatedLocations,\n      },\n    } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <div className=\"overlay\">\n            <ClickOffComponentWrapper onOuterClick={this.onCancelChanges} nestedModals={deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen}>\n              <div id=\"modal_user_edit\" className=\"modal modal-custom modal-custom-large modal-gray\">\n                <div className=\"card-modal card-main card grey lighten-3\">\n                  <div className=\"owner-box card-panel card-panel-title\" style={{ backgroundColor: '#31837a', color: '#fff' }}>\n                    <div className=\"card-panel-row row\">\n                      <div className=\"col s9\">\n                        <div className=\"user-block\">\n                          <div className=\"user-circle\" style={{ backgroundColor: '#0085ce', color: '#fff' }}>\n                            <img src=\"images/img-owner01.jpg\" alt=\"\" />\n                          </div>\n                          <div className=\"user-text\" style={{ color: '#fff' }}>\n                            {this.renderModalHeader()}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"col\" style={{ textAlign: 'right' }}>\n                        <span className=\"block-icon\">\n                          <i className=\"icon-owner\"></i>\n                          <span className=\"text-icon\">Owner</span>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"card-content\">\n                    <div className=\"card-body\">\n                      <div className=\"row mb-0\">\n                        <div className=\"col s12 l6\">\n                          <AccountInfo\n                            state={this.initialInstructorMount() ? accountInfo : updatedAccountInfo}\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                          <ContactInfo\n                            state={this.initialInstructorMount() ? contactInfo : updatedContactInfo}\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                        </div>\n                        <div className=\"col s12 l6\">\n                          <Locations\n                            state={this.initialInstructorMount() ? locations : updatedLocations}\n                            handleDetailsChange={this.handleDetailsChange}\n\n                            dropdownIsOpen={dropdownIsOpen}\n                            dropdownIndex={dropdownIndex}\n                            activeLocation={activeLocation}\n                            deleteLocationModalOpen={deleteLocationModalOpen}\n                            pendingLocationDelete={pendingLocationDelete}\n                            newLocationModalOpen={newLocationModalOpen}\n                            editLocationModalOpen={editLocationModalOpen}\n                            onSetDropdown={this.onSetDropdown}\n                            onCloseDropdown={this.onCloseDropdown}\n                            onOpenNewLocationModal={this.onOpenNewLocationModal}\n                            onOpenEditLocationModal={this.onOpenEditLocationModal}\n                            onCloseNewLocationModal={this.onCloseNewLocationModal}\n                            onCloseEditLocationModal={this.onCloseEditLocationModal}\n                            onOpenDeleteLocationModal={this.onOpenDeleteLocationModal}\n                            onCloseDeleteLocationModal={this.onCloseDeleteLocationModal}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"modal-footer\">\n                      <a\n                        href=\"#\"\n                        onClick={onOpenDeleteModal}\n                        className=\"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n                      >\n                        Delete\n                      </a>\n                      <a\n                        href=\"#\"\n                        onClick={this.onCancelChanges}\n                        className=\"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n                      >\n                        Cancel\n                      </a>\n                      <a\n                        href=\"#\"\n                        onClick={this.onSubmit}\n                        className=\"btn\"\n                      >\n                        Save\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ClickOffComponentWrapper>\n          </div>\n        )}\n        <style jsx>\n          {`\n              .overlay {\n                position: fixed;\n                background-color: rgba(0, 0, 0, 0.7);\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: 999;\n              }\n              .card-modal {\n                margin: 0;\n                border-radius: 6px;\n              }\n              .modal {\n                display: block;\n                background-color: white;\n                position: absolute;\n                top: 10%;\n                right: 10%;\n                left: 10%;\n                box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2);\n              }\n              .modal-custom {\n                opacity: 1;\n                visibility: visible;\n              }\n              .modal-footer {\n                background-color: white;\n              }\n            `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nInstructorDetailsModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  instructor: PropTypes.object.isRequired,\n};\n\nexport default InstructorDetailsModal;\n"]},"metadata":{},"sourceType":"module"}