{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"../../../../Portal\";\nimport update from 'immutability-helper';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\nvar ClassDetailModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ClassDetailModal, _React$Component);\n\n  function ClassDetailModal(props) {\n    var _this;\n\n    _classCallCheck(this, ClassDetailModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ClassDetailModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillReceiveProps\", function (nextProps) {\n      if (!_this.state.originalClassRoom || nextProps.classroom.id !== _this.state.originalClassRoom.id) {\n        var _nextProps$classroom = nextProps.classroom;\n        _nextProps$classroom = _nextProps$classroom === void 0 ? {} : _nextProps$classroom;\n        var id = _nextProps$classroom.id,\n            basicInfo = _nextProps$classroom.basicInfo,\n            _accountInfo = _nextProps$classroom.accountInfo,\n            _contactInfo = _nextProps$classroom.contactInfo,\n            _locations = _nextProps$classroom.locations,\n            summary = _nextProps$classroom.summary;\n        var updatedClassRoom = {\n          id: id,\n          basicInfo: basicInfo,\n          accountInfo: _accountInfo,\n          contactInfo: _contactInfo,\n          locations: _locations,\n          summary: summary\n        };\n        var originalClassRoomState = _this.state.originalClassRoom;\n        var originalClassRoom = update(originalClassRoomState, {\n          $merge: nextProps.classroom\n        });\n\n        _this.setState({\n          originalClassRoom: originalClassRoom,\n          updatedClassRoom: updatedClassRoom\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDetailsChange\", function (event, name, section) {\n      var value = event.target ? event.target.value : event;\n      var updatedClassRoom = update(_this.state.updatedClassRoom, _defineProperty({}, section, {\n        $merge: _defineProperty({}, name, value)\n      }));\n\n      _this.setState({\n        updatedClassRoom: updatedClassRoom\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"initialClassRoomMount\", function () {\n      return _this.state.originalClassRoom.id !== _this.props.classroom.id;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderModalHeader\", function () {\n      var _this$props$classroom = _this.props.classroom.accountInfo,\n          initialLastName = _this$props$classroom.lastName,\n          initialFIrstName = _this$props$classroom.firstName,\n          initialEmail = _this$props$classroom.email;\n      var _this$state$updatedCl = _this.state.updatedClassRoom.accountInfo,\n          updatedLastName = _this$state$updatedCl.lastName,\n          updatedFirstName = _this$state$updatedCl.firstName,\n          updatedEmail = _this$state$updatedCl.email;\n      var lastName;\n      var firstName;\n      var email;\n\n      if (_this.initialClassRoomMount()) {\n        lastName = initialLastName;\n        firstName = initialFIrstName;\n        email = initialEmail;\n      } else {\n        lastName = updatedLastName;\n        firstName = updatedFirstName;\n        email = updatedEmail;\n      }\n\n      return __jsx(React.Fragment, null, __jsx(\"h4\", {\n        className: \"h3\"\n      }, lastName, \", \", firstName), __jsx(\"a\", {\n        href: \"mailto:\".concat(email)\n      }, email));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetValidation\", function (validation, cb) {\n      return _this.setState({\n        validation: validation\n      }, cb);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function _callee(event) {\n      var _this$state$updatedCl2, id, basicInfo, accountInfo, contactInfo, locations, summary, _this$props, onSaveLocationError, onSaveClassChanges, onClose, valid, postBody;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _this$state$updatedCl2 = _this.state.updatedClassRoom, id = _this$state$updatedCl2.id, basicInfo = _this$state$updatedCl2.basicInfo, accountInfo = _this$state$updatedCl2.accountInfo, contactInfo = _this$state$updatedCl2.contactInfo, locations = _this$state$updatedCl2.locations, summary = _this$state$updatedCl2.summary;\n              _this$props = _this.props, onSaveLocationError = _this$props.onSaveLocationError, onSaveClassChanges = _this$props.onSaveClassChanges, onClose = _this$props.onClose; // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n              // const valid = true;\n\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(nestedEditFieldValidation(_this.state, _this.state.updatedClassRoom, _this.onSetValidation, function (validation) {\n                return console.warn('validation', validation);\n              }));\n\n            case 5:\n              valid = _context.sent;\n\n              if (!valid) {\n                // return onSaveLocationError();\n                console.warn('not valid');\n              }\n\n              postBody = {\n                id: id,\n                basicInfo: basicInfo,\n                accountInfo: accountInfo,\n                contactInfo: contactInfo,\n                locations: locations,\n                summary: summary\n              };\n              onSaveClassChanges(postBody);\n              onClose();\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCancelChanges\", function () {\n      var onClose = _this.props.onClose;\n      var originalClassRoom = _this.state.originalClassRoom;\n\n      _this.setState({\n        updatedClassRoom: originalClassRoom\n      }, onClose());\n    });\n\n    _this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalClassRoom: {\n        summary: {\n          amount_students: '',\n          start_date: '',\n          end_date: '',\n          improvement: 0,\n          coursework_assigned: 0,\n          coursework_completed: 0,\n          problems_flagged_review: 0,\n          average_score: 0,\n          achieved_target_score: 0,\n          average_practice_tests_completed: 0,\n          instruction: 0\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      updatedClassRoom: {\n        summary: {\n          amount_students: '',\n          start_date: '',\n          end_date: '',\n          improvement: 0,\n          coursework_assigned: 0,\n          coursework_completed: 0,\n          problems_flagged_review: 0,\n          average_score: 0,\n          achieved_target_score: 0,\n          average_practice_tests_completed: 0,\n          instruction: 0\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true\n        }\n      }\n    };\n    return _this;\n  }\n\n  _createClass(ClassDetailModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props$classroom2 = this.props.classroom;\n      _this$props$classroom2 = _this$props$classroom2 === void 0 ? {} : _this$props$classroom2;\n      var id = _this$props$classroom2.id,\n          basicInfo = _this$props$classroom2.basicInfo,\n          accountInfo = _this$props$classroom2.accountInfo,\n          contactInfo = _this$props$classroom2.contactInfo,\n          locations = _this$props$classroom2.locations,\n          summary = _this$props$classroom2.summary;\n      var updatedClassRoom = {\n        id: id,\n        basicInfo: basicInfo,\n        accountInfo: accountInfo,\n        contactInfo: contactInfo,\n        locations: locations,\n        summary: summary\n      };\n      var originalClassRoomState = this.state.originalClassRoom;\n      var originalClassRoom = update(originalClassRoomState, {\n        $merge: updatedClassRoom\n      });\n      this.setState({\n        originalClassRoom: originalClassRoom,\n        updatedClassRoom: updatedClassRoom\n      }); // eslint-disable-line\n    } // This resets the component state to reflect the details of the next classroom the user clicks on\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          open = _this$props2.open,\n          onOpenDeleteModal = _this$props2.onOpenDeleteModal,\n          onDeleteClass = _this$props2.onDeleteClass,\n          deleteModalOpen = _this$props2.deleteModalOpen,\n          index = _this$props2.index;\n      var _this$state = this.state,\n          dropdownIsOpen = _this$state.dropdownIsOpen,\n          dropdownIndex = _this$state.dropdownIndex,\n          activeLocation = _this$state.activeLocation,\n          deleteLocationModalOpen = _this$state.deleteLocationModalOpen,\n          pendingLocationDelete = _this$state.pendingLocationDelete,\n          newLocationModalOpen = _this$state.newLocationModalOpen,\n          editLocationModalOpen = _this$state.editLocationModalOpen,\n          _this$state$updatedCl3 = _this$state.updatedClassRoom,\n          updatedAccountInfo = _this$state$updatedCl3.accountInfo,\n          updatedContactInfo = _this$state$updatedCl3.contactInfo,\n          updatedLocations = _this$state$updatedCl3.locations;\n      return __jsx(Portal, {\n        selector: \"#modal\"\n      }, open && __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"overlay\"\n      }, __jsx(ClickOffComponentWrapper, {\n        onOuterClick: this.onCancelChanges,\n        nestedModals: deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen\n      }, __jsx(\"div\", {\n        id: \"modal_user_edit\",\n        className: \"jsx-2557376288\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-modal card-main card grey lighten-3\"\n      }, __jsx(\"div\", {\n        style: {\n          backgroundColor: \"#31837a\",\n          color: \"#fff\"\n        },\n        className: \"jsx-2557376288\" + \" \" + \"owner-box card-panel card-panel-title\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-panel-row row\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"col s9\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"user-block\"\n      }, __jsx(\"div\", {\n        style: {\n          backgroundColor: \"#0085ce\",\n          color: \"#fff\"\n        },\n        className: \"jsx-2557376288\" + \" \" + \"user-circle\"\n      }, __jsx(\"img\", {\n        src: \"./static/images/img-owner01.jpg\",\n        alt: \"\",\n        className: \"jsx-2557376288\"\n      })), __jsx(\"div\", {\n        style: {\n          color: \"#fff\"\n        },\n        className: \"jsx-2557376288\" + \" \" + \"user-text\"\n      }, this.renderModalHeader()))), __jsx(\"div\", {\n        style: {\n          textAlign: \"right\"\n        },\n        className: \"jsx-2557376288\" + \" \" + \"col\"\n      }, __jsx(\"span\", {\n        className: \"jsx-2557376288\" + \" \" + \"block-icon\"\n      }, __jsx(\"i\", {\n        className: \"jsx-2557376288\" + \" \" + \"icon-owner\"\n      }), __jsx(\"span\", {\n        className: \"jsx-2557376288\" + \" \" + \"text-icon\"\n      }, \"Owner\"))))), __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-content\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-body\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"row mb-0\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"col s12 l6\"\n      }, __jsx(AccountInfo, {\n        state: this.initialClassRoomMount() ? accountInfo : updatedAccountInfo,\n        handleDetailsChange: this.handleDetailsChange\n      }), __jsx(ContactInfo, {\n        state: this.initialClassRoomMount() ? contactInfo : updatedContactInfo,\n        handleDetailsChange: this.handleDetailsChange\n      })), __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"col s12 l6\"\n      }, __jsx(Locations, {\n        state: this.initialClassRoomMount() ? locations : updatedLocations,\n        handleDetailsChange: this.handleDetailsChange,\n        dropdownIsOpen: dropdownIsOpen,\n        dropdownIndex: dropdownIndex,\n        activeLocation: activeLocation,\n        deleteLocationModalOpen: deleteLocationModalOpen,\n        pendingLocationDelete: pendingLocationDelete,\n        newLocationModalOpen: newLocationModalOpen,\n        editLocationModalOpen: editLocationModalOpen,\n        onSetDropdown: this.onSetDropdown,\n        onCloseDropdown: this.onCloseDropdown,\n        onOpenNewLocationModal: this.onOpenNewLocationModal,\n        onOpenEditLocationModal: this.onOpenEditLocationModal,\n        onCloseNewLocationModal: this.onCloseNewLocationModal,\n        onCloseEditLocationModal: this.onCloseEditLocationModal,\n        onOpenDeleteLocationModal: this.onOpenDeleteLocationModal,\n        onCloseDeleteLocationModal: this.onCloseDeleteLocationModal\n      })))), __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"modal-footer\"\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return onDeleteClass(index);\n        },\n        className: \"jsx-2557376288\" + \" \" + \"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n      }, \"Delete\"), __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onCancelChanges,\n        className: \"jsx-2557376288\" + \" \" + \"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n      }, \"Cancel\"), __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onSubmit,\n        className: \"jsx-2557376288\" + \" \" + \"btn\"\n      }, \"Save\"))))))), __jsx(_JSXStyle, {\n        id: \"2557376288\"\n      }, \".overlay.jsx-2557376288{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:1999;}.card-modal.jsx-2557376288{margin:0;border-radius:6px;}.modal.jsx-2557376288{display:block;background-color:white;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}.modal-custom.jsx-2557376288{opacity:1;visibility:visible;}.modal-footer.jsx-2557376288{background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL0NsYXNzZXMvTGlzdFBhZ2UvY29tcG9uZW50cy9DbGFzc0RldGFpbE1vZGFsL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlTVyxBQUdnQyxBQVNOLEFBSUssQUFTSixBQUlhLFNBaEJMLENBYUMsSUFUSSxDQWJhLFFBMEJ0QyxJQWhCQSxFQWFBLFFBVG9CLFdBYlosTUFDRSxDQWFBLE9BWkMsQ0FhQyxRQVpILEVBYUUsS0FaSSxJQWEyRyxTQVoxSCxvR0FhQSIsImZpbGUiOiIvVm9sdW1lcy9IREQvU2l0ZXMvY2xlYXJjaG9pY2V0ZXN0cHJlcC9jbGVhci1jaG9pY2UtYWRtaW4vY29tcG9uZW50cy9DbGFzc2VzL0xpc3RQYWdlL2NvbXBvbmVudHMvQ2xhc3NEZXRhaWxNb2RhbC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcbmltcG9ydCBQb3J0YWwgZnJvbSBcIi4uLy4uLy4uLy4uL1BvcnRhbFwiO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICdpbW11dGFiaWxpdHktaGVscGVyJztcbmltcG9ydCBDbGlja09mZkNvbXBvbmVudFdyYXBwZXIgZnJvbSAnLi4vLi4vLi4vLi4vQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyJztcblxuaW1wb3J0IEFjY291bnRJbmZvIGZyb20gJy4uL1NoYXJlZE1vZGFsQ29tcG9uZW50cy9BY2NvdW50SW5mbyc7XG5pbXBvcnQgQ29udGFjdEluZm8gZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0NvbnRhY3RJbmZvJztcbmltcG9ydCBMb2NhdGlvbnMgZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0xvY2F0aW9ucyc7XG5cbmltcG9ydCB7IG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9maWVsZFZhbGlkYXRpb24nO1xuXG5cblxuY2xhc3MgQ2xhc3NEZXRhaWxNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsXG4gICAgICBuZXdMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsXG4gICAgICBlZGl0TG9jYXRpb25Nb2RhbE9wZW46IGZhbHNlLFxuICAgICAgcGVuZGluZ0xvY2F0aW9uRGVsZXRlOiB7fSxcbiAgICAgIGFjdGl2ZUxvY2F0aW9uOiB7fSxcbiAgICAgIGRyb3Bkb3duSXNPcGVuOiBmYWxzZSxcbiAgICAgIGRyb3Bkb3duSW5kZXg6IG51bGwsXG4gICAgICBvcmlnaW5hbENsYXNzUm9vbToge1xuICAgICAgICBzdW1tYXJ5OntcbiAgICAgICAgICBhbW91bnRfc3R1ZGVudHM6JycsXG4gICAgICAgICAgc3RhcnRfZGF0ZTonJyxcbiAgICAgICAgICBlbmRfZGF0ZTonJyxcbiAgICAgICAgICBpbXByb3ZlbWVudDowLFxuICAgICAgICAgIGNvdXJzZXdvcmtfYXNzaWduZWQ6MCxcbiAgICAgICAgICBjb3Vyc2V3b3JrX2NvbXBsZXRlZDowLFxuICAgICAgICAgIHByb2JsZW1zX2ZsYWdnZWRfcmV2aWV3OjAsXG4gICAgICAgICAgYXZlcmFnZV9zY29yZTowLFxuICAgICAgICAgIGFjaGlldmVkX3RhcmdldF9zY29yZTowLFxuICAgICAgICAgIGF2ZXJhZ2VfcHJhY3RpY2VfdGVzdHNfY29tcGxldGVkOjAsXG4gICAgICAgICAgaW5zdHJ1Y3Rpb246MCxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjb3VudEluZm86IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICBlbWFpbDogJycsXG4gICAgICAgICAgZ2VuZGVyOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFjdEluZm86IHtcbiAgICAgICAgICBwaG9uZTogJycsXG4gICAgICAgICAgc3RyZWV0QWRkcmVzczogJycsXG4gICAgICAgICAgY2l0eTogJycsXG4gICAgICAgICAgc3RhdGU6ICcnLFxuICAgICAgICAgIHppcDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIGxvY2F0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgdXBkYXRlZENsYXNzUm9vbToge1xuICAgICAgICBzdW1tYXJ5OntcbiAgICAgICAgICBhbW91bnRfc3R1ZGVudHM6JycsXG4gICAgICAgICAgc3RhcnRfZGF0ZTonJyxcbiAgICAgICAgICBlbmRfZGF0ZTonJyxcbiAgICAgICAgICBpbXByb3ZlbWVudDowLFxuICAgICAgICAgIGNvdXJzZXdvcmtfYXNzaWduZWQ6MCxcbiAgICAgICAgICBjb3Vyc2V3b3JrX2NvbXBsZXRlZDowLFxuICAgICAgICAgIHByb2JsZW1zX2ZsYWdnZWRfcmV2aWV3OjAsXG4gICAgICAgICAgYXZlcmFnZV9zY29yZTowLFxuICAgICAgICAgIGFjaGlldmVkX3RhcmdldF9zY29yZTowLFxuICAgICAgICAgIGF2ZXJhZ2VfcHJhY3RpY2VfdGVzdHNfY29tcGxldGVkOjAsXG4gICAgICAgICAgaW5zdHJ1Y3Rpb246MCxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjb3VudEluZm86IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICBlbWFpbDogJycsXG4gICAgICAgICAgZ2VuZGVyOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFjdEluZm86IHtcbiAgICAgICAgICBwaG9uZTogJycsXG4gICAgICAgICAgc3RyZWV0QWRkcmVzczogJycsXG4gICAgICAgICAgY2l0eTogJycsXG4gICAgICAgICAgc3RhdGU6ICcnLFxuICAgICAgICAgIHppcDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIGxvY2F0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICBhY2NvdW50SW5mbzoge1xuICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICBnZW5kZXI6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgY2xhc3Nyb29tOiB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfSA9IHt9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHVwZGF0ZWRDbGFzc1Jvb20gPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfTtcbiAgICBjb25zdCB7IG9yaWdpbmFsQ2xhc3NSb29tOiBvcmlnaW5hbENsYXNzUm9vbVN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3NSb29tID0gdXBkYXRlKG9yaWdpbmFsQ2xhc3NSb29tU3RhdGUsIHskbWVyZ2U6IHVwZGF0ZWRDbGFzc1Jvb219KTtcbiAgICB0aGlzLnNldFN0YXRlKHsgb3JpZ2luYWxDbGFzc1Jvb20sIHVwZGF0ZWRDbGFzc1Jvb20gfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgfVxuXG4gIC8vIFRoaXMgcmVzZXRzIHRoZSBjb21wb25lbnQgc3RhdGUgdG8gcmVmbGVjdCB0aGUgZGV0YWlscyBvZiB0aGUgbmV4dCBjbGFzc3Jvb20gdGhlIHVzZXIgY2xpY2tzIG9uXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSAobmV4dFByb3BzKSA9PiB7XG4gICAgaWYgKCghdGhpcy5zdGF0ZS5vcmlnaW5hbENsYXNzUm9vbSB8fCBuZXh0UHJvcHMuY2xhc3Nyb29tLmlkICE9PSB0aGlzLnN0YXRlLm9yaWdpbmFsQ2xhc3NSb29tLmlkKSkge1xuICAgICAgY29uc3QgeyBjbGFzc3Jvb206IHsgaWQsIGJhc2ljSW5mbywgYWNjb3VudEluZm8sIGNvbnRhY3RJbmZvLCBsb2NhdGlvbnMsc3VtbWFyeSB9ID0ge30gfSA9IG5leHRQcm9wcztcbiAgICAgIGNvbnN0IHVwZGF0ZWRDbGFzc1Jvb20gPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfTtcbiAgICAgIGNvbnN0IHsgb3JpZ2luYWxDbGFzc1Jvb206IG9yaWdpbmFsQ2xhc3NSb29tU3RhdGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCBvcmlnaW5hbENsYXNzUm9vbSA9IHVwZGF0ZShvcmlnaW5hbENsYXNzUm9vbVN0YXRlLCB7XG4gICAgICAgICRtZXJnZTogbmV4dFByb3BzLmNsYXNzcm9vbSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9yaWdpbmFsQ2xhc3NSb29tLCB1cGRhdGVkQ2xhc3NSb29tIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFdlIHB1bGwgdGhlIHZhbHVlIGJhc2VkIG9uIHRoZSBmaWVsZCB0eXBlIHRoZW4gbWVyZ2UgdGhhdCB1cGRhdGVkIGtleS92YWx1ZSBwYWlyIHdpdGggdGhlIGxhc3QgdmVyc2lvbiBvZiBjb21wb25lbnQgc3RhdGVcbiAgaGFuZGxlRGV0YWlsc0NoYW5nZSA9IChldmVudCwgbmFtZSwgc2VjdGlvbikgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBldmVudC50YXJnZXQgPyBldmVudC50YXJnZXQudmFsdWUgOiBldmVudDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRDbGFzc1Jvb20gPSB1cGRhdGUodGhpcy5zdGF0ZS51cGRhdGVkQ2xhc3NSb29tLCB7XG4gICAgICAgIFtzZWN0aW9uXTogeyAkbWVyZ2U6IHsgW25hbWVdOiB2YWx1ZSB9IH0sXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3VwZGF0ZWRDbGFzc1Jvb219KTtcbiAgfVxuXG4gIGluaXRpYWxDbGFzc1Jvb21Nb3VudCA9ICgpID0+IHRoaXMuc3RhdGUub3JpZ2luYWxDbGFzc1Jvb20uaWQgIT09IHRoaXMucHJvcHMuY2xhc3Nyb29tLmlkO1xuXG4gIHJlbmRlck1vZGFsSGVhZGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3Nyb29tOiB7IGFjY291bnRJbmZvOiB7IGxhc3ROYW1lOiBpbml0aWFsTGFzdE5hbWUsIGZpcnN0TmFtZTogaW5pdGlhbEZJcnN0TmFtZSwgZW1haWw6IGluaXRpYWxFbWFpbCB9IH0gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB1cGRhdGVkQ2xhc3NSb29tOiB7IGFjY291bnRJbmZvOiB7IGxhc3ROYW1lOiB1cGRhdGVkTGFzdE5hbWUsIGZpcnN0TmFtZTogdXBkYXRlZEZpcnN0TmFtZSwgZW1haWw6IHVwZGF0ZWRFbWFpbCB9IH0gfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IGxhc3ROYW1lO1xuICAgIGxldCBmaXJzdE5hbWU7XG4gICAgbGV0IGVtYWlsO1xuICAgIGlmICh0aGlzLmluaXRpYWxDbGFzc1Jvb21Nb3VudCgpKSB7XG4gICAgICBsYXN0TmFtZSA9IGluaXRpYWxMYXN0TmFtZTtcbiAgICAgIGZpcnN0TmFtZSA9IGluaXRpYWxGSXJzdE5hbWU7XG4gICAgICBlbWFpbCA9IGluaXRpYWxFbWFpbDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdE5hbWUgPSB1cGRhdGVkTGFzdE5hbWU7XG4gICAgICBmaXJzdE5hbWUgPSB1cGRhdGVkRmlyc3ROYW1lO1xuICAgICAgZW1haWwgPSB1cGRhdGVkRW1haWw7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgIDxoNCBjbGFzc05hbWU9XCJoM1wiPntsYXN0TmFtZX0sIHtmaXJzdE5hbWV9PC9oND5cbiAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke2VtYWlsfWB9PntlbWFpbH08L2E+XG4gICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICk7XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbnRvIG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24sIGl0IHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24gY2hlY2sgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgLy8gVGhlIHVwZGF0ZWQgY29tcG9uZW50IHZhbGlkYXRpb24gc3RhdGUgaXMgc2V0IGFuZCB0aGVuIHRoZSBjYWxsYmFjayBpcyBkaXNwYXRjaGVkIC0gaW4gdGhpcyBjYXNlLCB0aGUgY2FsbGJhY2sgaGFuZGxlcyB0aGUgdG9hc3Qgd2FybmluZyBhdCB0aGUgY29udGFpbmVyIGxldmVsXG4gIG9uU2V0VmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uLCBjYikgPT4gdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRpb24gfSwgY2IpO1xuXG4gIC8vIElmIGFsbCB0aGUgZmllbGRzIGFyZSB2YWxpZCwgd2UgY29uc3RydWN0IGEgcG9zdCBib2R5IGFuZCBjYWxsIG9uU2F2ZU5ld0xvY2F0aW9uIHBhc3NlZCBkb3duIGZyb20gdGhlIGNvbnRhaW5lciBsZXZlbFxuICBvblN1Ym1pdCA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgeyB1cGRhdGVkQ2xhc3NSb29tOiB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG9uU2F2ZUxvY2F0aW9uRXJyb3IsIG9uU2F2ZUNsYXNzQ2hhbmdlcywgb25DbG9zZSB9ID0gdGhpcy5wcm9wcztcbiAgICAvLyBOT1RFOiBTd2FwIG91dCB3aGF0IGluc3RhbmNlIG9mIHZhbGlkIGlzIGFjdGl2ZSBpZiB5b3Ugd2FudCB0byB0ZXN0IHNhdmluZyBhIG5ldyBsb2NhdGlvbiB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHZhbGlkYXRpb25cbiAgICAvLyBjb25zdCB2YWxpZCA9IHRydWU7XG4gICAgY29uc3QgdmFsaWQgPSBhd2FpdCBuZXN0ZWRFZGl0RmllbGRWYWxpZGF0aW9uKHRoaXMuc3RhdGUsIHRoaXMuc3RhdGUudXBkYXRlZENsYXNzUm9vbSwgdGhpcy5vblNldFZhbGlkYXRpb24sICh2YWxpZGF0aW9uKSA9PiBjb25zb2xlLndhcm4oJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKSk7XG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgLy8gcmV0dXJuIG9uU2F2ZUxvY2F0aW9uRXJyb3IoKTtcbiAgICAgIGNvbnNvbGUud2Fybignbm90IHZhbGlkJyk7XG4gICAgfVxuICAgIGNvbnN0IHBvc3RCb2R5ID0geyBpZCwgYmFzaWNJbmZvLCBhY2NvdW50SW5mbywgY29udGFjdEluZm8sIGxvY2F0aW9ucyxzdW1tYXJ5IH07XG4gICAgb25TYXZlQ2xhc3NDaGFuZ2VzKHBvc3RCb2R5KTtcbiAgICBvbkNsb3NlKCk7XG4gIH1cblxuICBvbkNhbmNlbENoYW5nZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBvbkNsb3NlIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgb3JpZ2luYWxDbGFzc1Jvb20gfSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZWRDbGFzc1Jvb206IG9yaWdpbmFsQ2xhc3NSb29tIH0sIG9uQ2xvc2UoKSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBvcGVuLG9uT3BlbkRlbGV0ZU1vZGFsLG9uRGVsZXRlQ2xhc3MsIGRlbGV0ZU1vZGFsT3BlbixpbmRleCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGRyb3Bkb3duSXNPcGVuLCBkcm9wZG93bkluZGV4LCBhY3RpdmVMb2NhdGlvbiwgZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW4sIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZSwgbmV3TG9jYXRpb25Nb2RhbE9wZW4sIGVkaXRMb2NhdGlvbk1vZGFsT3BlbixcbiAgICAgIHVwZGF0ZWRDbGFzc1Jvb206IHthY2NvdW50SW5mbzogdXBkYXRlZEFjY291bnRJbmZvLCBjb250YWN0SW5mbzogdXBkYXRlZENvbnRhY3RJbmZvLCBsb2NhdGlvbnM6IHVwZGF0ZWRMb2NhdGlvbnN9LFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8UG9ydGFsIHNlbGVjdG9yPVwiI21vZGFsXCI+XG4gICAgICAgIHtvcGVuICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJsYXlcIj5cbiAgICAgICAgICAgIDxDbGlja09mZkNvbXBvbmVudFdyYXBwZXJcbiAgICAgICAgICAgICAgb25PdXRlckNsaWNrPXt0aGlzLm9uQ2FuY2VsQ2hhbmdlc31cbiAgICAgICAgICAgICAgbmVzdGVkTW9kYWxzPXsgZGVsZXRlTW9kYWxPcGVuIHx8IGRlbGV0ZUxvY2F0aW9uTW9kYWxPcGVuIHx8IGVkaXRMb2NhdGlvbk1vZGFsT3BlbiB8fCBuZXdMb2NhdGlvbk1vZGFsT3BlbiB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBpZD1cIm1vZGFsX3VzZXJfZWRpdFwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibW9kYWwgbW9kYWwtY3VzdG9tIG1vZGFsLWN1c3RvbS1sYXJnZSBtb2RhbC1ncmF5XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tb2RhbCBjYXJkLW1haW4gY2FyZCBncmV5IGxpZ2h0ZW4tM1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvd25lci1ib3ggY2FyZC1wYW5lbCBjYXJkLXBhbmVsLXRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcIiMzMTgzN2FcIiwgY29sb3I6IFwiI2ZmZlwiIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wYW5lbC1yb3cgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wgczlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidXNlci1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwODVjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4vc3RhdGljL2ltYWdlcy9pbWctb3duZXIwMS5qcGdcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXRleHRcIiBzdHlsZT17eyBjb2xvcjogXCIjZmZmXCIgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTW9kYWxIZWFkZXIoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbFwiIHN0eWxlPXt7IHRleHRBbGlnbjogXCJyaWdodFwiIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmxvY2staWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJpY29uLW93bmVyXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWljb25cIj5Pd25lcjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wgczEyIGw2XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPXsgdGhpcy5pbml0aWFsQ2xhc3NSb29tTW91bnQoKT8gYWNjb3VudEluZm86IHVwZGF0ZWRBY2NvdW50SW5mbyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxDbGFzc1Jvb21Nb3VudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1cGRhdGVkQ29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzMTIgbDZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPExvY2F0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPXsgdGhpcy5pbml0aWFsQ2xhc3NSb29tTW91bnQoKT8gbG9jYXRpb25zIDogdXBkYXRlZExvY2F0aW9ucyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duSXNPcGVuPXtkcm9wZG93bklzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkluZGV4PXtkcm9wZG93bkluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxvY2F0aW9uPXthY3RpdmVMb2NhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVMb2NhdGlvbk1vZGFsT3Blbj17ZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uRGVsZXRlPXtwZW5kaW5nTG9jYXRpb25EZWxldGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYXRpb25Nb2RhbE9wZW49e25ld0xvY2F0aW9uTW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRMb2NhdGlvbk1vZGFsT3Blbj17ZWRpdExvY2F0aW9uTW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2V0RHJvcGRvd249e3RoaXMub25TZXREcm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlRHJvcGRvd249e3RoaXMub25DbG9zZURyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3Blbk5ld0xvY2F0aW9uTW9kYWw9e3RoaXMub25PcGVuTmV3TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5FZGl0TG9jYXRpb25Nb2RhbD17IHRoaXMub25PcGVuRWRpdExvY2F0aW9uTW9kYWwgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2VOZXdMb2NhdGlvbk1vZGFsPXsgdGhpcy5vbkNsb3NlTmV3TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlRWRpdExvY2F0aW9uTW9kYWw9eyB0aGlzLm9uQ2xvc2VFZGl0TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5EZWxldGVMb2NhdGlvbk1vZGFsPXsgdGhpcy5vbk9wZW5EZWxldGVMb2NhdGlvbk1vZGFsIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlRGVsZXRlTG9jYXRpb25Nb2RhbD17IHRoaXMub25DbG9zZURlbGV0ZUxvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uRGVsZXRlQ2xhc3MoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2F2ZXMtZWZmZWN0IHdhdmVzLXRlYWwgYnRuLWZsYXQgcGluay10ZXh0IHRleHQtZGFya2VuLTFcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIERlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbENoYW5nZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtb2RhbC1jbG9zZSB3YXZlcy1lZmZlY3Qgd2F2ZXMtdGVhbCBidG4tZmxhdCBncmV5LXRleHQgdGV4dC1kYXJrZW4tMVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17dGhpcy5vblN1Ym1pdH0gY2xhc3NOYW1lPVwiYnRuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIC5vdmVybGF5IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxOTk5O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5jYXJkLW1vZGFsIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5tb2RhbCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMTAlO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAxMCU7XG4gICAgICAgICAgICAgICAgbGVmdDogMTAlO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMjRweCAzOHB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDlweCA0NnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDExcHggMTVweCAtN3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAubW9kYWwtY3VzdG9tIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLm1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L1BvcnRhbD5cbiAgICApO1xuICB9XG59XG5cbkNsYXNzRGV0YWlsTW9kYWwucHJvcFR5cGVzID0ge1xuICBpbmRleDpQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIG9wZW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIGRlbGV0ZU1vZGFsT3BlbjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgb25DbG9zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25PcGVuRGVsZXRlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGNsYXNzcm9vbTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvblNhdmVDbGFzc0NoYW5nZXM6UHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENsYXNzRGV0YWlsTW9kYWw7XG4iXX0= */\\n/*@ sourceURL=/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Classes/ListPage/components/ClassDetailModal/index.js */\"));\n    }\n  }]);\n\n  return ClassDetailModal;\n}(React.Component);\n\nClassDetailModal.propTypes = {\n  index: PropTypes.number.isRequired,\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  classroom: PropTypes.object.isRequired,\n  onSaveClassChanges: PropTypes.func.isRequired\n};\nexport default ClassDetailModal;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Classes/ListPage/components/ClassDetailModal/index.js"],"names":["React","PropTypes","Portal","update","ClickOffComponentWrapper","AccountInfo","ContactInfo","Locations","nestedEditFieldValidation","ClassDetailModal","props","nextProps","state","originalClassRoom","classroom","id","basicInfo","accountInfo","contactInfo","locations","summary","updatedClassRoom","originalClassRoomState","$merge","setState","event","name","section","value","target","initialLastName","lastName","initialFIrstName","firstName","initialEmail","email","updatedLastName","updatedFirstName","updatedEmail","initialClassRoomMount","validation","cb","preventDefault","onSaveLocationError","onSaveClassChanges","onClose","onSetValidation","console","warn","valid","postBody","deleteLocationModalOpen","newLocationModalOpen","editLocationModalOpen","pendingLocationDelete","activeLocation","dropdownIsOpen","dropdownIndex","amount_students","start_date","end_date","improvement","coursework_assigned","coursework_completed","problems_flagged_review","average_score","achieved_target_score","average_practice_tests_completed","instruction","gender","phone","streetAddress","city","zip","open","onOpenDeleteModal","onDeleteClass","deleteModalOpen","index","updatedAccountInfo","updatedContactInfo","updatedLocations","onCancelChanges","backgroundColor","color","renderModalHeader","textAlign","handleDetailsChange","onSetDropdown","onCloseDropdown","onOpenNewLocationModal","onOpenEditLocationModal","onCloseNewLocationModal","onCloseEditLocationModal","onOpenDeleteLocationModal","onCloseDeleteLocationModal","onSubmit","Component","propTypes","number","isRequired","bool","func","object"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"../../../../Portal\";\nimport update from 'immutability-helper';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\n\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\n\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\n\n\nclass ClassDetailModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalClassRoom: {\n        summary:{\n          amount_students:'',\n          start_date:'',\n          end_date:'',\n          improvement:0,\n          coursework_assigned:0,\n          coursework_completed:0,\n          problems_flagged_review:0,\n          average_score:0,\n          achieved_target_score:0,\n          average_practice_tests_completed:0,\n          instruction:0,\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      updatedClassRoom: {\n        summary:{\n          amount_students:'',\n          start_date:'',\n          end_date:'',\n          improvement:0,\n          coursework_assigned:0,\n          coursework_completed:0,\n          problems_flagged_review:0,\n          average_score:0,\n          achieved_target_score:0,\n          average_practice_tests_completed:0,\n          instruction:0,\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true,\n        },\n      },\n    }\n  }\n\n  componentDidMount() {\n    const { classroom: { id, basicInfo, accountInfo, contactInfo, locations,summary } = {} } = this.props;\n    const updatedClassRoom = { id, basicInfo, accountInfo, contactInfo, locations,summary };\n    const { originalClassRoom: originalClassRoomState } = this.state;\n    const originalClassRoom = update(originalClassRoomState, {$merge: updatedClassRoom});\n    this.setState({ originalClassRoom, updatedClassRoom }); // eslint-disable-line\n  }\n\n  // This resets the component state to reflect the details of the next classroom the user clicks on\n  componentWillReceiveProps = (nextProps) => {\n    if ((!this.state.originalClassRoom || nextProps.classroom.id !== this.state.originalClassRoom.id)) {\n      const { classroom: { id, basicInfo, accountInfo, contactInfo, locations,summary } = {} } = nextProps;\n      const updatedClassRoom = { id, basicInfo, accountInfo, contactInfo, locations,summary };\n      const { originalClassRoom: originalClassRoomState } = this.state;\n      const originalClassRoom = update(originalClassRoomState, {\n        $merge: nextProps.classroom,\n      });\n      this.setState({ originalClassRoom, updatedClassRoom });\n    }\n  }\n\n  // We pull the value based on the field type then merge that updated key/value pair with the last version of component state\n  handleDetailsChange = (event, name, section) => {\n      const value = event.target ? event.target.value : event;\n      const updatedClassRoom = update(this.state.updatedClassRoom, {\n        [section]: { $merge: { [name]: value } },\n      });\n      this.setState({updatedClassRoom});\n  }\n\n  initialClassRoomMount = () => this.state.originalClassRoom.id !== this.props.classroom.id;\n\n  renderModalHeader = () => {\n    const { classroom: { accountInfo: { lastName: initialLastName, firstName: initialFIrstName, email: initialEmail } } } = this.props;\n    const { updatedClassRoom: { accountInfo: { lastName: updatedLastName, firstName: updatedFirstName, email: updatedEmail } } } = this.state;\n    let lastName;\n    let firstName;\n    let email;\n    if (this.initialClassRoomMount()) {\n      lastName = initialLastName;\n      firstName = initialFIrstName;\n      email = initialEmail;\n    } else {\n      lastName = updatedLastName;\n      firstName = updatedFirstName;\n      email = updatedEmail;\n    }\n    return (\n      <React.Fragment>\n        <h4 className=\"h3\">{lastName}, {firstName}</h4>\n        <a href={`mailto:${email}`}>{email}</a>\n      </React.Fragment>\n    );\n  }\n\n  // This function is passed into nestedEditFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n  onSetValidation = (validation, cb) => this.setState({ validation }, cb);\n\n  // If all the fields are valid, we construct a post body and call onSaveNewLocation passed down from the container level\n  onSubmit = async (event) => {\n    event.preventDefault();\n    const { updatedClassRoom: { id, basicInfo, accountInfo, contactInfo, locations,summary } } = this.state;\n    const { onSaveLocationError, onSaveClassChanges, onClose } = this.props;\n    // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n    // const valid = true;\n    const valid = await nestedEditFieldValidation(this.state, this.state.updatedClassRoom, this.onSetValidation, (validation) => console.warn('validation', validation));\n    if (!valid) {\n      // return onSaveLocationError();\n      console.warn('not valid');\n    }\n    const postBody = { id, basicInfo, accountInfo, contactInfo, locations,summary };\n    onSaveClassChanges(postBody);\n    onClose();\n  }\n\n  onCancelChanges = () => {\n    const { onClose } = this.props;\n    const { originalClassRoom } = this.state;\n    this.setState({ updatedClassRoom: originalClassRoom }, onClose());\n  }\n\n  render() {\n    const { open,onOpenDeleteModal,onDeleteClass, deleteModalOpen,index } = this.props;\n    const { dropdownIsOpen, dropdownIndex, activeLocation, deleteLocationModalOpen, pendingLocationDelete, newLocationModalOpen, editLocationModalOpen,\n      updatedClassRoom: {accountInfo: updatedAccountInfo, contactInfo: updatedContactInfo, locations: updatedLocations},\n    } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <div className=\"overlay\">\n            <ClickOffComponentWrapper\n              onOuterClick={this.onCancelChanges}\n              nestedModals={ deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen }\n            >\n              <div\n                id=\"modal_user_edit\"\n                className=\"modal modal-custom modal-custom-large modal-gray\"\n              >\n                <div className=\"card-modal card-main card grey lighten-3\">\n                  <div\n                    className=\"owner-box card-panel card-panel-title\"\n                    style={{ backgroundColor: \"#31837a\", color: \"#fff\" }}\n                  >\n                    <div className=\"card-panel-row row\">\n                      <div className=\"col s9\">\n                        <div className=\"user-block\">\n                          <div\n                            className=\"user-circle\"\n                            style={{\n                              backgroundColor: \"#0085ce\",\n                              color: \"#fff\",\n                            }}\n                          >\n                            <img src=\"./static/images/img-owner01.jpg\" alt=\"\" />\n                          </div>\n                          <div className=\"user-text\" style={{ color: \"#fff\" }}>\n                            {this.renderModalHeader()}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"col\" style={{ textAlign: \"right\" }}>\n                        <span className=\"block-icon\">\n                          <i className=\"icon-owner\"></i>\n                          <span className=\"text-icon\">Owner</span>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"card-content\">\n                    <div className=\"card-body\">\n                      <div className=\"row mb-0\">\n                        <div className=\"col s12 l6\">\n                          <AccountInfo\n                            state={ this.initialClassRoomMount()? accountInfo: updatedAccountInfo }\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                          <ContactInfo\n                            state={\n                              this.initialClassRoomMount()\n                                ? contactInfo\n                                : updatedContactInfo\n                            }\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                        </div>\n                        <div className=\"col s12 l6\">\n                          <Locations\n                            state={ this.initialClassRoomMount()? locations : updatedLocations }\n                            handleDetailsChange={this.handleDetailsChange}\n                            dropdownIsOpen={dropdownIsOpen}\n                            dropdownIndex={dropdownIndex}\n                            activeLocation={activeLocation}\n                            deleteLocationModalOpen={deleteLocationModalOpen}\n                            pendingLocationDelete={pendingLocationDelete}\n                            newLocationModalOpen={newLocationModalOpen}\n                            editLocationModalOpen={editLocationModalOpen}\n                            onSetDropdown={this.onSetDropdown}\n                            onCloseDropdown={this.onCloseDropdown}\n                            onOpenNewLocationModal={this.onOpenNewLocationModal}\n                            onOpenEditLocationModal={ this.onOpenEditLocationModal }\n                            onCloseNewLocationModal={ this.onCloseNewLocationModal}\n                            onCloseEditLocationModal={ this.onCloseEditLocationModal}\n                            onOpenDeleteLocationModal={ this.onOpenDeleteLocationModal }\n                            onCloseDeleteLocationModal={ this.onCloseDeleteLocationModal}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"modal-footer\">\n                      <a\n                        href=\"#\"\n                        onClick={() => onDeleteClass(index)}\n                        className=\"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n                      >\n                        Delete\n                      </a>\n                      <a\n                        href=\"#\"\n                        onClick={this.onCancelChanges}\n                        className=\"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n                      >\n                        Cancel\n                      </a>\n                      <a href=\"#\" onClick={this.onSubmit} className=\"btn\">\n                        Save\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ClickOffComponentWrapper>\n          </div>\n        )}\n        <style jsx>\n          {`\n              .overlay {\n                position: fixed;\n                background-color: rgba(0, 0, 0, 0.7);\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: 1999;\n              }\n              .card-modal {\n                margin: 0;\n                border-radius: 6px;\n              }\n              .modal {\n                display: block;\n                background-color: white;\n                position: absolute;\n                top: 10%;\n                right: 10%;\n                left: 10%;\n                box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2);\n              }\n              .modal-custom {\n                opacity: 1;\n                visibility: visible;\n              }\n              .modal-footer {\n                background-color: white;\n              }\n            `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nClassDetailModal.propTypes = {\n  index:PropTypes.number.isRequired,\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  classroom: PropTypes.object.isRequired,\n  onSaveClassChanges:PropTypes.func.isRequired,\n};\n\nexport default ClassDetailModal;\n"]},"metadata":{},"sourceType":"module"}