{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\nimport update from 'immutability-helper';\nimport moment from 'moment';\nimport Portal from '../../../../Portal';\nimport FilterSection from './components/FilterSection';\nimport WorksheetCard from './components/WorksheetCard';\nimport { difficultySort, problemSort, timeEstimateSort, subjectSort } from '../../../utils/sortOptions';\nimport sampleWorksheets from '../../../utils/sampleWorksheets';\nimport { worksheetTypeMap, worksheetSourceMap, worksheetDifficultyMap, worksheetSubjectMap } from '../../../utils/worksheetModalMaps';\n\nvar AssignWorksheetModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AssignWorksheetModal, _React$Component);\n\n  function AssignWorksheetModal(props) {\n    var _this;\n\n    _classCallCheck(this, AssignWorksheetModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AssignWorksheetModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignSelectedDropdown\", function () {\n      return _this.setState(function (_ref) {\n        var assignSelectedDropdownOpen = _ref.assignSelectedDropdownOpen;\n        return {\n          assignSelectedDropdownOpen: !assignSelectedDropdownOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetDropdown\", function (dropdownIndex) {\n      return _this.setState({\n        dropdownIndex: dropdownIndex,\n        dropdownIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseDropdown\", function () {\n      return _this.setState({\n        dropdownIsOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResetModal\", function () {\n      return _this.setState({\n        sourceFilters: [],\n        difficultyFilters: [],\n        subjectFilters: [],\n        typeFilters: [],\n        sort: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (titleFilter, value) {\n      return _this.setState(_defineProperty({}, titleFilter, value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function (titleFilter) {\n      return _this.setState(_defineProperty({}, titleFilter, ''));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseModal\", function () {\n      var onClose = _this.props.onClose;\n      onClose();\n\n      _this.onResetModal();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortWorksheets\", function (worksheets) {\n      var sort = _this.state.sort;\n\n      switch (sort) {\n        case 'difficulty':\n          return worksheets.sort(difficultySort);\n\n        case 'problems':\n          return worksheets.sort(problemSort);\n\n        case 'timeEstimate':\n          return worksheets.sort(timeEstimateSort);\n\n        case 'subject':\n          return worksheets.sort(subjectSort);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByTitle\", function () {\n      var _this$state = _this.state,\n          worksheets = _this$state.worksheets,\n          titleFilter = _this$state.titleFilter;\n      return worksheets.reduce(function (finalArr, currentWorksheet) {\n        var title = currentWorksheet.title;\n        var worksheetString = title.replace(/\\s/g, \"\").toLowerCase();\n\n        if (worksheetString.indexOf(titleFilter) !== -1 && finalArr.indexOf(currentWorksheet) === -1) {\n          finalArr.push(currentWorksheet);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByUnit\", function () {\n      var _this$state2 = _this.state,\n          worksheets = _this$state2.worksheets,\n          unitFilter = _this$state2.unitFilter;\n      return worksheets.reduce(function (finalArr, currentWorksheet) {\n        var unit = currentWorksheet.unit;\n        var worksheetString = unit.replace(/\\s/g, \"\").toLowerCase();\n\n        if (worksheetString.indexOf(unitFilter) !== -1 && finalArr.indexOf(currentWorksheet) === -1) {\n          finalArr.push(currentWorksheet);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterWorksheets\", function () {\n      var _this$state3 = _this.state,\n          subjectFilters = _this$state3.subjectFilters,\n          typeFilters = _this$state3.typeFilters,\n          sourceFilters = _this$state3.sourceFilters,\n          difficultyFilters = _this$state3.difficultyFilters,\n          allWorksheets = _this$state3.worksheets;\n      var worksheets = allWorksheets;\n\n      if (subjectFilters.length) {\n        worksheets = worksheets.filter(function (worksheet) {\n          return subjectFilters.indexOf(worksheetSubjectMap[worksheet.subject]) !== -1;\n        });\n      }\n\n      if (typeFilters.length) {\n        worksheets = worksheets.filter(function (worksheet) {\n          return typeFilters.indexOf(worksheetTypeMap[worksheet.type]) !== -1;\n        });\n      }\n\n      if (sourceFilters.length) {\n        worksheets = worksheets.filter(function (worksheet) {\n          return sourceFilters.indexOf(worksheetSourceMap[worksheet.source]) !== -1;\n        });\n      }\n\n      if (difficultyFilters.length) {\n        worksheets = worksheets.filter(function (worksheet) {\n          return difficultyFilters.indexOf(worksheetDifficultyMap[worksheet.difficulty]) !== -1;\n        });\n      }\n\n      return worksheets;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableWorksheets\", function () {\n      var _this$state4 = _this.state,\n          subjectFilters = _this$state4.subjectFilters,\n          typeFilters = _this$state4.typeFilters,\n          difficultyFilters = _this$state4.difficultyFilters,\n          sourceFilters = _this$state4.sourceFilters,\n          sort = _this$state4.sort,\n          unitFilter = _this$state4.unitFilter,\n          titleFilter = _this$state4.titleFilter,\n          worksheets = _this$state4.worksheets;\n      var mappableWorksheets = worksheets;\n\n      if (titleFilter.length) {\n        mappableWorksheets = _this.onFilterByTitle();\n      }\n\n      if (unitFilter.length) {\n        mappableWorksheets = _this.onFilterByUnit();\n      }\n\n      if (subjectFilters.length || typeFilters.length || difficultyFilters.length || sourceFilters.length) {\n        mappableWorksheets = _this.onFilterWorksheets();\n      }\n\n      if (sort) {\n        return _this.onSortWorksheets(mappableWorksheets);\n      }\n\n      return mappableWorksheets;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterClick\", function (filterType, filter) {\n      var _this$state5 = _this.state,\n          currentSourceFilters = _this$state5.sourceFilters,\n          currentDifficultyFilters = _this$state5.difficultyFilters,\n          currentSubjectFilters = _this$state5.subjectFilters,\n          currentTypeFilters = _this$state5.typeFilters;\n      var modifiedFilterCurrentState;\n      var modifiedFilterName;\n      var modifiedFilterUpdatedState;\n\n      switch (filterType) {\n        case 'subject':\n          modifiedFilterCurrentState = currentSubjectFilters;\n          modifiedFilterName = 'subjectFilters';\n          break;\n\n        case 'type':\n          modifiedFilterCurrentState = currentTypeFilters;\n          modifiedFilterName = 'typeFilters';\n          break;\n\n        case 'source':\n          modifiedFilterCurrentState = currentSourceFilters;\n          modifiedFilterName = 'sourceFilters';\n          break;\n\n        case 'difficulty':\n          modifiedFilterCurrentState = currentDifficultyFilters;\n          modifiedFilterName = 'difficultyFilters';\n          break;\n\n        default:\n          break;\n      }\n\n      if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $push: [filter]\n        });\n      } else {\n        var filterIndex = modifiedFilterCurrentState.indexOf(filter);\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, modifiedFilterName, modifiedFilterUpdatedState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWorksheetClick\", function (worksheet) {\n      var selectedWorksheets = _this.state.selectedWorksheets;\n      var modifiedWorksheets;\n\n      if (selectedWorksheets.indexOf(worksheet) === -1) {\n        modifiedWorksheets = update(selectedWorksheets, {\n          $push: [worksheet]\n        });\n      } else {\n        var worksheetIndex = selectedWorksheets.indexOf(worksheet);\n        modifiedWorksheets = update(selectedWorksheets, {\n          $splice: [[worksheetIndex, 1]]\n        });\n      }\n\n      _this.setState({\n        selectedWorksheets: modifiedWorksheets\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"assignWorksheets\", function (date) {\n      var onAssignWorksheets = _this.props.onAssignWorksheets;\n      var selectedWorksheets = _this.state.selectedWorksheets;\n      var assignDate;\n\n      switch (date) {\n        case 'today':\n          assignDate = moment().format('MM/DD/YY');\n          break;\n\n        case 'tomorrow':\n          assignDate = moment().add(1, 'days').format('MM/DD/YY');\n          break;\n\n        case 'nextSession':\n          break;\n\n        case 'customDate':\n          assignDate = '01/05/19';\n          break;\n\n        default:\n          break;\n      }\n\n      _this.onToggleAssignSelectedDropdown();\n\n      onAssignWorksheets(selectedWorksheets, assignDate);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapWorksheets\", function () {\n      return _this.getMappableWorksheets().map(function (worksheet, index) {\n        return React.createElement(WorksheetCard, {\n          worksheet: worksheet,\n          index: index,\n          key: worksheet.id,\n          onSetDropdown: _this.onSetDropdown,\n          onCloseDropdown: _this.onCloseDropdown,\n          dropdownIndex: _this.state.dropdownIndex,\n          dropdownIsOpen: _this.state.dropdownIsOpen,\n          handleWorksheetClick: _this.handleWorksheetClick,\n          selectedWorksheets: _this.state.selectedWorksheets\n        });\n      });\n    });\n\n    _this.state = {\n      sort: '',\n      unitFilter: '',\n      titleFilter: '',\n      typeFilters: [],\n      sourceFilters: [],\n      subjectFilters: [],\n      selectedWorksheets: [],\n      difficultyFilters: [],\n      worksheets: sampleWorksheets,\n      dropdownIndex: null,\n      dropdownIsOpen: false,\n      assignSelectedDropdownOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(AssignWorksheetModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var open = this.props.open;\n      var _this$state6 = this.state,\n          assignSelectedDropdownOpen = _this$state6.assignSelectedDropdownOpen,\n          typeFilters = _this$state6.typeFilters,\n          sourceFilters = _this$state6.sourceFilters,\n          subjectFilters = _this$state6.subjectFilters,\n          difficultyFilters = _this$state6.difficultyFilters,\n          sort = _this$state6.sort;\n      return React.createElement(Portal, {\n        selector: \"#modal\"\n      }, open && React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"wrapper\"\n      }, React.createElement(\"div\", {\n        id: \"modal_assign_worksheet\",\n        style: {\n          zIndex: '1003'\n        },\n        className: \"jsx-2666520574\" + \" \" + \"modal-page modal modal-custom\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"card-modal card-main card switcher-section grey lighten-3\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"header-row card-panel light-blue lighten-1 white-text\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"card-panel-row row\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"col s11\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"d-flex\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"icon-col\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-2666520574\" + \" \" + \"icon-sheets-w\"\n      })), React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"card-panel-text\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"text-large\"\n      }, \"Assign Worksheets\")))), React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"col s1 right-align\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"row icons-row\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.onCloseModal,\n        className: \"jsx-2666520574\" + \" \" + \"modal-close close\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-2666520574\" + \" \" + \"icon-close-thin\"\n      })))))), React.createElement(FilterSection, {\n        sort: sort,\n        typeFilters: typeFilters,\n        sourceFilters: sourceFilters,\n        subjectFilters: subjectFilters,\n        difficultyFilters: difficultyFilters,\n        onSetSort: this.onSetSort,\n        onClearFilters: this.onResetModal,\n        handleFilterClick: this.handleFilterClick,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState\n      }), React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"card-content\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"card-body\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"result-row center-align\"\n      }, React.createElement(\"b\", {\n        className: \"jsx-2666520574\" + \" \" + \"result\"\n      }, \" - \", this.getMappableWorksheets().length, \" results -\")), React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"checkboxes-section row d-flex-content card-width-322\"\n      }, this.mapWorksheets())))), React.createElement(\"div\", {\n        className: \"jsx-2666520574\" + \" \" + \"add-btn-block\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        \"data-target\": \"dropdown_assign_selected\",\n        onClick: this.onToggleAssignSelectedDropdown,\n        className: \"jsx-2666520574\" + \" \" + \"dropdown-trigger waves-effect waves-teal btn add-btn\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-2666520574\" + \" \" + \"material-icons\"\n      }, \"add\"), \" Assign Selected\"), React.createElement(\"ul\", {\n        id: \"dropdown_assign_selected\",\n        style: {\n          display: assignSelectedDropdownOpen ? 'block' : '0',\n          opacity: assignSelectedDropdownOpen ? '1' : '0'\n        },\n        className: \"jsx-2666520574\" + \" \" + 'dropdown-content'\n      }, React.createElement(\"li\", {\n        className: \"jsx-2666520574\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.assignWorksheets('today');\n        },\n        className: \"jsx-2666520574\"\n      }, \"For Today\")), React.createElement(\"li\", {\n        className: \"jsx-2666520574\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.assignWorksheets('tomorrow');\n        },\n        className: \"jsx-2666520574\"\n      }, \"For Tomorrow\")), React.createElement(\"li\", {\n        className: \"jsx-2666520574\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.assignWorksheets('nextSession');\n        },\n        className: \"jsx-2666520574\"\n      }, \"For Next Session\")), React.createElement(\"li\", {\n        className: \"jsx-2666520574\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.assignWorksheets('customDate');\n        },\n        className: \"jsx-2666520574\"\n      }, \"For Date...\")))))), React.createElement(_JSXStyle, {\n        id: \"2666520574\"\n      }, [\".card-modal.jsx-2666520574{margin:0;border-radius:6px;}\", \".wrapper.jsx-2666520574{min-height:0px;}\", \".modal-custom.jsx-2666520574{opacity:1;visibility:visible;}\", \".modal-footer.jsx-2666520574{background-color:white;}\"]));\n    }\n  }]);\n\n  return AssignWorksheetModal;\n}(React.Component);\n\nexport default AssignWorksheetModal;","map":null,"metadata":{},"sourceType":"module"}