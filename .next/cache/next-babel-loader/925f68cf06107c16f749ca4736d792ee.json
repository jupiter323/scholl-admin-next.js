{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"../../../../Portal\";\nimport update from 'immutability-helper';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\nclass ClassDetailModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentWillReceiveProps\", nextProps => {\n      if (!this.state.originalClassRoom || nextProps.classroom.id !== this.state.originalClassRoom.id) {\n        const {\n          classroom: {\n            id,\n            basicInfo,\n            accountInfo,\n            contactInfo,\n            locations,\n            summary\n          } = {}\n        } = nextProps;\n        const updatedClassRoom = {\n          id,\n          basicInfo,\n          accountInfo,\n          contactInfo,\n          locations,\n          summary\n        };\n        const {\n          originalClassRoom: originalClassRoomState\n        } = this.state;\n        const originalClassRoom = update(originalClassRoomState, {\n          $merge: nextProps.classroom\n        });\n        this.setState({\n          originalClassRoom,\n          updatedClassRoom\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleDetailsChange\", (event, name, section) => {\n      const value = event.target ? event.target.value : event;\n      const updatedClassRoom = update(this.state.updatedClassRoom, {\n        [section]: {\n          $merge: {\n            [name]: value\n          }\n        }\n      });\n      this.setState({\n        updatedClassRoom\n      });\n    });\n\n    _defineProperty(this, \"initialClassRoomMount\", () => this.state.originalClassRoom.id !== this.props.classroom.id);\n\n    _defineProperty(this, \"renderModalHeader\", () => {\n      const {\n        classroom: {\n          accountInfo: {\n            lastName: initialLastName,\n            firstName: initialFIrstName,\n            email: initialEmail\n          }\n        }\n      } = this.props;\n      const {\n        updatedClassRoom: {\n          accountInfo: {\n            lastName: updatedLastName,\n            firstName: updatedFirstName,\n            email: updatedEmail\n          }\n        }\n      } = this.state;\n      let lastName;\n      let firstName;\n      let email;\n\n      if (this.initialClassRoomMount()) {\n        lastName = initialLastName;\n        firstName = initialFIrstName;\n        email = initialEmail;\n      } else {\n        lastName = updatedLastName;\n        firstName = updatedFirstName;\n        email = updatedEmail;\n      }\n\n      return __jsx(React.Fragment, null, __jsx(\"h4\", {\n        className: \"h3\"\n      }, lastName, \", \", firstName), __jsx(\"a\", {\n        href: `mailto:${email}`\n      }, email));\n    });\n\n    _defineProperty(this, \"onSetValidation\", (validation, cb) => this.setState({\n      validation\n    }, cb));\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      const {\n        updatedClassRoom: {\n          id,\n          basicInfo,\n          accountInfo,\n          contactInfo,\n          locations,\n          summary\n        }\n      } = this.state;\n      const {\n        onSaveLocationError,\n        onSaveClassChanges,\n        onClose\n      } = this.props; // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n      // const valid = true;\n\n      const valid = await nestedEditFieldValidation(this.state, this.state.updatedClassRoom, this.onSetValidation, validation => console.warn('validation', validation));\n\n      if (!valid) {\n        // return onSaveLocationError();\n        console.warn('not valid');\n      }\n\n      const postBody = {\n        id,\n        basicInfo,\n        accountInfo,\n        contactInfo,\n        locations,\n        summary\n      };\n      onSaveClassChanges(postBody);\n      onClose();\n    });\n\n    _defineProperty(this, \"onCancelChanges\", () => {\n      const {\n        onClose\n      } = this.props;\n      const {\n        originalClassRoom\n      } = this.state;\n      this.setState({\n        updatedClassRoom: originalClassRoom\n      }, onClose());\n    });\n\n    this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalClassRoom: {\n        summary: {\n          amount_students: '',\n          start_date: '',\n          end_date: '',\n          improvement: 0,\n          coursework_assigned: 0,\n          coursework_completed: 0,\n          problems_flagged_review: 0,\n          average_score: 0,\n          achieved_target_score: 0,\n          average_practice_tests_completed: 0,\n          instruction: 0\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      updatedClassRoom: {\n        summary: {\n          amount_students: '',\n          start_date: '',\n          end_date: '',\n          improvement: 0,\n          coursework_assigned: 0,\n          coursework_completed: 0,\n          problems_flagged_review: 0,\n          average_score: 0,\n          achieved_target_score: 0,\n          average_practice_tests_completed: 0,\n          instruction: 0\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      classroom: {\n        id,\n        basicInfo,\n        accountInfo,\n        contactInfo,\n        locations,\n        summary\n      } = {}\n    } = this.props;\n    const updatedClassRoom = {\n      id,\n      basicInfo,\n      accountInfo,\n      contactInfo,\n      locations,\n      summary\n    };\n    const {\n      originalClassRoom: originalClassRoomState\n    } = this.state;\n    const originalClassRoom = update(originalClassRoomState, {\n      $merge: updatedClassRoom\n    });\n    this.setState({\n      originalClassRoom,\n      updatedClassRoom\n    }); // eslint-disable-line\n  } // This resets the component state to reflect the details of the next classroom the user clicks on\n\n\n  render() {\n    const {\n      open,\n      onOpenDeleteModal,\n      onDeleteClass,\n      deleteModalOpen,\n      index\n    } = this.props;\n    const {\n      dropdownIsOpen,\n      dropdownIndex,\n      activeLocation,\n      deleteLocationModalOpen,\n      pendingLocationDelete,\n      newLocationModalOpen,\n      editLocationModalOpen,\n      updatedClassRoom: {\n        accountInfo: updatedAccountInfo,\n        contactInfo: updatedContactInfo,\n        locations: updatedLocations\n      }\n    } = this.state;\n    return __jsx(Portal, {\n      selector: \"#modal\"\n    }, open && __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"overlay\"\n    }, __jsx(ClickOffComponentWrapper, {\n      onOuterClick: this.onCancelChanges,\n      nestedModals: deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen\n    }, __jsx(\"div\", {\n      id: \"modal_user_edit\",\n      className: \"jsx-2557376288\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-modal card-main card grey lighten-3\"\n    }, __jsx(\"div\", {\n      style: {\n        backgroundColor: \"#31837a\",\n        color: \"#fff\"\n      },\n      className: \"jsx-2557376288\" + \" \" + \"owner-box card-panel card-panel-title\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-panel-row row\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"col s9\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"user-block\"\n    }, __jsx(\"div\", {\n      style: {\n        backgroundColor: \"#0085ce\",\n        color: \"#fff\"\n      },\n      className: \"jsx-2557376288\" + \" \" + \"user-circle\"\n    }, __jsx(\"img\", {\n      src: \"./static/images/img-owner01.jpg\",\n      alt: \"\",\n      className: \"jsx-2557376288\"\n    })), __jsx(\"div\", {\n      style: {\n        color: \"#fff\"\n      },\n      className: \"jsx-2557376288\" + \" \" + \"user-text\"\n    }, this.renderModalHeader()))), __jsx(\"div\", {\n      style: {\n        textAlign: \"right\"\n      },\n      className: \"jsx-2557376288\" + \" \" + \"col\"\n    }, __jsx(\"span\", {\n      className: \"jsx-2557376288\" + \" \" + \"block-icon\"\n    }, __jsx(\"i\", {\n      className: \"jsx-2557376288\" + \" \" + \"icon-owner\"\n    }), __jsx(\"span\", {\n      className: \"jsx-2557376288\" + \" \" + \"text-icon\"\n    }, \"Owner\"))))), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-content\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-body\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"row mb-0\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"col s12 l6\"\n    }, __jsx(AccountInfo, {\n      state: this.initialClassRoomMount() ? accountInfo : updatedAccountInfo,\n      handleDetailsChange: this.handleDetailsChange\n    }), __jsx(ContactInfo, {\n      state: this.initialClassRoomMount() ? contactInfo : updatedContactInfo,\n      handleDetailsChange: this.handleDetailsChange\n    })), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"col s12 l6\"\n    }, __jsx(Locations, {\n      state: this.initialClassRoomMount() ? locations : updatedLocations,\n      handleDetailsChange: this.handleDetailsChange,\n      dropdownIsOpen: dropdownIsOpen,\n      dropdownIndex: dropdownIndex,\n      activeLocation: activeLocation,\n      deleteLocationModalOpen: deleteLocationModalOpen,\n      pendingLocationDelete: pendingLocationDelete,\n      newLocationModalOpen: newLocationModalOpen,\n      editLocationModalOpen: editLocationModalOpen,\n      onSetDropdown: this.onSetDropdown,\n      onCloseDropdown: this.onCloseDropdown,\n      onOpenNewLocationModal: this.onOpenNewLocationModal,\n      onOpenEditLocationModal: this.onOpenEditLocationModal,\n      onCloseNewLocationModal: this.onCloseNewLocationModal,\n      onCloseEditLocationModal: this.onCloseEditLocationModal,\n      onOpenDeleteLocationModal: this.onOpenDeleteLocationModal,\n      onCloseDeleteLocationModal: this.onCloseDeleteLocationModal\n    })))), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"modal-footer\"\n    }, __jsx(\"a\", {\n      href: \"#\",\n      onClick: () => onDeleteClass(index),\n      className: \"jsx-2557376288\" + \" \" + \"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n    }, \"Delete\"), __jsx(\"a\", {\n      href: \"#\",\n      onClick: this.onCancelChanges,\n      className: \"jsx-2557376288\" + \" \" + \"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n    }, \"Cancel\"), __jsx(\"a\", {\n      href: \"#\",\n      onClick: this.onSubmit,\n      className: \"jsx-2557376288\" + \" \" + \"btn\"\n    }, \"Save\"))))))), __jsx(_JSXStyle, {\n      id: \"2557376288\"\n    }, \".overlay.jsx-2557376288{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:1999;}.card-modal.jsx-2557376288{margin:0;border-radius:6px;}.modal.jsx-2557376288{display:block;background-color:white;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}.modal-custom.jsx-2557376288{opacity:1;visibility:visible;}.modal-footer.jsx-2557376288{background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL0NsYXNzZXMvTGlzdFBhZ2UvY29tcG9uZW50cy9DbGFzc0RldGFpbE1vZGFsL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlTVyxBQUdnQyxBQVNOLEFBSUssQUFTSixBQUlhLFNBaEJMLENBYUMsSUFUSSxDQWJhLFFBMEJ0QyxJQWhCQSxFQWFBLFFBVG9CLFdBYlosTUFDRSxDQWFBLE9BWkMsQ0FhQyxRQVpILEVBYUUsS0FaSSxJQWEyRyxTQVoxSCxvR0FhQSIsImZpbGUiOiIvVm9sdW1lcy9IREQvU2l0ZXMvY2xlYXJjaG9pY2V0ZXN0cHJlcC9jbGVhci1jaG9pY2UtYWRtaW4vY29tcG9uZW50cy9DbGFzc2VzL0xpc3RQYWdlL2NvbXBvbmVudHMvQ2xhc3NEZXRhaWxNb2RhbC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSBcInByb3AtdHlwZXNcIjtcbmltcG9ydCBQb3J0YWwgZnJvbSBcIi4uLy4uLy4uLy4uL1BvcnRhbFwiO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICdpbW11dGFiaWxpdHktaGVscGVyJztcbmltcG9ydCBDbGlja09mZkNvbXBvbmVudFdyYXBwZXIgZnJvbSAnLi4vLi4vLi4vLi4vQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyJztcblxuaW1wb3J0IEFjY291bnRJbmZvIGZyb20gJy4uL1NoYXJlZE1vZGFsQ29tcG9uZW50cy9BY2NvdW50SW5mbyc7XG5pbXBvcnQgQ29udGFjdEluZm8gZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0NvbnRhY3RJbmZvJztcbmltcG9ydCBMb2NhdGlvbnMgZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0xvY2F0aW9ucyc7XG5cbmltcG9ydCB7IG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9maWVsZFZhbGlkYXRpb24nO1xuXG5cblxuY2xhc3MgQ2xhc3NEZXRhaWxNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsXG4gICAgICBuZXdMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsXG4gICAgICBlZGl0TG9jYXRpb25Nb2RhbE9wZW46IGZhbHNlLFxuICAgICAgcGVuZGluZ0xvY2F0aW9uRGVsZXRlOiB7fSxcbiAgICAgIGFjdGl2ZUxvY2F0aW9uOiB7fSxcbiAgICAgIGRyb3Bkb3duSXNPcGVuOiBmYWxzZSxcbiAgICAgIGRyb3Bkb3duSW5kZXg6IG51bGwsXG4gICAgICBvcmlnaW5hbENsYXNzUm9vbToge1xuICAgICAgICBzdW1tYXJ5OntcbiAgICAgICAgICBhbW91bnRfc3R1ZGVudHM6JycsXG4gICAgICAgICAgc3RhcnRfZGF0ZTonJyxcbiAgICAgICAgICBlbmRfZGF0ZTonJyxcbiAgICAgICAgICBpbXByb3ZlbWVudDowLFxuICAgICAgICAgIGNvdXJzZXdvcmtfYXNzaWduZWQ6MCxcbiAgICAgICAgICBjb3Vyc2V3b3JrX2NvbXBsZXRlZDowLFxuICAgICAgICAgIHByb2JsZW1zX2ZsYWdnZWRfcmV2aWV3OjAsXG4gICAgICAgICAgYXZlcmFnZV9zY29yZTowLFxuICAgICAgICAgIGFjaGlldmVkX3RhcmdldF9zY29yZTowLFxuICAgICAgICAgIGF2ZXJhZ2VfcHJhY3RpY2VfdGVzdHNfY29tcGxldGVkOjAsXG4gICAgICAgICAgaW5zdHJ1Y3Rpb246MCxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjb3VudEluZm86IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICBlbWFpbDogJycsXG4gICAgICAgICAgZ2VuZGVyOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFjdEluZm86IHtcbiAgICAgICAgICBwaG9uZTogJycsXG4gICAgICAgICAgc3RyZWV0QWRkcmVzczogJycsXG4gICAgICAgICAgY2l0eTogJycsXG4gICAgICAgICAgc3RhdGU6ICcnLFxuICAgICAgICAgIHppcDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIGxvY2F0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgdXBkYXRlZENsYXNzUm9vbToge1xuICAgICAgICBzdW1tYXJ5OntcbiAgICAgICAgICBhbW91bnRfc3R1ZGVudHM6JycsXG4gICAgICAgICAgc3RhcnRfZGF0ZTonJyxcbiAgICAgICAgICBlbmRfZGF0ZTonJyxcbiAgICAgICAgICBpbXByb3ZlbWVudDowLFxuICAgICAgICAgIGNvdXJzZXdvcmtfYXNzaWduZWQ6MCxcbiAgICAgICAgICBjb3Vyc2V3b3JrX2NvbXBsZXRlZDowLFxuICAgICAgICAgIHByb2JsZW1zX2ZsYWdnZWRfcmV2aWV3OjAsXG4gICAgICAgICAgYXZlcmFnZV9zY29yZTowLFxuICAgICAgICAgIGFjaGlldmVkX3RhcmdldF9zY29yZTowLFxuICAgICAgICAgIGF2ZXJhZ2VfcHJhY3RpY2VfdGVzdHNfY29tcGxldGVkOjAsXG4gICAgICAgICAgaW5zdHJ1Y3Rpb246MCxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjb3VudEluZm86IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICBlbWFpbDogJycsXG4gICAgICAgICAgZ2VuZGVyOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29udGFjdEluZm86IHtcbiAgICAgICAgICBwaG9uZTogJycsXG4gICAgICAgICAgc3RyZWV0QWRkcmVzczogJycsXG4gICAgICAgICAgY2l0eTogJycsXG4gICAgICAgICAgc3RhdGU6ICcnLFxuICAgICAgICAgIHppcDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIGxvY2F0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICBhY2NvdW50SW5mbzoge1xuICAgICAgICAgIGZpcnN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICBnZW5kZXI6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgY2xhc3Nyb29tOiB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfSA9IHt9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHVwZGF0ZWRDbGFzc1Jvb20gPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfTtcbiAgICBjb25zdCB7IG9yaWdpbmFsQ2xhc3NSb29tOiBvcmlnaW5hbENsYXNzUm9vbVN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IG9yaWdpbmFsQ2xhc3NSb29tID0gdXBkYXRlKG9yaWdpbmFsQ2xhc3NSb29tU3RhdGUsIHskbWVyZ2U6IHVwZGF0ZWRDbGFzc1Jvb219KTtcbiAgICB0aGlzLnNldFN0YXRlKHsgb3JpZ2luYWxDbGFzc1Jvb20sIHVwZGF0ZWRDbGFzc1Jvb20gfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgfVxuXG4gIC8vIFRoaXMgcmVzZXRzIHRoZSBjb21wb25lbnQgc3RhdGUgdG8gcmVmbGVjdCB0aGUgZGV0YWlscyBvZiB0aGUgbmV4dCBjbGFzc3Jvb20gdGhlIHVzZXIgY2xpY2tzIG9uXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSAobmV4dFByb3BzKSA9PiB7XG4gICAgaWYgKCghdGhpcy5zdGF0ZS5vcmlnaW5hbENsYXNzUm9vbSB8fCBuZXh0UHJvcHMuY2xhc3Nyb29tLmlkICE9PSB0aGlzLnN0YXRlLm9yaWdpbmFsQ2xhc3NSb29tLmlkKSkge1xuICAgICAgY29uc3QgeyBjbGFzc3Jvb206IHsgaWQsIGJhc2ljSW5mbywgYWNjb3VudEluZm8sIGNvbnRhY3RJbmZvLCBsb2NhdGlvbnMsc3VtbWFyeSB9ID0ge30gfSA9IG5leHRQcm9wcztcbiAgICAgIGNvbnN0IHVwZGF0ZWRDbGFzc1Jvb20gPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfTtcbiAgICAgIGNvbnN0IHsgb3JpZ2luYWxDbGFzc1Jvb206IG9yaWdpbmFsQ2xhc3NSb29tU3RhdGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCBvcmlnaW5hbENsYXNzUm9vbSA9IHVwZGF0ZShvcmlnaW5hbENsYXNzUm9vbVN0YXRlLCB7XG4gICAgICAgICRtZXJnZTogbmV4dFByb3BzLmNsYXNzcm9vbSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9yaWdpbmFsQ2xhc3NSb29tLCB1cGRhdGVkQ2xhc3NSb29tIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFdlIHB1bGwgdGhlIHZhbHVlIGJhc2VkIG9uIHRoZSBmaWVsZCB0eXBlIHRoZW4gbWVyZ2UgdGhhdCB1cGRhdGVkIGtleS92YWx1ZSBwYWlyIHdpdGggdGhlIGxhc3QgdmVyc2lvbiBvZiBjb21wb25lbnQgc3RhdGVcbiAgaGFuZGxlRGV0YWlsc0NoYW5nZSA9IChldmVudCwgbmFtZSwgc2VjdGlvbikgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBldmVudC50YXJnZXQgPyBldmVudC50YXJnZXQudmFsdWUgOiBldmVudDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRDbGFzc1Jvb20gPSB1cGRhdGUodGhpcy5zdGF0ZS51cGRhdGVkQ2xhc3NSb29tLCB7XG4gICAgICAgIFtzZWN0aW9uXTogeyAkbWVyZ2U6IHsgW25hbWVdOiB2YWx1ZSB9IH0sXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3VwZGF0ZWRDbGFzc1Jvb219KTtcbiAgfVxuXG4gIGluaXRpYWxDbGFzc1Jvb21Nb3VudCA9ICgpID0+IHRoaXMuc3RhdGUub3JpZ2luYWxDbGFzc1Jvb20uaWQgIT09IHRoaXMucHJvcHMuY2xhc3Nyb29tLmlkO1xuXG4gIHJlbmRlck1vZGFsSGVhZGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3Nyb29tOiB7IGFjY291bnRJbmZvOiB7IGxhc3ROYW1lOiBpbml0aWFsTGFzdE5hbWUsIGZpcnN0TmFtZTogaW5pdGlhbEZJcnN0TmFtZSwgZW1haWw6IGluaXRpYWxFbWFpbCB9IH0gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB1cGRhdGVkQ2xhc3NSb29tOiB7IGFjY291bnRJbmZvOiB7IGxhc3ROYW1lOiB1cGRhdGVkTGFzdE5hbWUsIGZpcnN0TmFtZTogdXBkYXRlZEZpcnN0TmFtZSwgZW1haWw6IHVwZGF0ZWRFbWFpbCB9IH0gfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IGxhc3ROYW1lO1xuICAgIGxldCBmaXJzdE5hbWU7XG4gICAgbGV0IGVtYWlsO1xuICAgIGlmICh0aGlzLmluaXRpYWxDbGFzc1Jvb21Nb3VudCgpKSB7XG4gICAgICBsYXN0TmFtZSA9IGluaXRpYWxMYXN0TmFtZTtcbiAgICAgIGZpcnN0TmFtZSA9IGluaXRpYWxGSXJzdE5hbWU7XG4gICAgICBlbWFpbCA9IGluaXRpYWxFbWFpbDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdE5hbWUgPSB1cGRhdGVkTGFzdE5hbWU7XG4gICAgICBmaXJzdE5hbWUgPSB1cGRhdGVkRmlyc3ROYW1lO1xuICAgICAgZW1haWwgPSB1cGRhdGVkRW1haWw7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgIDxoNCBjbGFzc05hbWU9XCJoM1wiPntsYXN0TmFtZX0sIHtmaXJzdE5hbWV9PC9oND5cbiAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke2VtYWlsfWB9PntlbWFpbH08L2E+XG4gICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICk7XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbnRvIG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24sIGl0IHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24gY2hlY2sgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgLy8gVGhlIHVwZGF0ZWQgY29tcG9uZW50IHZhbGlkYXRpb24gc3RhdGUgaXMgc2V0IGFuZCB0aGVuIHRoZSBjYWxsYmFjayBpcyBkaXNwYXRjaGVkIC0gaW4gdGhpcyBjYXNlLCB0aGUgY2FsbGJhY2sgaGFuZGxlcyB0aGUgdG9hc3Qgd2FybmluZyBhdCB0aGUgY29udGFpbmVyIGxldmVsXG4gIG9uU2V0VmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uLCBjYikgPT4gdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRpb24gfSwgY2IpO1xuXG4gIC8vIElmIGFsbCB0aGUgZmllbGRzIGFyZSB2YWxpZCwgd2UgY29uc3RydWN0IGEgcG9zdCBib2R5IGFuZCBjYWxsIG9uU2F2ZU5ld0xvY2F0aW9uIHBhc3NlZCBkb3duIGZyb20gdGhlIGNvbnRhaW5lciBsZXZlbFxuICBvblN1Ym1pdCA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgeyB1cGRhdGVkQ2xhc3NSb29tOiB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zLHN1bW1hcnkgfSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IG9uU2F2ZUxvY2F0aW9uRXJyb3IsIG9uU2F2ZUNsYXNzQ2hhbmdlcywgb25DbG9zZSB9ID0gdGhpcy5wcm9wcztcbiAgICAvLyBOT1RFOiBTd2FwIG91dCB3aGF0IGluc3RhbmNlIG9mIHZhbGlkIGlzIGFjdGl2ZSBpZiB5b3Ugd2FudCB0byB0ZXN0IHNhdmluZyBhIG5ldyBsb2NhdGlvbiB3aXRob3V0IHdvcnJ5aW5nIGFib3V0IHZhbGlkYXRpb25cbiAgICAvLyBjb25zdCB2YWxpZCA9IHRydWU7XG4gICAgY29uc3QgdmFsaWQgPSBhd2FpdCBuZXN0ZWRFZGl0RmllbGRWYWxpZGF0aW9uKHRoaXMuc3RhdGUsIHRoaXMuc3RhdGUudXBkYXRlZENsYXNzUm9vbSwgdGhpcy5vblNldFZhbGlkYXRpb24sICh2YWxpZGF0aW9uKSA9PiBjb25zb2xlLndhcm4oJ3ZhbGlkYXRpb24nLCB2YWxpZGF0aW9uKSk7XG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgLy8gcmV0dXJuIG9uU2F2ZUxvY2F0aW9uRXJyb3IoKTtcbiAgICAgIGNvbnNvbGUud2Fybignbm90IHZhbGlkJyk7XG4gICAgfVxuICAgIGNvbnN0IHBvc3RCb2R5ID0geyBpZCwgYmFzaWNJbmZvLCBhY2NvdW50SW5mbywgY29udGFjdEluZm8sIGxvY2F0aW9ucyxzdW1tYXJ5IH07XG4gICAgb25TYXZlQ2xhc3NDaGFuZ2VzKHBvc3RCb2R5KTtcbiAgICBvbkNsb3NlKCk7XG4gIH1cblxuICBvbkNhbmNlbENoYW5nZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBvbkNsb3NlIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgb3JpZ2luYWxDbGFzc1Jvb20gfSA9IHRoaXMuc3RhdGU7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZWRDbGFzc1Jvb206IG9yaWdpbmFsQ2xhc3NSb29tIH0sIG9uQ2xvc2UoKSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBvcGVuLG9uT3BlbkRlbGV0ZU1vZGFsLG9uRGVsZXRlQ2xhc3MsIGRlbGV0ZU1vZGFsT3BlbixpbmRleCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGRyb3Bkb3duSXNPcGVuLCBkcm9wZG93bkluZGV4LCBhY3RpdmVMb2NhdGlvbiwgZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW4sIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZSwgbmV3TG9jYXRpb25Nb2RhbE9wZW4sIGVkaXRMb2NhdGlvbk1vZGFsT3BlbixcbiAgICAgIHVwZGF0ZWRDbGFzc1Jvb206IHthY2NvdW50SW5mbzogdXBkYXRlZEFjY291bnRJbmZvLCBjb250YWN0SW5mbzogdXBkYXRlZENvbnRhY3RJbmZvLCBsb2NhdGlvbnM6IHVwZGF0ZWRMb2NhdGlvbnN9LFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8UG9ydGFsIHNlbGVjdG9yPVwiI21vZGFsXCI+XG4gICAgICAgIHtvcGVuICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJsYXlcIj5cbiAgICAgICAgICAgIDxDbGlja09mZkNvbXBvbmVudFdyYXBwZXJcbiAgICAgICAgICAgICAgb25PdXRlckNsaWNrPXt0aGlzLm9uQ2FuY2VsQ2hhbmdlc31cbiAgICAgICAgICAgICAgbmVzdGVkTW9kYWxzPXsgZGVsZXRlTW9kYWxPcGVuIHx8IGRlbGV0ZUxvY2F0aW9uTW9kYWxPcGVuIHx8IGVkaXRMb2NhdGlvbk1vZGFsT3BlbiB8fCBuZXdMb2NhdGlvbk1vZGFsT3BlbiB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBpZD1cIm1vZGFsX3VzZXJfZWRpdFwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibW9kYWwgbW9kYWwtY3VzdG9tIG1vZGFsLWN1c3RvbS1sYXJnZSBtb2RhbC1ncmF5XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tb2RhbCBjYXJkLW1haW4gY2FyZCBncmV5IGxpZ2h0ZW4tM1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvd25lci1ib3ggY2FyZC1wYW5lbCBjYXJkLXBhbmVsLXRpdGxlXCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcIiMzMTgzN2FcIiwgY29sb3I6IFwiI2ZmZlwiIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wYW5lbC1yb3cgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wgczlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidXNlci1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwODVjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4vc3RhdGljL2ltYWdlcy9pbWctb3duZXIwMS5qcGdcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXRleHRcIiBzdHlsZT17eyBjb2xvcjogXCIjZmZmXCIgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTW9kYWxIZWFkZXIoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbFwiIHN0eWxlPXt7IHRleHRBbGlnbjogXCJyaWdodFwiIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmxvY2staWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJpY29uLW93bmVyXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWljb25cIj5Pd25lcjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wgczEyIGw2XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPXsgdGhpcy5pbml0aWFsQ2xhc3NSb29tTW91bnQoKT8gYWNjb3VudEluZm86IHVwZGF0ZWRBY2NvdW50SW5mbyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxDbGFzc1Jvb21Nb3VudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1cGRhdGVkQ29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzMTIgbDZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPExvY2F0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPXsgdGhpcy5pbml0aWFsQ2xhc3NSb29tTW91bnQoKT8gbG9jYXRpb25zIDogdXBkYXRlZExvY2F0aW9ucyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duSXNPcGVuPXtkcm9wZG93bklzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkluZGV4PXtkcm9wZG93bkluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUxvY2F0aW9uPXthY3RpdmVMb2NhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVMb2NhdGlvbk1vZGFsT3Blbj17ZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uRGVsZXRlPXtwZW5kaW5nTG9jYXRpb25EZWxldGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TG9jYXRpb25Nb2RhbE9wZW49e25ld0xvY2F0aW9uTW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRMb2NhdGlvbk1vZGFsT3Blbj17ZWRpdExvY2F0aW9uTW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2V0RHJvcGRvd249e3RoaXMub25TZXREcm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlRHJvcGRvd249e3RoaXMub25DbG9zZURyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3Blbk5ld0xvY2F0aW9uTW9kYWw9e3RoaXMub25PcGVuTmV3TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5FZGl0TG9jYXRpb25Nb2RhbD17IHRoaXMub25PcGVuRWRpdExvY2F0aW9uTW9kYWwgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2VOZXdMb2NhdGlvbk1vZGFsPXsgdGhpcy5vbkNsb3NlTmV3TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlRWRpdExvY2F0aW9uTW9kYWw9eyB0aGlzLm9uQ2xvc2VFZGl0TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5EZWxldGVMb2NhdGlvbk1vZGFsPXsgdGhpcy5vbk9wZW5EZWxldGVMb2NhdGlvbk1vZGFsIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlRGVsZXRlTG9jYXRpb25Nb2RhbD17IHRoaXMub25DbG9zZURlbGV0ZUxvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uRGVsZXRlQ2xhc3MoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2F2ZXMtZWZmZWN0IHdhdmVzLXRlYWwgYnRuLWZsYXQgcGluay10ZXh0IHRleHQtZGFya2VuLTFcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIERlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbENoYW5nZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtb2RhbC1jbG9zZSB3YXZlcy1lZmZlY3Qgd2F2ZXMtdGVhbCBidG4tZmxhdCBncmV5LXRleHQgdGV4dC1kYXJrZW4tMVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17dGhpcy5vblN1Ym1pdH0gY2xhc3NOYW1lPVwiYnRuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIC5vdmVybGF5IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxOTk5O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5jYXJkLW1vZGFsIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5tb2RhbCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMTAlO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAxMCU7XG4gICAgICAgICAgICAgICAgbGVmdDogMTAlO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMjRweCAzOHB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDlweCA0NnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDExcHggMTVweCAtN3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAubW9kYWwtY3VzdG9tIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLm1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L1BvcnRhbD5cbiAgICApO1xuICB9XG59XG5cbkNsYXNzRGV0YWlsTW9kYWwucHJvcFR5cGVzID0ge1xuICBpbmRleDpQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIG9wZW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIGRlbGV0ZU1vZGFsT3BlbjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgb25DbG9zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25PcGVuRGVsZXRlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIGNsYXNzcm9vbTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBvblNhdmVDbGFzc0NoYW5nZXM6UHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENsYXNzRGV0YWlsTW9kYWw7XG4iXX0= */\\n/*@ sourceURL=/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Classes/ListPage/components/ClassDetailModal/index.js */\"));\n  }\n\n}\n\nClassDetailModal.propTypes = {\n  index: PropTypes.number.isRequired,\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  classroom: PropTypes.object.isRequired,\n  onSaveClassChanges: PropTypes.func.isRequired\n};\nexport default ClassDetailModal;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Classes/ListPage/components/ClassDetailModal/index.js"],"names":["React","PropTypes","Portal","update","ClickOffComponentWrapper","AccountInfo","ContactInfo","Locations","nestedEditFieldValidation","ClassDetailModal","Component","constructor","props","nextProps","state","originalClassRoom","classroom","id","basicInfo","accountInfo","contactInfo","locations","summary","updatedClassRoom","originalClassRoomState","$merge","setState","event","name","section","value","target","lastName","initialLastName","firstName","initialFIrstName","email","initialEmail","updatedLastName","updatedFirstName","updatedEmail","initialClassRoomMount","validation","cb","preventDefault","onSaveLocationError","onSaveClassChanges","onClose","valid","onSetValidation","console","warn","postBody","deleteLocationModalOpen","newLocationModalOpen","editLocationModalOpen","pendingLocationDelete","activeLocation","dropdownIsOpen","dropdownIndex","amount_students","start_date","end_date","improvement","coursework_assigned","coursework_completed","problems_flagged_review","average_score","achieved_target_score","average_practice_tests_completed","instruction","gender","phone","streetAddress","city","zip","componentDidMount","render","open","onOpenDeleteModal","onDeleteClass","deleteModalOpen","index","updatedAccountInfo","updatedContactInfo","updatedLocations","onCancelChanges","backgroundColor","color","renderModalHeader","textAlign","handleDetailsChange","onSetDropdown","onCloseDropdown","onOpenNewLocationModal","onOpenEditLocationModal","onCloseNewLocationModal","onCloseEditLocationModal","onOpenDeleteLocationModal","onCloseDeleteLocationModal","onSubmit","propTypes","number","isRequired","bool","func","object"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"../../../../Portal\";\nimport update from 'immutability-helper';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\n\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\n\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\n\n\nclass ClassDetailModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalClassRoom: {\n        summary:{\n          amount_students:'',\n          start_date:'',\n          end_date:'',\n          improvement:0,\n          coursework_assigned:0,\n          coursework_completed:0,\n          problems_flagged_review:0,\n          average_score:0,\n          achieved_target_score:0,\n          average_practice_tests_completed:0,\n          instruction:0,\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      updatedClassRoom: {\n        summary:{\n          amount_students:'',\n          start_date:'',\n          end_date:'',\n          improvement:0,\n          coursework_assigned:0,\n          coursework_completed:0,\n          problems_flagged_review:0,\n          average_score:0,\n          achieved_target_score:0,\n          average_practice_tests_completed:0,\n          instruction:0,\n        },\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true,\n        },\n      },\n    }\n  }\n\n  componentDidMount() {\n    const { classroom: { id, basicInfo, accountInfo, contactInfo, locations,summary } = {} } = this.props;\n    const updatedClassRoom = { id, basicInfo, accountInfo, contactInfo, locations,summary };\n    const { originalClassRoom: originalClassRoomState } = this.state;\n    const originalClassRoom = update(originalClassRoomState, {$merge: updatedClassRoom});\n    this.setState({ originalClassRoom, updatedClassRoom }); // eslint-disable-line\n  }\n\n  // This resets the component state to reflect the details of the next classroom the user clicks on\n  componentWillReceiveProps = (nextProps) => {\n    if ((!this.state.originalClassRoom || nextProps.classroom.id !== this.state.originalClassRoom.id)) {\n      const { classroom: { id, basicInfo, accountInfo, contactInfo, locations,summary } = {} } = nextProps;\n      const updatedClassRoom = { id, basicInfo, accountInfo, contactInfo, locations,summary };\n      const { originalClassRoom: originalClassRoomState } = this.state;\n      const originalClassRoom = update(originalClassRoomState, {\n        $merge: nextProps.classroom,\n      });\n      this.setState({ originalClassRoom, updatedClassRoom });\n    }\n  }\n\n  // We pull the value based on the field type then merge that updated key/value pair with the last version of component state\n  handleDetailsChange = (event, name, section) => {\n      const value = event.target ? event.target.value : event;\n      const updatedClassRoom = update(this.state.updatedClassRoom, {\n        [section]: { $merge: { [name]: value } },\n      });\n      this.setState({updatedClassRoom});\n  }\n\n  initialClassRoomMount = () => this.state.originalClassRoom.id !== this.props.classroom.id;\n\n  renderModalHeader = () => {\n    const { classroom: { accountInfo: { lastName: initialLastName, firstName: initialFIrstName, email: initialEmail } } } = this.props;\n    const { updatedClassRoom: { accountInfo: { lastName: updatedLastName, firstName: updatedFirstName, email: updatedEmail } } } = this.state;\n    let lastName;\n    let firstName;\n    let email;\n    if (this.initialClassRoomMount()) {\n      lastName = initialLastName;\n      firstName = initialFIrstName;\n      email = initialEmail;\n    } else {\n      lastName = updatedLastName;\n      firstName = updatedFirstName;\n      email = updatedEmail;\n    }\n    return (\n      <React.Fragment>\n        <h4 className=\"h3\">{lastName}, {firstName}</h4>\n        <a href={`mailto:${email}`}>{email}</a>\n      </React.Fragment>\n    );\n  }\n\n  // This function is passed into nestedEditFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n  onSetValidation = (validation, cb) => this.setState({ validation }, cb);\n\n  // If all the fields are valid, we construct a post body and call onSaveNewLocation passed down from the container level\n  onSubmit = async (event) => {\n    event.preventDefault();\n    const { updatedClassRoom: { id, basicInfo, accountInfo, contactInfo, locations,summary } } = this.state;\n    const { onSaveLocationError, onSaveClassChanges, onClose } = this.props;\n    // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n    // const valid = true;\n    const valid = await nestedEditFieldValidation(this.state, this.state.updatedClassRoom, this.onSetValidation, (validation) => console.warn('validation', validation));\n    if (!valid) {\n      // return onSaveLocationError();\n      console.warn('not valid');\n    }\n    const postBody = { id, basicInfo, accountInfo, contactInfo, locations,summary };\n    onSaveClassChanges(postBody);\n    onClose();\n  }\n\n  onCancelChanges = () => {\n    const { onClose } = this.props;\n    const { originalClassRoom } = this.state;\n    this.setState({ updatedClassRoom: originalClassRoom }, onClose());\n  }\n\n  render() {\n    const { open,onOpenDeleteModal,onDeleteClass, deleteModalOpen,index } = this.props;\n    const { dropdownIsOpen, dropdownIndex, activeLocation, deleteLocationModalOpen, pendingLocationDelete, newLocationModalOpen, editLocationModalOpen,\n      updatedClassRoom: {accountInfo: updatedAccountInfo, contactInfo: updatedContactInfo, locations: updatedLocations},\n    } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <div className=\"overlay\">\n            <ClickOffComponentWrapper\n              onOuterClick={this.onCancelChanges}\n              nestedModals={ deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen }\n            >\n              <div\n                id=\"modal_user_edit\"\n                className=\"modal modal-custom modal-custom-large modal-gray\"\n              >\n                <div className=\"card-modal card-main card grey lighten-3\">\n                  <div\n                    className=\"owner-box card-panel card-panel-title\"\n                    style={{ backgroundColor: \"#31837a\", color: \"#fff\" }}\n                  >\n                    <div className=\"card-panel-row row\">\n                      <div className=\"col s9\">\n                        <div className=\"user-block\">\n                          <div\n                            className=\"user-circle\"\n                            style={{\n                              backgroundColor: \"#0085ce\",\n                              color: \"#fff\",\n                            }}\n                          >\n                            <img src=\"./static/images/img-owner01.jpg\" alt=\"\" />\n                          </div>\n                          <div className=\"user-text\" style={{ color: \"#fff\" }}>\n                            {this.renderModalHeader()}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"col\" style={{ textAlign: \"right\" }}>\n                        <span className=\"block-icon\">\n                          <i className=\"icon-owner\"></i>\n                          <span className=\"text-icon\">Owner</span>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"card-content\">\n                    <div className=\"card-body\">\n                      <div className=\"row mb-0\">\n                        <div className=\"col s12 l6\">\n                          <AccountInfo\n                            state={ this.initialClassRoomMount()? accountInfo: updatedAccountInfo }\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                          <ContactInfo\n                            state={\n                              this.initialClassRoomMount()\n                                ? contactInfo\n                                : updatedContactInfo\n                            }\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                        </div>\n                        <div className=\"col s12 l6\">\n                          <Locations\n                            state={ this.initialClassRoomMount()? locations : updatedLocations }\n                            handleDetailsChange={this.handleDetailsChange}\n                            dropdownIsOpen={dropdownIsOpen}\n                            dropdownIndex={dropdownIndex}\n                            activeLocation={activeLocation}\n                            deleteLocationModalOpen={deleteLocationModalOpen}\n                            pendingLocationDelete={pendingLocationDelete}\n                            newLocationModalOpen={newLocationModalOpen}\n                            editLocationModalOpen={editLocationModalOpen}\n                            onSetDropdown={this.onSetDropdown}\n                            onCloseDropdown={this.onCloseDropdown}\n                            onOpenNewLocationModal={this.onOpenNewLocationModal}\n                            onOpenEditLocationModal={ this.onOpenEditLocationModal }\n                            onCloseNewLocationModal={ this.onCloseNewLocationModal}\n                            onCloseEditLocationModal={ this.onCloseEditLocationModal}\n                            onOpenDeleteLocationModal={ this.onOpenDeleteLocationModal }\n                            onCloseDeleteLocationModal={ this.onCloseDeleteLocationModal}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"modal-footer\">\n                      <a\n                        href=\"#\"\n                        onClick={() => onDeleteClass(index)}\n                        className=\"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n                      >\n                        Delete\n                      </a>\n                      <a\n                        href=\"#\"\n                        onClick={this.onCancelChanges}\n                        className=\"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n                      >\n                        Cancel\n                      </a>\n                      <a href=\"#\" onClick={this.onSubmit} className=\"btn\">\n                        Save\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ClickOffComponentWrapper>\n          </div>\n        )}\n        <style jsx>\n          {`\n              .overlay {\n                position: fixed;\n                background-color: rgba(0, 0, 0, 0.7);\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: 1999;\n              }\n              .card-modal {\n                margin: 0;\n                border-radius: 6px;\n              }\n              .modal {\n                display: block;\n                background-color: white;\n                position: absolute;\n                top: 10%;\n                right: 10%;\n                left: 10%;\n                box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2);\n              }\n              .modal-custom {\n                opacity: 1;\n                visibility: visible;\n              }\n              .modal-footer {\n                background-color: white;\n              }\n            `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nClassDetailModal.propTypes = {\n  index:PropTypes.number.isRequired,\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  classroom: PropTypes.object.isRequired,\n  onSaveClassChanges:PropTypes.func.isRequired,\n};\n\nexport default ClassDetailModal;\n"]},"metadata":{},"sourceType":"module"}