{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ClassCard from \"./components/ClassCard\";\nimport FilterSection from \"./components/FilterSection\";\nimport { firstNameAscending, firstNameDescending, lastNameAscending, lastNameDescending } from '../../utils/sortFunctions';\nimport ClassModal from \"../ClassModal\";\n\nvar ListPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ListPage, _React$Component);\n\n  function ListPage(props) {\n    var _this;\n\n    _classCallCheck(this, ListPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ListPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredLocationState\", function (filterLocation) {\n      return _this.setState({\n        classesAreFiltered: true,\n        filterLocation: filterLocation\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredLocationState\", function () {\n      return _this.setState({\n        filterLocation: \"\"\n      }, _this.checkForFilteredState);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetDropdown\", function (dropdownIndex) {\n      return _this.setState({\n        dropdownIsOpen: true,\n        dropdownIndex: dropdownIndex\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseDropdown\", function () {\n      return _this.setState({\n        dropdownIsOpen: false,\n        dropdownIndex: null\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloneClass\", function (index) {\n      var onCloneClass = _this.props.onCloneClass;\n\n      _this.onCloseDropdown();\n\n      onCloneClass(index);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeleteClass\", function (index) {\n      var onDeleteClass = _this.props.onDeleteClass;\n\n      _this.onCloseDropdown();\n\n      onDeleteClass(index);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkForFilteredState\", function () {\n      var _this$state = _this.state,\n          filterName = _this$state.filterName,\n          filterLocation = _this$state.filterLocation;\n\n      if (!filterName.length && !filterLocation.length) {\n        _this.setState({\n          classesAreFiltered: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenClassModal\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        classModalOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (filterName) {\n      return _this.setState({\n        classesAreFiltered: true,\n        filterName: filterName\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function () {\n      return _this.setState({\n        classesAreFiltered: false,\n        filterName: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByName\", function () {\n      var classes = _this.props.classes;\n      var filterName = _this.state.filterName;\n      return classes.reduce(function (finalArr, currentClass) {\n        var _currentClass$account = currentClass.accountInfo,\n            lastName = _currentClass$account.lastName,\n            firstName = _currentClass$account.firstName;\n        var classString = \"\".concat(firstName.toLowerCase()).concat(lastName.toLowerCase());\n\n        if (classString.indexOf(filterName) !== -1 && finalArr.indexOf(currentClass) === -1) {\n          finalArr.push(currentClass);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByLocation\", function () {\n      var preFilteredClasses = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var allClasses = _this.props.classes;\n      var filterLocation = _this.state.filterLocation;\n      var classes;\n\n      if (preFilteredClasses.length) {\n        classes = preFilteredClasses;\n      } else {\n        classes = allClasses;\n      }\n\n      return classes.reduce(function (finalArr, currentInstructor) {\n        var city = currentInstructor.contactInfo.city;\n\n        if (city === filterLocation && finalArr.indexOf(currentInstructor) === -1) {\n          finalArr.push(currentInstructor);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortClasses\", function (classes) {\n      var sort = _this.state.sort;\n\n      switch (sort) {\n        case 'firstNameAscending':\n          return classes.sort(firstNameAscending);\n\n        case 'firstNameDescending':\n          return classes.sort(firstNameDescending);\n\n        case 'lastNameAscending':\n          return classes.sort(lastNameAscending);\n\n        case 'lastNameDescending':\n          return classes.sort(lastNameDescending);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableClasses\", function () {\n      var _this$state2 = _this.state,\n          filterName = _this$state2.filterName,\n          filterLocation = _this$state2.filterLocation,\n          sort = _this$state2.sort;\n      var allClasses = _this.props.classes;\n      var classes;\n\n      if (filterName.length && !filterLocation.length) {\n        classes = _this.onFilterByName();\n      } else if (!filterName.length && filterLocation.length) {\n        classes = _this.onFilterByLocation();\n      } else if (filterName.length && filterLocation.length) {\n        var filteredByName = _this.onFilterByName();\n\n        classes = _this.onFilterByLocation(filteredByName);\n      } else {\n        classes = allClasses;\n      }\n\n      if (sort) {\n        return _this.onSortClasses(classes);\n      }\n\n      return classes;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseClassModal\", function () {\n      return _this.setState({\n        classModalOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapClassCards\", function () {\n      var classes = _this.getMappableClasses();\n\n      return classes.map(function (item, index) {\n        return __jsx(ClassCard, {\n          key: index,\n          index: index,\n          classroom: item,\n          onSetDropdown: _this.onSetDropdown,\n          onCloseDropdown: _this.onCloseDropdown,\n          onCloneClass: function onCloneClass() {\n            return _this.onCloneClass(index);\n          },\n          onDeleteClass: function onDeleteClass() {\n            return _this.onDeleteClass(index);\n          },\n          dropdownIsOpen: _this.state.dropdownIsOpen,\n          dropdownIndex: _this.state.dropdownIndex,\n          onHandleClassCard: function onHandleClassCard() {\n            return _this.props.onHandleClassCard(index);\n          },\n          onSaveClassChanges: _this.props.onSaveClassChanges\n        });\n      });\n    });\n\n    _this.state = {\n      classesAreFiltered: false,\n      filterName: \"\",\n      filterLocation: '',\n      sort: '',\n      dropdownIndex: null,\n      dropdownIsOpen: false,\n      classModalOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(ListPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classModalOpen = this.state.classModalOpen;\n      var onSaveNewClass = this.props.onSaveNewClass;\n      return __jsx(\"div\", null, __jsx(\"div\", {\n        className: \"title-row card-panel\"\n      }, __jsx(\"div\", {\n        className: \"mobile-header\"\n      }, __jsx(\"a\", {\n        href: \"#\",\n        \"data-target\": \"slide-out\",\n        className: \"sidenav-trigger\"\n      }, __jsx(\"i\", {\n        className: \"material-icons\"\n      }, \"menu\"))), __jsx(\"nav\", {\n        className: \"breadcrumb-holder\"\n      }, __jsx(\"div\", {\n        className: \"nav-wrapper \"\n      }, __jsx(\"a\", {\n        href: \"#!\",\n        className: \"breadcrumb\"\n      }, \"< Classes\"))), __jsx(\"h2\", {\n        className: \"h1 white-text\"\n      }, __jsx(\"span\", {\n        className: \"heading-holder\"\n      }, __jsx(\"i\", {\n        className: \"icon-members\"\n      }), __jsx(\"span\", {\n        className: \"heading-block\"\n      }, \"Classes\")))), __jsx(FilterSection, {\n        onSetSort: this.onSetSort,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState,\n        onSetFilteredLocationState: this.onSetFilteredLocationState,\n        onUnsetFilteredLocationState: this.onUnsetFilteredLocationState\n      }), __jsx(\"div\", {\n        className: \"content-section\"\n      }, __jsx(\"div\", {\n        className: \"container-md\"\n      }, __jsx(\"div\", {\n        className: \"result-row center-align\"\n      }, __jsx(\"b\", {\n        className: \"result\"\n      }, \"- 23 matches -\"))), __jsx(\"div\", {\n        className: \"row d-flex-content card-width-366\"\n      }, this.mapClassCards())), __jsx(\"div\", {\n        className: \"add-btn-block\"\n      }, __jsx(\"a\", {\n        href: \"#modal_add_new_class\",\n        className: \"modal-trigger waves-effect waves-teal btn add-btn\",\n        onClick: function onClick() {\n          return _this2.onOpenClassModal(event);\n        }\n      }, __jsx(\"i\", {\n        className: \"material-icons\"\n      }, \"add\"), \" New Class\")), __jsx(ClassModal, {\n        open: classModalOpen,\n        onClose: this.onCloseClassModal,\n        onSave: onSaveNewClass\n      }));\n    }\n  }]);\n\n  return ListPage;\n}(React.Component);\n\nListPage.propTypes = {\n  classes: PropTypes.array.isRequired,\n  onHandleClassCard: PropTypes.func.isRequired,\n  onCloneClass: PropTypes.func.isRequired,\n  onDeleteClass: PropTypes.func.isRequired,\n  onSaveNewClass: PropTypes.func.isRequired,\n  onSaveClassChanges: PropTypes.func.isRequired\n};\nexport default ListPage;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Classes/ListPage/index.js"],"names":["React","PropTypes","ClassCard","FilterSection","firstNameAscending","firstNameDescending","lastNameAscending","lastNameDescending","ClassModal","ListPage","props","filterLocation","setState","classesAreFiltered","checkForFilteredState","dropdownIndex","dropdownIsOpen","index","onCloneClass","onCloseDropdown","onDeleteClass","state","filterName","length","event","preventDefault","classModalOpen","sort","classes","reduce","finalArr","currentClass","accountInfo","lastName","firstName","classString","toLowerCase","indexOf","push","preFilteredClasses","allClasses","currentInstructor","city","contactInfo","onFilterByName","onFilterByLocation","filteredByName","onSortClasses","getMappableClasses","map","item","onSetDropdown","onHandleClassCard","onSaveClassChanges","onSaveNewClass","onSetSort","onSetFilteredState","onUnsetFilteredState","onSetFilteredLocationState","onUnsetFilteredLocationState","mapClassCards","onOpenClassModal","onCloseClassModal","Component","propTypes","array","isRequired","func"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ClassCard from \"./components/ClassCard\";\nimport FilterSection from \"./components/FilterSection\";\nimport { firstNameAscending, firstNameDescending, lastNameAscending, lastNameDescending } from '../../utils/sortFunctions';\nimport ClassModal from \"../ClassModal\";\n\n\n\nclass ListPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      classesAreFiltered: false,\n      filterName: \"\",\n      filterLocation: '',\n      sort: '',\n      dropdownIndex: null,\n      dropdownIsOpen: false,\n      classModalOpen: false,\n    };\n  }\n\n  onSetFilteredLocationState = filterLocation => this.setState({ classesAreFiltered: true, filterLocation });\n\n  onUnsetFilteredLocationState = () => this.setState({ filterLocation: \"\" }, this.checkForFilteredState);\n\n  onSetDropdown = dropdownIndex => this.setState({ dropdownIsOpen: true, dropdownIndex });\n\n  onCloseDropdown = () => this.setState({ dropdownIsOpen: false, dropdownIndex: null });\n\n  onCloneClass = index => {\n    const { onCloneClass } = this.props;\n    this.onCloseDropdown();\n    onCloneClass(index);\n  };\n\n  onDeleteClass = index => {\n    const { onDeleteClass } = this.props;\n    this.onCloseDropdown();\n    onDeleteClass(index);\n  };\n\n  checkForFilteredState = () => {\n    const { filterName, filterLocation } = this.state;\n    if (!filterName.length && !filterLocation.length) {\n      this.setState({ classesAreFiltered: false });\n    }\n  };\n\n  onOpenClassModal = event => {\n    event.preventDefault();\n    this.setState({ classModalOpen: true });\n  };\n\n  onSetSort = (sort) => this.setState({ sort })\n\n  onSetFilteredState = (filterName) => this.setState({ classesAreFiltered: true, filterName })\n  onUnsetFilteredState = () => this.setState({ classesAreFiltered: false, filterName: '' })\n\n  onFilterByName = () => {\n    const { classes } = this.props;\n    const { filterName } = this.state;\n    return classes.reduce((finalArr, currentClass) => {\n      const { accountInfo: { lastName, firstName } } = currentClass;\n      const classString = `${firstName.toLowerCase()}${lastName.toLowerCase()}`;\n      if (classString.indexOf(filterName) !== -1 && finalArr.indexOf(currentClass) === -1) {\n        finalArr.push(currentClass);\n      }\n      return finalArr;\n    }, []);\n  }\n\n  onFilterByLocation = (preFilteredClasses = []) => {\n    const { classes: allClasses } = this.props;\n    const { filterLocation } = this.state;\n    let classes;\n    if (preFilteredClasses.length) {\n      classes = preFilteredClasses;\n    } else {\n      classes = allClasses;\n    }\n    return classes.reduce((finalArr, currentInstructor) => {\n      const { contactInfo: { city } } = currentInstructor;\n      if (city === filterLocation && finalArr.indexOf(currentInstructor) === -1) {\n        finalArr.push(currentInstructor);\n      }\n      return finalArr;\n    }, []);\n  }\n\n  // eslint-disable-next-line consistent-return\n  onSortClasses = (classes) => {\n    const { sort } = this.state;\n    switch (sort) {\n      case 'firstNameAscending':\n        return classes.sort(firstNameAscending);\n      case 'firstNameDescending':\n        return classes.sort(firstNameDescending);\n      case 'lastNameAscending':\n        return classes.sort(lastNameAscending);\n      case 'lastNameDescending':\n        return classes.sort(lastNameDescending);\n      default:\n        break;\n    }\n  }\n\n  getMappableClasses = () => {\n    const { filterName, filterLocation, sort } = this.state;\n    const { classes: allClasses } = this.props;\n    let classes;\n    if (filterName.length && !filterLocation.length) {\n      classes = this.onFilterByName();\n    } else if (!filterName.length && filterLocation.length) {\n      classes = this.onFilterByLocation();\n    } else if (filterName.length && filterLocation.length) {\n      const filteredByName = this.onFilterByName();\n      classes = this.onFilterByLocation(filteredByName);\n    } else {\n      classes = allClasses;\n    }\n    if (sort) {\n      return this.onSortClasses(classes);\n    }\n    return classes;\n  }\n\n  onCloseClassModal = () => this.setState({ classModalOpen: false });\n\n  mapClassCards = () => {\n    const classes = this.getMappableClasses();\n    return classes.map((item, index) => (\n      <ClassCard\n        key={index}\n        index={index}\n        classroom={item}\n        onSetDropdown={this.onSetDropdown}\n        onCloseDropdown={this.onCloseDropdown}\n        onCloneClass={() => this.onCloneClass(index)}\n        onDeleteClass={() => this.onDeleteClass(index)}\n        dropdownIsOpen={this.state.dropdownIsOpen}\n        dropdownIndex={this.state.dropdownIndex}\n        onHandleClassCard={() => this.props.onHandleClassCard(index)}\n        onSaveClassChanges = {this.props.onSaveClassChanges}\n      />\n    ));\n  };\n\n  render() {\n    const { classModalOpen} = this.state;\n    const { onSaveNewClass } = this.props;\n    return (\n      <div>\n        <div className=\"title-row card-panel\">\n          <div className=\"mobile-header\">\n            <a href=\"#\" data-target=\"slide-out\" className=\"sidenav-trigger\">\n              <i className=\"material-icons\">menu</i>\n            </a>\n          </div>\n          <nav className=\"breadcrumb-holder\">\n            <div className=\"nav-wrapper \">\n              <a href=\"#!\" className=\"breadcrumb\">\n                &lt; Classes\n              </a>\n            </div>\n          </nav>\n          <h2 className=\"h1 white-text\">\n            <span className=\"heading-holder\">\n              <i className=\"icon-members\" />\n              <span className=\"heading-block\">Classes</span>\n            </span>\n          </h2>\n        </div>\n        <FilterSection\n          onSetSort={this.onSetSort}\n          onSetFilteredState={this.onSetFilteredState}\n          onUnsetFilteredState={this.onUnsetFilteredState}\n          onSetFilteredLocationState={this.onSetFilteredLocationState}\n          onUnsetFilteredLocationState={this.onUnsetFilteredLocationState}\n        />\n        <div className=\"content-section\">\n          <div className=\"container-md\">\n            <div className=\"result-row center-align\">\n              <b className=\"result\">- 23 matches -</b>\n            </div>\n          </div>\n          <div className=\"row d-flex-content card-width-366\">\n            {this.mapClassCards()}\n          </div>\n        </div>\n        <div className=\"add-btn-block\">\n          <a\n            href=\"#modal_add_new_class\"\n            className=\"modal-trigger waves-effect waves-teal btn add-btn\"\n            onClick={() => this.onOpenClassModal(event)}\n          >\n            <i className=\"material-icons\">add</i> New Class\n          </a>\n        </div>\n        <ClassModal\n          open={classModalOpen}\n          onClose={this.onCloseClassModal}\n          onSave = {onSaveNewClass}\n        />\n\n      </div>\n    );\n  }\n}\n\nListPage.propTypes = {\n  classes: PropTypes.array.isRequired,\n  onHandleClassCard: PropTypes.func.isRequired,\n  onCloneClass: PropTypes.func.isRequired,\n  onDeleteClass: PropTypes.func.isRequired,\n  onSaveNewClass: PropTypes.func.isRequired,\n  onSaveClassChanges:PropTypes.func.isRequired,\n};\n\nexport default ListPage;\n"]},"metadata":{},"sourceType":"module"}