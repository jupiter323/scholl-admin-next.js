{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport update from 'immutability-helper';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { createStructuredSelector } from 'reselect';\nimport { deleteStudent } from '../components/Student/index/actions';\nimport { fetchStudents, addNewStudent } from '../components/Student/index/actions';\nimport { makeSelectStudents } from '../components/Student/index/selectors';\nimport StudentCard from '../components/Student/components/StudentCard';\nimport sampleStudentList from '../components/Student/utils/sampleStudentList';\nimport FilterSection from '../components/Student/ListPage/Components/FilterSection';\nimport StudentModal from '../components/Student/components/StudentModal';\nimport IndividualStudentPage from '../components/Student/IndividualStudentPage';\nimport LocationModal from '../components/Location/components/LocationModal';\n\nvar Students =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Students, _Component);\n\n  function Students(props) {\n    var _this;\n\n    _classCallCheck(this, Students);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Students).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      var onFetchStudents = _this.props.onFetchStudents;\n      onFetchStudents();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenStudentModal\", function () {\n      return _this.setState({\n        studentModalOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseStudentModal\", function () {\n      return _this.setState({\n        studentModalOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenLocationModal\", function () {\n      return _this.setState({\n        locationModalOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseLocationModal\", function () {\n      return _this.setState({\n        locationModalOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (filterName) {\n      return _this.setState({\n        filterName: filterName\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function () {\n      return _this.setState({\n        filterName: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredLocationState\", function (location) {\n      return _this.setState({\n        location: location\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredLocationState\", function () {\n      return _this.setState({\n        location: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSaveNewStudent\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var previousStudentState, onAddNewStudent, newStudent;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              previousStudentState = _this.state.newStudent; // dispatch add student action\n\n              onAddNewStudent = _this.props.onAddNewStudent;\n              onAddNewStudent(previousStudentState);\n              newStudent = update(previousStudentState, {\n                $set: {\n                  active: false,\n                  studentInformation: {\n                    firstName: '',\n                    lastName: '',\n                    gender: ''\n                  },\n                  contactInformation: {\n                    phone: '',\n                    addressLine1: '',\n                    addressLine2: '',\n                    city: '',\n                    state: '',\n                    zipCode: ''\n                  },\n                  emailAddress: {\n                    email: ''\n                  },\n                  location: {\n                    locations: []\n                  }\n                }\n              });\n\n              _this.setState({\n                newStudent: newStudent\n              }); // eslint-disable-next-line no-console\n\n\n              console.warn('do something with the new student info');\n\n              _this.onCloseStudentModal();\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeleteNewStudent\", function () {\n      var previousStudentState = _this.state.newStudent;\n      var newStudent = update(previousStudentState, {\n        $set: {\n          active: false,\n          studentInformation: {\n            firstName: '',\n            lastName: '',\n            gender: ''\n          },\n          contactInformation: {\n            phone: '',\n            addressLine1: '',\n            addressLine2: '',\n            city: '',\n            state: '',\n            zipCode: ''\n          },\n          emailAddress: {\n            email: ''\n          },\n          location: {\n            locations: []\n          }\n        }\n      });\n\n      _this.setState({\n        newStudent: newStudent\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRemoveLocation\", function (index) {\n      var previousStudentState = _this.state.newStudent;\n      var locations = _this.state.newStudent.location.locations;\n\n      var newLocationsArray = _this.arrayItemRemover(locations, locations[index]);\n\n      var newStudent = update(previousStudentState, {\n        location: {\n          $set: {\n            locations: newLocationsArray\n          }\n        }\n      });\n\n      _this.setState({\n        newStudent: newStudent\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByName\", function () {\n      var _this$state = _this.state,\n          students = _this$state.students,\n          filterName = _this$state.filterName;\n      return students.reduce(function (finalArr, currentStudent) {\n        var lastName = currentStudent.lastName,\n            firstName = currentStudent.firstName;\n        var studentString = \"\".concat(firstName.toLowerCase()).concat(lastName.toLowerCase());\n\n        if (studentString.indexOf(filterName) !== -1 && finalArr.indexOf(currentStudent) === -1) {\n          finalArr.push(currentStudent);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onHandleStudentCard\", function (index) {\n      var students = _this.state.students;\n\n      _this.setState({\n        selectedStudent: students[index]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRedirectToStudentPage\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        selectedStudent: null\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeleteStudent\", function (index) {\n      var onDeleteStudent = _this.props.onDeleteStudent;\n      var students = _this.state.students; // Dispatch deleteStudent\n\n      onDeleteStudent(students[index].id);\n\n      var newStudentArray = _this.arrayItemRemover(students, students[index]);\n\n      _this.setState({\n        students: newStudentArray\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloneStudent\", function (index) {\n      var students = _this.state.students;\n\n      _this.setState(function (prevState) {\n        prevState.students.push(students[index]);\n        return {\n          students: prevState.students\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event, name, section) {\n      var previousStudentState = _this.state.newStudent;\n      var value = event.target ? event.target.value : event;\n      var updatedStudent = update(previousStudentState, _defineProperty({}, section, {\n        $merge: _defineProperty({}, name, value)\n      }));\n\n      _this.setState({\n        newStudent: updatedStudent\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"arrayItemRemover\", function (array, value) {\n      return array.filter(function (student) {\n        return student !== value;\n      });\n    });\n\n    _this.state = {\n      selectedStudent: null,\n      students: sampleStudentList,\n      studentModalOpen: false,\n      locationModalOpen: false,\n      sort: \"\",\n      filterName: \"\",\n      newStudent: {\n        active: false,\n        studentInformation: {\n          firstName: '',\n          lastName: '',\n          gender: ''\n        },\n        contactInformation: {\n          phone: '',\n          addressLine1: '',\n          addressLine2: '',\n          city: '',\n          state: '',\n          zipCode: ''\n        },\n        emailAddress: {\n          email: ''\n        },\n        location: {\n          locations: []\n        }\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Students, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          studentModalOpen = _this$state2.studentModalOpen,\n          students = _this$state2.students,\n          selectedStudent = _this$state2.selectedStudent;\n      return React.createElement(\"main\", {\n        id: \"main\",\n        role: \"main\"\n      }, React.createElement(\"div\", {\n        className: \"main-holder grey lighten-5\"\n      }, React.createElement(StickyContainer, null, !selectedStudent && React.createElement(React.Fragment, null, React.createElement(Sticky, null, function (_ref2) {\n        var style = _ref2.style;\n        return React.createElement(\"div\", {\n          className: \"title-row card-panel\",\n          style: _objectSpread({}, style, {\n            zIndex: 1999\n          })\n        }, React.createElement(\"div\", {\n          className: \"mobile-header\"\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          \"data-target\": \"slide-out\",\n          className: \"sidenav-trigger\"\n        }, React.createElement(\"i\", {\n          className: \"material-icons\"\n        }, \"menu\"))), React.createElement(\"h2\", {\n          className: \"h1 white-text\"\n        }, React.createElement(\"span\", {\n          className: \"heading-holder\"\n        }, React.createElement(\"i\", {\n          className: \"icon-student\"\n        }), React.createElement(\"span\", {\n          className: \"heading-block\"\n        }, \"Students\"))));\n      }), React.createElement(FilterSection, {\n        onSetSort: this.onSetSort,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState,\n        onSetFilteredLocationState: this.onSetFilteredLocationState,\n        onUnsetFilteredLocationState: this.onUnsetFilteredLocationState,\n        handleFilterClick: this.handleFilterClick,\n        onFilterByName: this.onFilterByName\n      }), React.createElement(\"div\", {\n        className: \"content-section\"\n      }, React.createElement(\"div\", {\n        className: \"row d-flex-content\"\n      }, students.map(function (student, index) {\n        return React.createElement(StudentCard, {\n          student: student,\n          index: index,\n          id: student.id,\n          key: student.id,\n          onHandleStudentCard: function onHandleStudentCard() {\n            return _this2.onHandleStudentCard(index);\n          },\n          onDeleteStudent: function onDeleteStudent() {\n            return _this2.onDeleteStudent(index);\n          },\n          onCloneStudent: function onCloneStudent() {\n            return _this2.onCloneStudent(index, student.id);\n          }\n        });\n      }))), React.createElement(\"a\", {\n        href: \"#\",\n        className: \"waves-effect waves-teal btn add-btn modal-trigger\",\n        onClick: this.onOpenStudentModal\n      }, React.createElement(\"i\", {\n        className: \"material-icons\"\n      }, \"add\"), \"New Student\"), React.createElement(StudentModal, {\n        open: studentModalOpen,\n        onClose: this.onCloseStudentModal,\n        handleChange: this.handleChange,\n        state: this.state.newStudent,\n        onSave: this.onSaveNewStudent,\n        onOpenLocationModal: this.onOpenLocationModal,\n        onRemoveLocation: this.onRemoveLocation,\n        onDeleteNewStudent: this.onDeleteNewStudent\n      }), React.createElement(LocationModal, {\n        open: this.state.locationModalOpen,\n        onClose: this.onCloseLocationModal,\n        handleLocationsChange: function handleLocationsChange(selectedLocations) {\n          return _this2.handleChange(selectedLocations, 'locations', 'location');\n        }\n      })), selectedStudent && React.createElement(IndividualStudentPage, {\n        student: selectedStudent,\n        onRedirectToStudentPage: this.onRedirectToStudentPage\n      }))));\n    }\n  }]);\n\n  return Students;\n}(Component);\n\nStudents.propTypes = {\n  students: PropTypes.array.isRequired,\n  onFetchStudents: PropTypes.func.isRequired,\n  onAddNewStudent: PropTypes.func.isRequired,\n  onDeleteStudent: PropTypes.func.isRequired\n};\nvar mapStateToProps = createStructuredSelector({\n  students: makeSelectStudents()\n});\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onDeleteStudent: function onDeleteStudent(id) {\n      return dispatch(deleteStudent(id));\n    },\n    onFetchStudents: function onFetchStudents() {\n      return dispatch(fetchStudents());\n    },\n    onAddNewStudent: function onAddNewStudent(student) {\n      return dispatch(addNewStudent(student));\n    }\n  };\n};\n\nvar withConnect = connect(mapStateToProps, mapDispatchToProps);\nexport default compose(withConnect)(Students);","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/pages/students.js"],"names":["React","Component","update","StickyContainer","Sticky","compose","connect","PropTypes","createStructuredSelector","deleteStudent","fetchStudents","addNewStudent","makeSelectStudents","StudentCard","sampleStudentList","FilterSection","StudentModal","IndividualStudentPage","LocationModal","Students","props","onFetchStudents","setState","studentModalOpen","locationModalOpen","sort","filterName","location","previousStudentState","state","newStudent","onAddNewStudent","$set","active","studentInformation","firstName","lastName","gender","contactInformation","phone","addressLine1","addressLine2","city","zipCode","emailAddress","email","locations","console","warn","onCloseStudentModal","index","newLocationsArray","arrayItemRemover","students","reduce","finalArr","currentStudent","studentString","toLowerCase","indexOf","push","selectedStudent","event","preventDefault","onDeleteStudent","id","newStudentArray","prevState","name","section","value","target","updatedStudent","$merge","array","filter","student","style","zIndex","onSetSort","onSetFilteredState","onUnsetFilteredState","onSetFilteredLocationState","onUnsetFilteredLocationState","handleFilterClick","onFilterByName","map","onHandleStudentCard","onCloneStudent","onOpenStudentModal","handleChange","onSaveNewStudent","onOpenLocationModal","onRemoveLocation","onDeleteNewStudent","onCloseLocationModal","selectedLocations","onRedirectToStudentPage","propTypes","isRequired","func","mapStateToProps","mapDispatchToProps","dispatch","withConnect"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport update from 'immutability-helper';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { createStructuredSelector } from 'reselect';\nimport {deleteStudent} from '../components/Student/index/actions';\nimport {fetchStudents, addNewStudent} from '../components/Student/index/actions';\nimport {makeSelectStudents} from '../components/Student/index/selectors';\nimport StudentCard from '../components/Student/components/StudentCard';\nimport sampleStudentList from '../components/Student/utils/sampleStudentList';\nimport FilterSection from '../components/Student/ListPage/Components/FilterSection';\nimport StudentModal from '../components/Student/components/StudentModal';\nimport IndividualStudentPage from '../components/Student/IndividualStudentPage';\nimport LocationModal from '../components/Location/components/LocationModal';\n\nclass Students extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedStudent: null,\n      students: sampleStudentList,\n      studentModalOpen: false,\n      locationModalOpen: false,\n      sort: \"\",\n      filterName: \"\",\n      newStudent: {\n        active: false,\n        studentInformation: {\n          firstName: '',\n          lastName: '',\n          gender: '',\n        },\n        contactInformation: {\n          phone: '',\n          addressLine1: '',\n          addressLine2: '',\n          city: '',\n          state: '',\n          zipCode: '',\n        },\n        emailAddress: {\n          email: '',\n        },\n        location: {\n          locations: [],\n        },\n     },\n    }\n  }\n\n  componentDidMount = () => {\n    const {onFetchStudents} = this.props;\n    onFetchStudents();\n  }\n\n  onOpenStudentModal = () => this.setState({ studentModalOpen: true });\n  onCloseStudentModal = () => this.setState({ studentModalOpen: false });\n  onOpenLocationModal = () => this.setState({locationModalOpen: true});\n  onCloseLocationModal = () => this.setState({locationModalOpen: false})\n\n\n  onSetSort = (sort) => this.setState({ sort });\n  onSetFilteredState = (filterName) => this.setState({ filterName });\n  onUnsetFilteredState = () => this.setState({ filterName: '' });\n\n  onSetFilteredLocationState = (location) => this.setState({ location });\n  onUnsetFilteredLocationState = () => this.setState({ location: '' });\n\n // TODO add a toas or some notification that a student has been saved\n  onSaveNewStudent = async () => {\n    const {newStudent: previousStudentState} = this.state;\n\n    // dispatch add student action\n    const {onAddNewStudent} = this.props;\n    onAddNewStudent(previousStudentState);\n\n    const newStudent = update(previousStudentState, {\n      $set:\n       { active: false,\n        studentInformation: {\n          firstName: '',\n          lastName: '',\n          gender: '',\n        },\n        contactInformation: {\n          phone: '',\n          addressLine1: '',\n          addressLine2: '',\n          city: '',\n          state: '',\n          zipCode: '',\n        },\n        emailAddress: {\n          email: '',\n        },\n        location: {\n          locations: [],\n        },\n    }}\n    );\n    this.setState({newStudent})\n    // eslint-disable-next-line no-console\n    console.warn('do something with the new student info')\n    this.onCloseStudentModal();\n  }\n\n  onDeleteNewStudent = () => {\n    const {newStudent: previousStudentState} = this.state;\n    const newStudent = update(previousStudentState, {\n      $set:\n       { active: false,\n        studentInformation: {\n          firstName: '',\n          lastName: '',\n          gender: '',\n        },\n        contactInformation: {\n          phone: '',\n          addressLine1: '',\n          addressLine2: '',\n          city: '',\n          state: '',\n          zipCode: '',\n        },\n        emailAddress: {\n          email: '',\n        },\n        location: {\n          locations: [],\n        },\n    }}\n    );\n    this.setState({newStudent})\n  }\n\n  onRemoveLocation = (index) => {\n    const {newStudent: previousStudentState} = this.state;\n    const {location: { locations } } = this.state.newStudent;\n    const newLocationsArray = this.arrayItemRemover(locations, locations[index]);\n    const newStudent = update(previousStudentState, {\n      location: { $set: {locations: newLocationsArray}},\n    })\n    this.setState({newStudent})\n  }\n\n  onFilterByName = () => {\n    const { students, filterName } = this.state;\n    return students.reduce((finalArr, currentStudent) => {\n      const { lastName, firstName } = currentStudent;\n      const studentString = `${firstName.toLowerCase()}${lastName.toLowerCase()}`;\n      if (studentString.indexOf(filterName) !== -1 && finalArr.indexOf(currentStudent) === -1) {\n        finalArr.push(currentStudent);\n      }\n      return finalArr;\n    }, []);\n  }\n\n  onHandleStudentCard = (index) => {\n    const { students } = this.state;\n    this.setState({ selectedStudent: students[index] });\n  }\n\n  onRedirectToStudentPage = (event) => {\n    event.preventDefault();\n    this.setState({selectedStudent: null})\n  }\n\n  onDeleteStudent = (index) => {\n    const {onDeleteStudent} = this.props;\n    const { students } = this.state;\n    // Dispatch deleteStudent\n    onDeleteStudent(students[index].id);\n    const newStudentArray = this.arrayItemRemover(students, students[index])\n    this.setState({students: newStudentArray})\n  }\n\n  onCloneStudent = (index) => {\n    const { students } = this.state;\n    this.setState(prevState => {\n      prevState.students.push(students[index]);\n      return { students: prevState.students}\n    })\n  }\n\n  handleChange = (event, name, section) => {\n    const { newStudent: previousStudentState } = this.state;\n    const value = event.target ? event.target.value : event;\n    const updatedStudent = update(previousStudentState, {\n      [section]: { $merge: { [name]: value }},\n    })\n    this.setState({newStudent: updatedStudent})\n}\n\n\n  arrayItemRemover = (array, value) => array.filter((student) => student !== value)\n\n  render() {\n    const { studentModalOpen, students, selectedStudent } = this.state;\n    return (\n      <main id=\"main\" role=\"main\">\n        <div className=\"main-holder grey lighten-5\">\n        <StickyContainer>\n          {!selectedStudent && (\n            <React.Fragment>\n              <Sticky>\n                {({style}) => (\n\n                  <div className=\"title-row card-panel\" style={{...style, zIndex: 1999}}>\n                <div className=\"mobile-header\">\n                  <a href=\"#\" data-target=\"slide-out\" className=\"sidenav-trigger\"><i className=\"material-icons\">menu</i></a>\n                </div>\n                <h2 className=\"h1 white-text\">\n                  <span className=\"heading-holder\">\n                    <i className=\"icon-student\"></i>\n                    <span className=\"heading-block\">Students</span>\n                  </span>\n                </h2>\n              </div>\n               )}\n             </Sticky>\n              <FilterSection\n                onSetSort={this.onSetSort}\n                onSetFilteredState={this.onSetFilteredState}\n                onUnsetFilteredState={this.onUnsetFilteredState}\n                onSetFilteredLocationState={this.onSetFilteredLocationState}\n                onUnsetFilteredLocationState={this.onUnsetFilteredLocationState}\n                handleFilterClick={this.handleFilterClick}\n                onFilterByName={this.onFilterByName} />\n              <div className=\"content-section\">\n                <div className=\"row d-flex-content\">\n                  {students.map((student, index) => (\n                    <StudentCard\n                    student={student}\n                    index={index}\n                    id={student.id}\n                    key={student.id}\n                    onHandleStudentCard={() => this.onHandleStudentCard(index)}\n                    onDeleteStudent={() => this.onDeleteStudent(index)}\n                    onCloneStudent={() => this.onCloneStudent(index, student.id)}\n                    />\n                  ))}\n                </div>\n              </div>\n              <a href=\"#\" className=\"waves-effect waves-teal btn add-btn modal-trigger\" onClick={this.onOpenStudentModal}><i className=\"material-icons\">add</i>New Student</a>\n              <StudentModal\n                open={studentModalOpen}\n                onClose={this.onCloseStudentModal}\n                handleChange={this.handleChange}\n                state={this.state.newStudent}\n                onSave={this.onSaveNewStudent}\n                onOpenLocationModal={this.onOpenLocationModal}\n                onRemoveLocation={this.onRemoveLocation}\n                onDeleteNewStudent={this.onDeleteNewStudent}\n                />\n                <LocationModal\n                open={this.state.locationModalOpen}\n                onClose={this.onCloseLocationModal}\n                handleLocationsChange={(selectedLocations) => this.handleChange(selectedLocations, 'locations', 'location')}\n                />\n                </React.Fragment>\n          )}\n          {selectedStudent && (\n            <IndividualStudentPage student={selectedStudent} onRedirectToStudentPage={this.onRedirectToStudentPage} />\n          )}\n          </StickyContainer>\n        </div>\n      </main>\n    );\n  }\n}\n\nStudents.propTypes = {\n  students: PropTypes.array.isRequired,\n  onFetchStudents: PropTypes.func.isRequired,\n  onAddNewStudent: PropTypes.func.isRequired,\n  onDeleteStudent: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = createStructuredSelector({\n    students: makeSelectStudents(),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onDeleteStudent: (id) => dispatch(deleteStudent(id)),\n  onFetchStudents: () => dispatch(fetchStudents()),\n  onAddNewStudent: (student) => dispatch(addNewStudent(student)),\n});\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps);\n\nexport default compose(withConnect)(Students);\n"]},"metadata":{},"sourceType":"module"}