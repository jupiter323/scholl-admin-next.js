{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\n/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport FilterSection from './components/FilterSection';\nimport FullView from './components/FullView';\nimport { passage, statusAscending, availableDate, dueDate, alerts } from '../../utils/sortFunctions';\n\nvar DetailLessonList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DetailLessonList, _React$Component);\n\n  function DetailLessonList(props) {\n    var _this;\n\n    _classCallCheck(this, DetailLessonList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DetailLessonList).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClearFilters\", function () {\n      return _this.setState({\n        statusFilters: [],\n        subjectFilters: [],\n        completeFilters: [],\n        flagFilters: [],\n        classTypeFilters: [],\n        dueDateFilters: [],\n        unitFilter: \"\",\n        nameFilter: \"\"\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (lesson) {\n      return _this.setState({\n        nameFilter: lesson\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function (filter) {\n      return _this.setState(_defineProperty({}, filter, \"\"));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeView\", function (view) {\n      return _this.setState({\n        currentView: view,\n        active: view\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortLessons\", function (lessons) {\n      var sort = _this.state.sort;\n\n      switch (sort) {\n        case 'passage':\n          return lessons.sort(passage);\n\n        case 'status':\n          return lessons.sort(statusAscending);\n\n        case 'availableDate':\n          return lessons.sort(availableDate);\n\n        case 'dueDate':\n          return lessons.sort(dueDate);\n\n        case 'alerts':\n          return lessons.sort(alerts);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByName\", function () {\n      var _this$state = _this.state,\n          lessons = _this$state.lessons,\n          nameFilter = _this$state.nameFilter;\n      return lessons.reduce(function (finalArr, currentLesson) {\n        var lessonName = currentLesson.lessonName;\n        var lessonString = lessonName.replace(/\\s/g, \"\").toLowerCase();\n\n        if (lessonString.indexOf(nameFilter) !== -1 && finalArr.indexOf(currentLesson) === -1) {\n          finalArr.push(currentLesson);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloneLesson\", function (index) {\n      var lessons = _this.state.lessons;\n\n      _this.setState(function (prevState) {\n        prevState.lessons.push(lessons[index]);\n        return {\n          lessons: prevState.lessons\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeleteLesson\", function (index) {\n      var lessons = _this.state.lessons;\n\n      var newLessonsArray = _this.arrayItemRemover(lessons, lessons[index]);\n\n      _this.setState({\n        lessons: newLessonsArray\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterLessons\", function () {\n      var _this$state2 = _this.state,\n          statusFilters = _this$state2.statusFilters,\n          subjectFilters = _this$state2.subjectFilters,\n          classTypeFilters = _this$state2.classTypeFilters,\n          completeFilters = _this$state2.completeFilters,\n          flagFilters = _this$state2.flagFilters,\n          allLessons = _this$state2.lessons;\n      var lessons = allLessons;\n\n      if (statusFilters.length && statusFilters.indexOf(\"all\") === -1) {\n        lessons = lessons.filter(function (lesson) {\n          return statusFilters.indexOf(lesson.status) !== -1;\n        });\n      }\n\n      if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n        lessons = lessons.filter(function (lesson) {\n          return subjectFilters.indexOf(lesson.subject) !== -1;\n        });\n      }\n\n      if (flagFilters.length && flagFilters.indexOf('all') === -1) {\n        lessons = lessons.filter(function (lesson) {\n          return lesson.alerts.length !== 0;\n        });\n      }\n\n      if (classTypeFilters.length && classTypeFilters.indexOf(\"all\") === -1) {\n        lessons = lessons.filter(function (lesson) {\n          return classTypeFilters.indexOf(lesson.classType) !== -1;\n        });\n      }\n\n      return lessons;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterCompletionStatus\", function () {\n      var _this$state3 = _this.state,\n          completeFilters = _this$state3.completeFilters,\n          allLessons = _this$state3.lessons;\n      var lessons = allLessons;\n\n      if (completeFilters.length && completeFilters.indexOf('complete') !== -1) {\n        return lessons.filter(function (lesson) {\n          return lesson.completed === true;\n        });\n      } else if (completeFilters.indexOf('unassigned')) {\n        lessons = lessons.filter(function (lesson) {\n          return lesson.status === 'Started';\n        });\n      } else if (completeFilters.length && completeFilters.indexOf('incomplete')) {\n        lessons = lessons.filter(function (lesson) {\n          return lesson.assigned === false;\n        });\n      }\n\n      return lessons;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableLessons\", function () {\n      var _this$state4 = _this.state,\n          sort = _this$state4.sort,\n          dueDateFilters = _this$state4.dueDateFilters,\n          lessons = _this$state4.lessons,\n          nameFilter = _this$state4.nameFilter,\n          statusFilters = _this$state4.statusFilters,\n          subjectFilters = _this$state4.subjectFilters,\n          classTypeFilters = _this$state4.classTypeFilters,\n          completeFilters = _this$state4.completeFilters,\n          flagFilters = _this$state4.flagFilters;\n      var mappableLessons = lessons;\n\n      if (nameFilter.length) {\n        mappableLessons = _this.onFilterByName();\n      }\n\n      if (statusFilters.length || subjectFilters.length || classTypeFilters.length || flagFilters.length) {\n        mappableLessons = _this.onFilterLessons();\n      }\n\n      if (dueDateFilters) {\n        mappableLessons = _this.calculateDueDate();\n      }\n\n      if (completeFilters.length) {\n        mappableLessons = _this.onFilterCompletionStatus();\n      }\n\n      if (sort) {\n        return _this.onSortLessons(mappableLessons);\n      }\n\n      return mappableLessons;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"calculateDueDate\", function () {\n      var _this$state5 = _this.state,\n          dueDateFilters = _this$state5.dueDateFilters,\n          allLessons = _this$state5.lessons;\n      var lessons = allLessons;\n\n      if (dueDateFilters.length && dueDateFilters.indexOf('all') === -1) {\n        lessons = lessons.filter(function (lesson) {\n          return dueDateFilters.indexOf(lesson.overdue) !== -1;\n        });\n      }\n\n      return lessons;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterClick\", function (filterType, filter) {\n      var _this$state6 = _this.state,\n          currentSubjectFilters = _this$state6.subjectFilters,\n          currentCompleteFilters = _this$state6.completeFilters,\n          currentStatusFilters = _this$state6.statusFilters,\n          currentFlagFilters = _this$state6.flagFilters,\n          currentDueDateFilters = _this$state6.dueDateFilters,\n          currentClassTypeFilters = _this$state6.classTypeFilters;\n      var modifiedFilterCurrentState;\n      var modifiedFilterName;\n      var modifiedFilterUpdatedState;\n\n      switch (filterType) {\n        case 'subject':\n          modifiedFilterCurrentState = currentSubjectFilters;\n          modifiedFilterName = 'subjectFilters';\n          break;\n\n        case 'status':\n          modifiedFilterCurrentState = currentStatusFilters;\n          modifiedFilterName = 'statusFilters';\n          break;\n\n        case 'complete':\n          modifiedFilterCurrentState = currentCompleteFilters;\n          modifiedFilterName = 'completeFilters';\n          break;\n\n        case 'alerts':\n          modifiedFilterCurrentState = currentFlagFilters;\n          modifiedFilterName = 'flagFilters';\n          break;\n\n        case 'dueDate':\n          modifiedFilterCurrentState = currentDueDateFilters;\n          modifiedFilterName = 'dueDateFilters';\n          break;\n\n        case 'classType':\n          modifiedFilterCurrentState = currentClassTypeFilters;\n          modifiedFilterName = 'classTypeFilters';\n          break;\n\n        default:\n          break;\n      } // Decide whether we're adding or removing the selected filter\n\n\n      if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $push: [filter]\n        });\n      } else {\n        var filterIndex = modifiedFilterCurrentState.indexOf(filter);\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, modifiedFilterName, modifiedFilterUpdatedState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"arrayItemRemover\", function (array, value) {\n      return array.filter(function (lesson) {\n        return lesson !== value;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCurrentView\", function () {\n      var active = _this.state.active;\n\n      if (active === 'full') {\n        return React.createElement(FullView, {\n          lessons: _this.getMappableLessons(),\n          onDeleteLesson: _this.onDeleteLesson,\n          onCloneLesson: _this.onCloneLesson\n        });\n      }\n    });\n\n    _this.state = {\n      test: true,\n      lessons: _this.props.user.lessons,\n      currentView: 'full',\n      active: 'full',\n      statusFilters: [],\n      subjectFilters: [],\n      completeFilters: [],\n      flagFilters: [],\n      classTypeFilters: [],\n      dueDateFilters: [],\n      sort: \"\",\n      nameFilter: \"\",\n      unitFilter: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(DetailLessonList, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state7 = this.state,\n          currentView = _this$state7.currentView,\n          subjectFilters = _this$state7.subjectFilters,\n          statusFilters = _this$state7.statusFilters,\n          completeFilters = _this$state7.completeFilters,\n          flagFilters = _this$state7.flagFilters,\n          dueDateFilters = _this$state7.dueDateFilters,\n          classTypeFilters = _this$state7.classTypeFilters;\n      return React.createElement(React.Fragment, null, React.createElement(FilterSection, {\n        currentView: currentView,\n        onChangeView: this.onChangeView,\n        onHandleFilterClick: this.onHandleFilterClick,\n        onClearFilters: this.onClearFilters,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState,\n        onSetSort: this.onSetSort,\n        subjectFilters: subjectFilters,\n        statusFilters: statusFilters,\n        completeFilters: completeFilters,\n        flagFilters: flagFilters,\n        dueDateFilters: dueDateFilters,\n        classTypeFilters: classTypeFilters,\n        handleFilterClick: this.handleFilterClick\n      }), this.renderCurrentView(), React.createElement(\"a\", {\n        href: \"#\",\n        className: \"waves-effect waves-teal btn add-btn\"\n      }, React.createElement(\"i\", {\n        className: \"material-icons\"\n      }, \"add\"), \"New Lesson\"));\n    }\n  }]);\n\n  return DetailLessonList;\n}(React.Component);\n\nDetailLessonList.propTypes = {\n  user: PropTypes.object.isRequired\n};\nexport default DetailLessonList;","map":{"version":3,"sources":["C:\\Users\\KFROE\\OneDrive\\Desktop\\Clear Choice\\clear-choice-admin\\components\\Student\\DetailLessonList\\index.js"],"names":["React","PropTypes","update","FilterSection","FullView","passage","statusAscending","availableDate","dueDate","alerts","DetailLessonList","props","setState","statusFilters","subjectFilters","completeFilters","flagFilters","classTypeFilters","dueDateFilters","unitFilter","nameFilter","sort","lesson","filter","view","currentView","active","lessons","state","reduce","finalArr","currentLesson","lessonName","lessonString","replace","toLowerCase","indexOf","push","index","prevState","newLessonsArray","arrayItemRemover","allLessons","length","status","subject","classType","completed","assigned","mappableLessons","onFilterByName","onFilterLessons","calculateDueDate","onFilterCompletionStatus","onSortLessons","overdue","filterType","currentSubjectFilters","currentCompleteFilters","currentStatusFilters","currentFlagFilters","currentDueDateFilters","currentClassTypeFilters","modifiedFilterCurrentState","modifiedFilterName","modifiedFilterUpdatedState","$push","filterIndex","$splice","array","value","getMappableLessons","onDeleteLesson","onCloneLesson","test","user","onChangeView","onHandleFilterClick","onClearFilters","onSetFilteredState","onUnsetFilteredState","onSetSort","handleFilterClick","renderCurrentView","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport FilterSection from './components/FilterSection';\nimport FullView from './components/FullView';\nimport { passage, statusAscending, availableDate, dueDate, alerts} from '../../utils/sortFunctions';\n\nclass DetailLessonList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      test: true,\n      lessons: this.props.user.lessons,\n      currentView: 'full',\n      active: 'full',\n      statusFilters: [],\n      subjectFilters: [],\n      completeFilters: [],\n      flagFilters: [],\n      classTypeFilters: [],\n      dueDateFilters: [],\n      sort: \"\",\n      nameFilter: \"\",\n      unitFilter: \"\",\n    }\n  };\n\n  onClearFilters = () => this.setState({ statusFilters: [], subjectFilters: [], completeFilters: [], flagFilters: [], classTypeFilters: [], dueDateFilters: [], unitFilter: \"\", nameFilter: \"\" })\n  onSetSort = (sort) => this.setState({sort})\n  onSetFilteredState = (lesson) => this.setState({nameFilter: lesson })\n  onUnsetFilteredState = (filter) => this.setState({[filter]: \"\" })\n  onChangeView = (view) => this.setState({currentView: view, active: view})\n\n  onSortLessons = (lessons) => {\n    const { sort } = this.state;\n    switch(sort) {\n      case 'passage':\n        return lessons.sort(passage);\n      case 'status':\n          return lessons.sort(statusAscending);\n      case 'availableDate':\n          return lessons.sort(availableDate);\n      case 'dueDate':\n        return lessons.sort(dueDate);\n      case 'alerts':\n        return lessons.sort(alerts);\n      default:\n        break;\n    }\n  }\n\n  onFilterByName = () => {\n    const { lessons, nameFilter } = this.state;\n    return lessons.reduce((finalArr, currentLesson) => {\n      const { lessonName } = currentLesson;\n      const lessonString = lessonName.replace(/\\s/g, \"\").toLowerCase();\n      if (lessonString.indexOf(nameFilter) !== -1 && finalArr.indexOf(currentLesson) === -1) {\n        finalArr.push(currentLesson);\n      }\n      return finalArr;\n    }, []);\n  }\n  onCloneLesson = (index) => {\n    const { lessons } = this.state;\n    this.setState(prevState => {\n      prevState.lessons.push(lessons[index]);\n      return { lessons: prevState.lessons}\n     })\n  }\n\n  onDeleteLesson = (index) => {\n    const { lessons } = this.state;\n    const newLessonsArray = this.arrayItemRemover(lessons, lessons[index])\n    this.setState({lessons: newLessonsArray})\n  }\n  // TODO: separate unitfilter method and due date method\n  // note: unassigned and incomplete are filtering opposite, but this works for some reason\n  onFilterLessons = () => {\n    const { statusFilters, subjectFilters, classTypeFilters, completeFilters, flagFilters, lessons: allLessons } = this.state;\n    let lessons = allLessons;\n    if (statusFilters.length && statusFilters.indexOf(\"all\") === -1) {\n      lessons = lessons.filter(lesson => statusFilters.indexOf(lesson.status) !== -1);\n    }\n    if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n      lessons = lessons.filter(lesson => subjectFilters.indexOf(lesson.subject) !== -1)\n    }\n    if (flagFilters.length && flagFilters.indexOf('all') === -1) {\n      lessons = lessons.filter(lesson => lesson.alerts.length !== 0)\n    }\n    if (classTypeFilters.length && classTypeFilters.indexOf(\"all\") === -1) {\n      lessons = lessons.filter(lesson => classTypeFilters.indexOf(lesson.classType) !== -1)\n    }\n    return lessons;\n  }\n// NOT WORKING\n  onFilterCompletionStatus = () => {\n    const { completeFilters, lessons: allLessons} = this.state;\n    let lessons = allLessons;\n    if (completeFilters.length && completeFilters.indexOf('complete') !== -1) {\n      return lessons.filter(lesson => lesson.completed === true)\n  }\n  else if (completeFilters.indexOf('unassigned')) {\n    lessons = lessons.filter(lesson => lesson.status === 'Started')\n  }\n    else if (completeFilters.length && completeFilters.indexOf('incomplete')) {\n      lessons = lessons.filter(lesson => lesson.assigned === false)\n    }\n    return lessons\n  }\n\n \n  getMappableLessons = () => {\n    const { sort, dueDateFilters, lessons, nameFilter, statusFilters, subjectFilters, classTypeFilters, completeFilters, flagFilters} = this.state;\n    let mappableLessons = lessons;\n    if (nameFilter.length) {\n      mappableLessons = this.onFilterByName();\n    }\n    if (statusFilters.length || subjectFilters.length || classTypeFilters.length || flagFilters.length) {\n      mappableLessons = this.onFilterLessons();\n    }\n    if (dueDateFilters) {\n      mappableLessons= this.calculateDueDate();\n    }\n    if (completeFilters.length) {\n      mappableLessons = this.onFilterCompletionStatus();\n    }\n    if (sort) {\n      return this.onSortLessons(mappableLessons)\n    }\n    return mappableLessons\n  }\n\n   calculateDueDate = () => {\n    const { dueDateFilters, lessons: allLessons } = this.state;\n    let lessons = allLessons;\n    if (dueDateFilters.length && dueDateFilters.indexOf('all') === -1) {\n      lessons = lessons.filter(lesson => dueDateFilters.indexOf(lesson.overdue) !== -1)\n    }\n    return lessons;\n  }\n\n\n  handleFilterClick = (filterType, filter) => {\n    const { subjectFilters: currentSubjectFilters, completeFilters: currentCompleteFilters, statusFilters: currentStatusFilters, flagFilters: currentFlagFilters, dueDateFilters: currentDueDateFilters, classTypeFilters: currentClassTypeFilters } = this.state;\n    let modifiedFilterCurrentState;\n    let modifiedFilterName;\n    let modifiedFilterUpdatedState;\n    switch (filterType) {\n      case 'subject':\n        modifiedFilterCurrentState = currentSubjectFilters;\n        modifiedFilterName = 'subjectFilters';\n        break;\n      case 'status':\n        modifiedFilterCurrentState = currentStatusFilters;\n        modifiedFilterName = 'statusFilters';\n        break;\n      case 'complete':\n        modifiedFilterCurrentState = currentCompleteFilters;\n        modifiedFilterName = 'completeFilters';\n        break;\n      case 'alerts':\n          modifiedFilterCurrentState = currentFlagFilters;\n          modifiedFilterName = 'flagFilters';\n          break;\n      case 'dueDate':\n          modifiedFilterCurrentState = currentDueDateFilters;\n          modifiedFilterName = 'dueDateFilters';\n          break;\n      case 'classType':\n          modifiedFilterCurrentState = currentClassTypeFilters;\n          modifiedFilterName = 'classTypeFilters';\n          break;\n        default:\n        break;\n    }\n    // Decide whether we're adding or removing the selected filter\n    if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $push: [filter],\n      });\n    } else {\n      const filterIndex = modifiedFilterCurrentState.indexOf(filter);\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $splice: [[ filterIndex, 1 ]],\n      });\n    }\n    this.setState({ [modifiedFilterName]: modifiedFilterUpdatedState });\n  }\n\n  \n  arrayItemRemover = (array, value) => array.filter((lesson) => lesson !== value)\n\n  renderCurrentView = () => {\n    const {active } = this.state;\n    if (active === 'full') {\n      return <FullView lessons={this.getMappableLessons()} onDeleteLesson={this.onDeleteLesson} onCloneLesson={this.onCloneLesson}/>\n    }\n  }\n\n\n  render() {\n    const { currentView, subjectFilters, statusFilters, completeFilters, flagFilters, dueDateFilters, classTypeFilters } = this.state;\n    return (\n      <React.Fragment>\n        <FilterSection\n        currentView={currentView}\n        onChangeView={this.onChangeView}\n        onHandleFilterClick={this.onHandleFilterClick}\n        onClearFilters={this.onClearFilters}\n        onSetFilteredState={this.onSetFilteredState}\n        onUnsetFilteredState={this.onUnsetFilteredState}\n        onSetSort={this.onSetSort}\n        subjectFilters={subjectFilters}\n        statusFilters={statusFilters}\n        completeFilters={completeFilters}\n        flagFilters={flagFilters}\n        dueDateFilters={dueDateFilters}\n        classTypeFilters={classTypeFilters}\n        handleFilterClick={this.handleFilterClick}\n        />\n        {this.renderCurrentView()}\n      <a href=\"#\" className=\"waves-effect waves-teal btn add-btn\"><i className=\"material-icons\">add</i>New Lesson</a>\n      </React.Fragment>\n    )\n  }\n}\n\nDetailLessonList.propTypes = {\n  user: PropTypes.object.isRequired,\n};\n\nexport default DetailLessonList;\n"]},"metadata":{},"sourceType":"module"}