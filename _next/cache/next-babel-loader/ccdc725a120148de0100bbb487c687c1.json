{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/Calendar/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { createStructuredSelector } from 'reselect';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport update from \"immutability-helper\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { StickyContainer } from \"react-sticky\";\nimport FilterSection from \"../../Dashboard/components/FilterSection\";\nimport CalendarHeader from \"../../Dashboard/components/CalendarHeader\";\nimport CalendarRow from \"../../Dashboard/components/CalendarRow\";\nimport AssignSessionModal from \"../../Dashboard/components/Modals/AssignSessionModal\";\nimport AssignTestSectionModal from \"../../Dashboard/components/Modals/AssignTestSectionModal\";\nimport AssignSimulatedSatModal from \"../../Dashboard/components/Modals/AssignSimulatedSATModal\";\nimport AssignTargetTestModal from \"../../Dashboard/components/Modals/AssignTargetTestModal\";\nimport AssignLessonModal from \"../../Dashboard/components/Modals/AssignLessonModal\";\nimport AssignWorksheetModal from '../../Dashboard/components/Modals/AssignWorksheetModal';\nimport { currentYear, getFirstDay, getDaysInActiveMonth, getDaysInPreviousMonth, getDayDate, getNextMonthAsCurrentMonth } from \"../../Dashboard/utils/dateAndCalendarUtils\";\nimport { makeSelectAssignLessonsModalOpen, makeSelectAssignWorkSheetsModalOpen, makeSelectCalendarRows } from '../index/selectors';\nimport { setAssignLessonsModalOpen, setAssignWorksheetModalOpen, setCalendarRows } from '../index/actions';\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Calendar, _Component);\n\n  function Calendar(props) {\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Calendar).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetActiveMonth\", function (activeMonthIndex) {\n      // daysInPreviousMonth is used to handle cases where the calendar for the month starts with dates from the preceding month\n      // firstDay indicates the day the first day of the month falls on in a zero-based index manner, meaning Sunday is 0, Monday is 1, etc\n      var daysInPreviousMonth = getDaysInPreviousMonth(activeMonthIndex);\n      var daysInActiveMonth = getDaysInActiveMonth(activeMonthIndex);\n      var firstDay = getFirstDay(activeMonthIndex);\n      var rows = []; // We increment calDate and change inMonth in the case where dates from the next month appear in row 1 or row 6\n      // Since activeMonthIndex is zero-based, currentMonth adds 1 so the cells are accurate as actual calendar dates\n      // getNextMonthAsCurrentMonth is used to derive the current month to ensure it matches the format of incoming dates - 01/15/19 vs 1/15/19, otherwise new events wouldn't find the date to be assigned to\n\n      var inMonth = true;\n      var calDate = 1;\n      var currentMonth = getNextMonthAsCurrentMonth(activeMonthIndex);\n\n      if (firstDay !== 0) {\n        currentMonth = currentMonth > 9 ? currentMonth -= 1 : \"0\".concat(currentMonth - 1);\n        calDate = daysInPreviousMonth - firstDay + 1;\n        inMonth = false;\n      } // First for loop handles the 6 calendar rows, second for loop handles the 7 days of the week\n\n\n      for (var i = 0; i < 6; i++) {\n        var rowArr = [];\n\n        for (var j = 0; j < 7; j++) {\n          var date = \"\".concat(currentMonth, \"/\").concat(calDate > 9 ? calDate : \"0\".concat(calDate), \"/\").concat(currentYear);\n          var dayDate = getDayDate(date);\n          var activeDateKey = \"row-\".concat(i + 1, \"-column-\").concat(j + 1); // This if statement handles the easiest calendar month scenario, where the 1st of the month falls on a Sunday\n\n          if (firstDay === 0) {\n            var dateCell = {\n              date: date,\n              dayDate: dayDate,\n              calDate: calDate,\n              activeDateKey: activeDateKey,\n              inMonth: inMonth,\n              sessions: [],\n              lessons: [],\n              worksheets: [],\n              testSections: [],\n              simulatedSat: []\n            }; // This if statement handles the case where the date spills over into the next month\n\n            if (calDate === daysInActiveMonth) {\n              calDate = 1;\n              currentMonth = activeMonthIndex > 9 ? activeMonthIndex + 2 : \"0\".concat(activeMonthIndex + 2);\n              inMonth = false;\n            } else {\n              calDate += 1;\n            }\n\n            rowArr.push(dateCell);\n          } // This else statement handles the more likely scenario, where the first row contains several days from the preceding month\n          else {\n              var _dateCell = {\n                date: date,\n                dayDate: dayDate,\n                calDate: calDate,\n                activeDateKey: activeDateKey,\n                inMonth: inMonth,\n                sessions: [],\n                lessons: [],\n                worksheets: [],\n                testSections: [],\n                simulatedSat: []\n              }; // This if statement handles the case where the date spills over into the next month\n\n              if (inMonth === false && calDate === daysInPreviousMonth) {\n                calDate = 1;\n                currentMonth = getNextMonthAsCurrentMonth(activeMonthIndex);\n                inMonth = true;\n              } else if (inMonth === true && calDate === daysInActiveMonth) {\n                currentMonth = activeMonthIndex > 9 ? activeMonthIndex + 2 : \"0\".concat(activeMonthIndex + 2);\n                calDate = 1;\n                inMonth = false;\n              } else {\n                calDate += 1;\n              }\n\n              rowArr.push(_dateCell);\n            }\n        }\n\n        rows.push.apply(rows, rowArr);\n      }\n\n      _this.setState({\n        activeMonth: activeMonthIndex\n      });\n\n      if (_this.props.rows.length === 0) {\n        var onSetCalendarRows = _this.props.onSetCalendarRows;\n        onSetCalendarRows(rows);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetActiveDate\", function (incomingDate) {\n      _this.setState({\n        activeDate: incomingDate,\n        activeColumn: incomingDate[13]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignSession\", function (session) {\n      var rows = _this.props.rows;\n      var updatedDate = rows.filter(function (row) {\n        return row.date === session.date;\n      })[0];\n      var updatedDateIndex = rows.indexOf(updatedDate);\n      updatedDate.sessions.push(session);\n      var updatedRows = update(rows, {\n        $splice: [[updatedDateIndex, 1, updatedDate]]\n      });\n      var onSetCalendarRows = _this.props.onSetCalendarRows;\n      onSetCalendarRows(updatedRows);\n\n      _this.onToggleAssignSessionModal();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignLessons\", function (lessons, date) {\n      var _updatedDate$lessons;\n\n      var rows = _this.props.rows;\n      var updatedDate = rows.filter(function (row) {\n        return row.date === date;\n      })[0];\n      var updatedDateIndex = rows.indexOf(updatedDate);\n\n      (_updatedDate$lessons = updatedDate.lessons).push.apply(_updatedDate$lessons, _toConsumableArray(lessons));\n\n      var updatedRows = update(rows, {\n        $splice: [[updatedDateIndex, 1, updatedDate]]\n      });\n      var onSetCalendarRows = _this.props.onSetCalendarRows;\n      onSetCalendarRows(updatedRows);\n\n      _this.onToggleAssignLessonsModal();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignLessonsModal\", function () {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modalDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      var _this$props = _this.props,\n          onSetAssignLessonsModalOpen = _this$props.onSetAssignLessonsModalOpen,\n          assignLessonsModalOpen = _this$props.assignLessonsModalOpen;\n      onSetAssignLessonsModalOpen(!assignLessonsModalOpen);\n\n      _this.setState({\n        modalDate: modalDate,\n        assignDropdownIsOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignTestSection\", function (testSection) {\n      var rows = _this.props.rows;\n      var updatedDate = rows.filter(function (row) {\n        return row.date === testSection.assignDate;\n      })[0];\n      var updatedDateIndex = rows.indexOf(updatedDate);\n      updatedDate.testSections.push(testSection);\n      var updatedRows = update(rows, {\n        $splice: [[updatedDateIndex, 1, updatedDate]]\n      });\n      var onSetCalendarRows = _this.props.onSetCalendarRows;\n      onSetCalendarRows(updatedRows);\n\n      _this.onToggleAssignTestSectionModal();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignSimulatedSat\", function (simulatedSat) {\n      var rows = _this.props.rows;\n      var updatedDate = rows.filter(function (row) {\n        return row.date === simulatedSat.assignDate;\n      })[0];\n      var updatedDateIndex = rows.indexOf(updatedDate);\n      updatedDate.simulatedSat.push(simulatedSat);\n      var updatedRows = update(rows, {\n        $splice: [[updatedDateIndex, 1, updatedDate]]\n      });\n      var onSetCalendarRows = _this.props.onSetCalendarRows;\n      onSetCalendarRows(updatedRows);\n\n      _this.onToggleAssignSimulatedSatModal();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignTargetTest\", function (targetTestDate) {\n      throw \"pending decision of what test date assign ui looks like\".concat(targetTestDate.toString()); // console.warn(, targetTestDate);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignSessionModal\", function () {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modalDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      _this.setState(function (_ref) {\n        var assignSessionModalOpen = _ref.assignSessionModalOpen;\n        return {\n          assignSessionModalOpen: !assignSessionModalOpen,\n          modalDate: modalDate,\n          assignDropdownIsOpen: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignTestSectionModal\", function () {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modalDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      _this.setState(function (_ref2) {\n        var assignTestSectionModalOpen = _ref2.assignTestSectionModalOpen;\n        return {\n          assignTestSectionModalOpen: !assignTestSectionModalOpen,\n          modalDate: modalDate,\n          assignDropdownIsOpen: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignSimulatedSatModal\", function () {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modalDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      _this.setState(function (_ref3) {\n        var assignSimulatedSatModalOpen = _ref3.assignSimulatedSatModalOpen;\n        return {\n          assignSimulatedSatModalOpen: !assignSimulatedSatModalOpen,\n          modalDate: modalDate,\n          assignDropdownIsOpen: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignTargetTestModal\", function () {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      _this.setState(function (_ref4) {\n        var assignTargetTestDateModalOpen = _ref4.assignTargetTestDateModalOpen;\n        return {\n          assignTargetTestDateModalOpen: !assignTargetTestDateModalOpen,\n          assignDropdownIsOpen: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAddDropdown\", function () {\n      return _this.setState(function (_ref5) {\n        var addDropdownOpen = _ref5.addDropdownOpen;\n        return {\n          addDropdownOpen: !addDropdownOpen,\n          deleteDropdownOpen: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleDeleteDropdown\", function () {\n      return _this.setState(function (_ref6) {\n        var deleteDropdownOpen = _ref6.deleteDropdownOpen;\n        return {\n          deleteDropdownOpen: !deleteDropdownOpen,\n          addDropdownOpen: false\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignDropdown\", function () {\n      return _this.setState(function (_ref7) {\n        var assignDropdownIsOpen = _ref7.assignDropdownIsOpen;\n        return {\n          assignDropdownIsOpen: !assignDropdownIsOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleHandleFilteredItemsDropdown\", function () {\n      return _this.setState(function (_ref8) {\n        var onToggleHandleFilteredItemsDropdown = _ref8.onToggleHandleFilteredItemsDropdown;\n        return {\n          onToggleHandleFilteredItemsDropdown: !onToggleHandleFilteredItemsDropdown\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClearFilters\", function () {\n      return _this.setState({\n        filters: [],\n        eventFilters: []\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onHandleDetailsChange\", function (name, event) {\n      return _this.setState(_defineProperty({}, name, event.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragEnd\", function (result) {\n      var rows = _this.props.rows;\n      var source = result.source,\n          destination = result.destination,\n          draggableId = result.draggableId; // The following draggable vars are pulled from the dragged item to identify the event type (lesson, worksheet, etc), date, and index in that date's array of that type of event\n\n      var draggableKeys = draggableId.split(\"-\");\n      var draggableType = draggableKeys[0];\n      var draggableIndex = draggableKeys[2]; // If the event isn't switching dates, we return out of the function early and do nothing\n\n      if (!destination || source.droppableId === destination.droppableId) {\n        return;\n      } // The follwing sourceDate and destinationDate vars are used to find the dates being modified and their index in the month of calendar dates\n\n\n      var sourceDateKey = source.droppableId.split(\"-\")[1];\n      var destinationDateKey = destination.droppableId.split(\"-\")[1];\n      var sourceDate = rows.filter(function (row) {\n        return row.date === sourceDateKey;\n      })[0];\n      var destinationDate = rows.filter(function (row) {\n        return row.date === destinationDateKey;\n      })[0];\n      var sourceDateIndex = rows.indexOf(sourceDate);\n      var destinationDateIndex = rows.indexOf(destinationDate); // Here we target the event being moved, alter its date to that of the destintion, splice it from the source and push it to the destination\n      // Finally, we perform two splice operations to replace the old source and destination dates with their updated equivalents\n\n      var movedEvent = sourceDate[draggableType][draggableIndex];\n      movedEvent.date = destinationDate.date;\n      sourceDate[draggableType].splice(draggableIndex, 1);\n      destinationDate[draggableType].push(movedEvent);\n      var updatedRows = update(rows, {\n        $splice: [+[sourceDateIndex, 1, sourceDate], [destinationDateIndex, 1, destinationDate]]\n      });\n      var onSetCalendarRows = _this.props.onSetCalendarRows;\n      onSetCalendarRows(updatedRows);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterClick\", function (filter) {\n      var eventFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      // TODO: Only the following filters are active: sessions, lessons, worksheets, test sections, simulated sats, target tests\n      // The other filters dont seem to have corresponding data in this page\n      var _this$state = _this.state,\n          allFilters = _this$state.filters,\n          eventFilters = _this$state.eventFilters;\n      var filters;\n      var filterName;\n\n      if (eventFilter) {\n        filters = eventFilters;\n        filterName = \"eventFilters\";\n      } else {\n        filters = allFilters;\n        filterName = \"filters\";\n      }\n\n      var updatedFilters;\n\n      if (filters.indexOf(filter) === -1) {\n        updatedFilters = update(filters, {\n          $push: [filter]\n        });\n      } else {\n        var filterIndex = filters.indexOf(filter);\n        updatedFilters = update(filters, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, filterName, updatedFilters));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignWorksheetsModal\", function () {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modalDate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (event) {\n        event.preventDefault();\n      }\n\n      _this.setState({\n        modalDate: modalDate,\n        assignDropdownIsOpen: false\n      });\n\n      var _this$props2 = _this.props,\n          onSetAssignWorksheetModalOpen = _this$props2.onSetAssignWorksheetModalOpen,\n          assignWorkSheetsModalOpen = _this$props2.assignWorkSheetsModalOpen;\n      onSetAssignWorksheetModalOpen(!assignWorkSheetsModalOpen);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignWorksheets\", function (worksheets, date) {\n      var _updatedDate$workshee;\n\n      var rows = _this.props.rows;\n      var updatedDate = rows.filter(function (row) {\n        return row.date === date;\n      })[0];\n      var updatedDateIndex = rows.indexOf(updatedDate);\n\n      (_updatedDate$workshee = updatedDate.worksheets).push.apply(_updatedDate$workshee, _toConsumableArray(worksheets));\n\n      var updatedRows = update(rows, {\n        $splice: [[updatedDateIndex, 1, updatedDate]]\n      });\n      var onSetCalendarRows = _this.props.onSetCalendarRows;\n      onSetCalendarRows(updatedRows);\n\n      _this.onToggleAssignWorksheetsModal();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapRows\", function () {\n      var _this$state2 = _this.state,\n          filters = _this$state2.filters,\n          eventFilters = _this$state2.eventFilters,\n          activeDate = _this$state2.activeDate,\n          activeColumn = _this$state2.activeColumn,\n          addDropdownOpen = _this$state2.addDropdownOpen,\n          deleteDropdownOpen = _this$state2.deleteDropdownOpen;\n      var rows = _this.props.rows;\n      var startIndex = -7;\n      var endIndex = 0;\n      var rowArray = [];\n\n      for (var i = 0; i < 6; i++) {\n        startIndex += 7;\n        endIndex += 7;\n        rowArray.push(__jsx(CalendarRow, {\n          key: i,\n          rows: rows.slice(startIndex, endIndex),\n          filters: filters,\n          eventFilters: eventFilters,\n          activeDate: activeDate,\n          activeColumn: activeColumn,\n          addDropdownOpen: addDropdownOpen,\n          deleteDropdownOpen: deleteDropdownOpen,\n          onSetActiveDate: _this.onSetActiveDate,\n          onToggleAddDropdown: _this.onToggleAddDropdown,\n          onToggleDeleteDropdown: _this.onToggleDeleteDropdown,\n          onToggleAssignLessonsModal: _this.onToggleAssignLessonsModal,\n          onToggleAssignSessionModal: _this.onToggleAssignSessionModal,\n          onToggleAssignWorksheetsModal: _this.onToggleAssignWorksheetsModal,\n          onToggleAssignTestSectionModal: _this.onToggleAssignTestSectionModal,\n          onToggleAssignSimulatedSatModal: _this.onToggleAssignSimulatedSatModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419\n          },\n          __self: this\n        }));\n      }\n\n      return rowArray;\n    });\n\n    _this.state = {\n      activeMonth: '',\n      filters: [],\n      eventFilters: [],\n      activeDate: null,\n      activeColumn: null,\n      addDropdownOpen: false,\n      deleteDropdownOpen: false,\n      assignDropdownIsOpen: false,\n      onToggleHandleFilteredItemsDropdown: false,\n      assignSessionModalOpen: false,\n      assignTestSectionModalOpen: false,\n      assignSimulatedSatModalOpen: false,\n      assignTargetTestDateModalOpen: false,\n      assignLessonsModalOpen: false,\n      assignWorksheetsModalOpen: false,\n      modalDate: null,\n      accountActivated: false,\n      activationDropdownOpen: false,\n      licenseCode: ''\n    };\n    return _this;\n  } // This is called onMount in CalendarHeader component to set the current month calendar rows, and every time the month changes afterward\n  // IMPORTANT: activeMonthIndex is zero-based, meaning January is 0, February is 1, etc.\n\n\n  _createClass(Calendar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          assignSessionModalOpen = _this$state3.assignSessionModalOpen,\n          activeMonth = _this$state3.activeMonth,\n          assignTestSectionModalOpen = _this$state3.assignTestSectionModalOpen,\n          assignSimulatedSatModalOpen = _this$state3.assignSimulatedSatModalOpen,\n          assignTargetTestDateModalOpen = _this$state3.assignTargetTestDateModalOpen,\n          modalDate = _this$state3.modalDate,\n          assignDropdownIsOpen = _this$state3.assignDropdownIsOpen,\n          onToggleHandleFilteredItemsDropdown = _this$state3.onToggleHandleFilteredItemsDropdown,\n          filters = _this$state3.filters,\n          eventFilters = _this$state3.eventFilters;\n      var _this$props3 = this.props,\n          assignLessonsModalOpen = _this$props3.assignLessonsModalOpen,\n          assignWorkSheetsModalOpen = _this$props3.assignWorkSheetsModalOpen;\n      return __jsx(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460\n        },\n        __self: this\n      }, assignLessonsModalOpen ? __jsx(AssignLessonModal, {\n        modalDate: modalDate,\n        open: assignLessonsModalOpen,\n        onClose: this.onToggleAssignLessonsModal,\n        onAssignLessons: this.onAssignLessons,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }) : assignWorkSheetsModalOpen ? __jsx(AssignWorksheetModal, {\n        modalDate: modalDate,\n        open: assignWorkSheetsModalOpen,\n        onClose: this.onToggleAssignWorksheetsModal,\n        onAssignWorksheets: this.onAssignWorksheets,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471\n        },\n        __self: this\n      }) : [__jsx(AssignSessionModal, {\n        modalDate: modalDate,\n        open: assignSessionModalOpen,\n        onClose: this.onToggleAssignSessionModal,\n        onAssignSession: this.onAssignSession,\n        key: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479\n        },\n        __self: this\n      }), __jsx(AssignTestSectionModal, {\n        modalDate: modalDate,\n        open: assignTestSectionModalOpen,\n        onClose: this.onToggleAssignTestSectionModal,\n        onAssignTestSection: this.onAssignTestSection,\n        user: this.props.user,\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485\n        },\n        __self: this\n      }), __jsx(AssignSimulatedSatModal, {\n        modalDate: modalDate,\n        open: assignSimulatedSatModalOpen,\n        onClose: this.onToggleAssignSimulatedSatModal,\n        onAssignSimulatedSat: this.onAssignSimulatedSat,\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492\n        },\n        __self: this\n      }), __jsx(AssignTargetTestModal, {\n        open: assignTargetTestDateModalOpen,\n        onClose: this.onToggleAssignTargetTestModal,\n        onAssignTargetTest: this.onAssignTargetTest,\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      }), __jsx(StickyContainer, {\n        key: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }, __jsx(FilterSection, {\n        filters: filters,\n        eventFilters: eventFilters,\n        onClearFilters: this.onClearFilters,\n        handleFilterClick: this.handleFilterClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        className: \"calendar-section view-month\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"calendar-slider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, __jsx(CalendarHeader, {\n        activeMonth: Number(activeMonth),\n        onSetActiveMonth: this.onSetActiveMonth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        id: \"calendar\",\n        className: \"main-slick-calendar cal-context\",\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"slide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521\n        },\n        __self: this\n      }, __jsx(\"table\", {\n        className: \"calendar-table cal-month-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, __jsx(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      }, __jsx(\"tr\", {\n        className: \"calendar-head-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, \"Su\"), __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526\n        },\n        __self: this\n      }, \"M\"), __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, \"Tu\"), __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }, \"W\"), __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, \"Th\"), __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }, \"F\"), __jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531\n        },\n        __self: this\n      }, \"Sa\"))), __jsx(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }, __jsx(DragDropContext, {\n        onDragEnd: this.onDragEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535\n        },\n        __self: this\n      }, this.mapRows()))))), __jsx(\"div\", {\n        className: \"add-btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        \"data-target\": \"dropdown_assign\",\n        onClick: this.onToggleAssignDropdown,\n        className: \"dropdown-trigger waves-effect waves-teal btn add-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543\n        },\n        __self: this\n      }, \"Assign...\"), __jsx(\"ul\", {\n        id: \"dropdown_assign\",\n        className: \"dropdown-content\",\n        style: {\n          display: assignDropdownIsOpen ? \"block\" : \"none\",\n          opacity: assignDropdownIsOpen ? \"100\" : \"0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551\n        },\n        __self: this\n      }, __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onToggleAssignSessionModal,\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560\n        },\n        __self: this\n      }, \"Session\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 568\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onToggleAssignLessonsModal,\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569\n        },\n        __self: this\n      }, \"Lesson\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onToggleAssignWorksheetsModal,\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578\n        },\n        __self: this\n      }, \"Worksheet\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onToggleAssignTestSectionModal,\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587\n        },\n        __self: this\n      }, \"Test Section\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 595\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onToggleAssignSimulatedSatModal,\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596\n        },\n        __self: this\n      }, \"Simulated SAT\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onToggleAssignTargetTestModal,\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605\n        },\n        __self: this\n      }, \"Target Test\")), __jsx(\"li\", {\n        className: \"divider\",\n        tabIndex: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613\n        },\n        __self: this\n      }), __jsx(\"li\", {\n        className: \"dropdown-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615\n        },\n        __self: this\n      }, \"Apply Course Template\")))), __jsx(\"div\", {\n        className: \"add-btn-block btn-block-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        \"data-target\": \"dropdown_other\",\n        onClick: this.onToggleHandleFilteredItemsDropdown,\n        className: \"dropdown-trigger waves-effect waves-teal btn add-btn-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622\n        },\n        __self: this\n      }, __jsx(\"i\", {\n        className: \"icon-dots\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628\n        },\n        __self: this\n      })), __jsx(\"ul\", {\n        id: \"dropdown_other\",\n        className: \"dropdown-content\",\n        style: {\n          display: onToggleHandleFilteredItemsDropdown ? \"block\" : \"none\",\n          opacity: onToggleHandleFilteredItemsDropdown ? \"100\" : \"0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630\n        },\n        __self: this\n      }, __jsx(\"li\", {\n        className: \"dropdown-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 640\n        },\n        __self: this\n      }, __jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, \"With Filtered Items... \"), __jsx(\"b\", {\n        className: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, \"(items currently visible on calendar)\")), __jsx(\"li\", {\n        className: \"divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646\n        },\n        __self: this\n      }), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        className: \"modal-trigger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 648\n        },\n        __self: this\n      }, \"Save Course as Template\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653\n        },\n        __self: this\n      }, \"Reset All\")), __jsx(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 655\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: \"#\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 656\n        },\n        __self: this\n      }, \"Delete All\")))))))]);\n    }\n  }]);\n\n  return Calendar;\n}(Component);\n\nCalendar.propTypes = {\n  assignLessonsModalOpen: PropTypes.bool.isRequired,\n  assignWorkSheetsModalOpen: PropTypes.bool.isRequired,\n  onSetAssignLessonsModalOpen: PropTypes.func.isRequired,\n  onSetAssignWorksheetModalOpen: PropTypes.func.isRequired,\n  onSetCalendarRows: PropTypes.func.isRequired,\n  rows: PropTypes.array.isRequired,\n  user: PropTypes.object.isRequired\n};\nvar mapStateToProps = createStructuredSelector({\n  assignLessonsModalOpen: makeSelectAssignLessonsModalOpen(),\n  assignWorkSheetsModalOpen: makeSelectAssignWorkSheetsModalOpen(),\n  rows: makeSelectCalendarRows()\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onSetAssignLessonsModalOpen: function onSetAssignLessonsModalOpen(value) {\n      return dispatch(setAssignLessonsModalOpen(value));\n    },\n    onSetAssignWorksheetModalOpen: function onSetAssignWorksheetModalOpen(value) {\n      return dispatch(setAssignWorksheetModalOpen(value));\n    },\n    onSetCalendarRows: function onSetCalendarRows(rows) {\n      return dispatch(setCalendarRows(rows));\n    }\n  };\n}\n\nvar withConnect = connect(mapStateToProps, mapDispatchToProps);\nexport default compose(withConnect)(Calendar);","map":{"version":3,"sources":["/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/Calendar/index.js"],"names":["React","Component","PropTypes","createStructuredSelector","compose","connect","update","DragDropContext","StickyContainer","FilterSection","CalendarHeader","CalendarRow","AssignSessionModal","AssignTestSectionModal","AssignSimulatedSatModal","AssignTargetTestModal","AssignLessonModal","AssignWorksheetModal","currentYear","getFirstDay","getDaysInActiveMonth","getDaysInPreviousMonth","getDayDate","getNextMonthAsCurrentMonth","makeSelectAssignLessonsModalOpen","makeSelectAssignWorkSheetsModalOpen","makeSelectCalendarRows","setAssignLessonsModalOpen","setAssignWorksheetModalOpen","setCalendarRows","Calendar","props","activeMonthIndex","daysInPreviousMonth","daysInActiveMonth","firstDay","rows","inMonth","calDate","currentMonth","i","rowArr","j","date","dayDate","activeDateKey","dateCell","sessions","lessons","worksheets","testSections","simulatedSat","push","setState","activeMonth","length","onSetCalendarRows","incomingDate","activeDate","activeColumn","session","updatedDate","filter","row","updatedDateIndex","indexOf","updatedRows","$splice","onToggleAssignSessionModal","onToggleAssignLessonsModal","event","modalDate","preventDefault","onSetAssignLessonsModalOpen","assignLessonsModalOpen","assignDropdownIsOpen","testSection","assignDate","onToggleAssignTestSectionModal","onToggleAssignSimulatedSatModal","targetTestDate","toString","assignSessionModalOpen","assignTestSectionModalOpen","assignSimulatedSatModalOpen","assignTargetTestDateModalOpen","addDropdownOpen","deleteDropdownOpen","onToggleHandleFilteredItemsDropdown","filters","eventFilters","name","target","value","result","source","destination","draggableId","draggableKeys","split","draggableType","draggableIndex","droppableId","sourceDateKey","destinationDateKey","sourceDate","destinationDate","sourceDateIndex","destinationDateIndex","movedEvent","splice","eventFilter","state","allFilters","filterName","updatedFilters","$push","filterIndex","onSetAssignWorksheetModalOpen","assignWorkSheetsModalOpen","onToggleAssignWorksheetsModal","startIndex","endIndex","rowArray","slice","onSetActiveDate","onToggleAddDropdown","onToggleDeleteDropdown","assignWorksheetsModalOpen","accountActivated","activationDropdownOpen","licenseCode","onAssignLessons","onAssignWorksheets","onAssignSession","onAssignTestSection","user","onAssignSimulatedSat","onToggleAssignTargetTestModal","onAssignTargetTest","onClearFilters","handleFilterClick","Number","onSetActiveMonth","width","onDragEnd","mapRows","onToggleAssignDropdown","display","opacity","propTypes","bool","isRequired","func","array","object","mapStateToProps","mapDispatchToProps","dispatch","withConnect"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { createStructuredSelector } from 'reselect';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport update from \"immutability-helper\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { StickyContainer } from \"react-sticky\";\nimport FilterSection from \"../../Dashboard/components/FilterSection\";\nimport CalendarHeader from \"../../Dashboard/components/CalendarHeader\";\nimport CalendarRow from \"../../Dashboard/components/CalendarRow\";\n\nimport AssignSessionModal from \"../../Dashboard/components/Modals/AssignSessionModal\";\nimport AssignTestSectionModal from \"../../Dashboard/components/Modals/AssignTestSectionModal\";\nimport AssignSimulatedSatModal from \"../../Dashboard/components/Modals/AssignSimulatedSATModal\";\nimport AssignTargetTestModal from \"../../Dashboard/components/Modals/AssignTargetTestModal\";\nimport AssignLessonModal from \"../../Dashboard/components/Modals/AssignLessonModal\";\nimport AssignWorksheetModal from '../../Dashboard/components/Modals/AssignWorksheetModal';\n\nimport {\n  currentYear,\n  getFirstDay,\n  getDaysInActiveMonth,\n  getDaysInPreviousMonth,\n  getDayDate,\n  getNextMonthAsCurrentMonth,\n} from \"../../Dashboard/utils/dateAndCalendarUtils\";\n\n\nimport {\n  makeSelectAssignLessonsModalOpen,\n  makeSelectAssignWorkSheetsModalOpen,\n  makeSelectCalendarRows,\n} from '../index/selectors';\n\nimport {\n  setAssignLessonsModalOpen,\n  setAssignWorksheetModalOpen,\n  setCalendarRows,\n} from '../index/actions';\n\nclass Calendar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeMonth: '',\n      filters: [],\n      eventFilters: [],\n      activeDate: null,\n      activeColumn: null,\n      addDropdownOpen: false,\n      deleteDropdownOpen: false,\n      assignDropdownIsOpen: false,\n      onToggleHandleFilteredItemsDropdown: false,\n      assignSessionModalOpen: false,\n      assignTestSectionModalOpen: false,\n      assignSimulatedSatModalOpen: false,\n      assignTargetTestDateModalOpen: false,\n      assignLessonsModalOpen: false,\n      assignWorksheetsModalOpen: false,\n      modalDate: null,\n      accountActivated: false,\n      activationDropdownOpen: false,\n      licenseCode: '',\n    };\n  }\n\n\n  // This is called onMount in CalendarHeader component to set the current month calendar rows, and every time the month changes afterward\n  // IMPORTANT: activeMonthIndex is zero-based, meaning January is 0, February is 1, etc.\n  onSetActiveMonth = activeMonthIndex => {\n    // daysInPreviousMonth is used to handle cases where the calendar for the month starts with dates from the preceding month\n    // firstDay indicates the day the first day of the month falls on in a zero-based index manner, meaning Sunday is 0, Monday is 1, etc\n    const daysInPreviousMonth = getDaysInPreviousMonth(activeMonthIndex);\n    const daysInActiveMonth = getDaysInActiveMonth(activeMonthIndex);\n    const firstDay = getFirstDay(activeMonthIndex);\n    const rows = [];\n\n    // We increment calDate and change inMonth in the case where dates from the next month appear in row 1 or row 6\n    // Since activeMonthIndex is zero-based, currentMonth adds 1 so the cells are accurate as actual calendar dates\n    // getNextMonthAsCurrentMonth is used to derive the current month to ensure it matches the format of incoming dates - 01/15/19 vs 1/15/19, otherwise new events wouldn't find the date to be assigned to\n    let inMonth = true;\n    let calDate = 1;\n    let currentMonth = getNextMonthAsCurrentMonth(activeMonthIndex);\n    if (firstDay !== 0) {\n      currentMonth =\n        currentMonth > 9 ? (currentMonth -= 1) : `0${currentMonth - 1}`;\n      calDate = daysInPreviousMonth - firstDay + 1;\n      inMonth = false;\n    }\n    // First for loop handles the 6 calendar rows, second for loop handles the 7 days of the week\n    for (let i = 0; i < 6; i++) {\n      const rowArr = [];\n      for (let j = 0; j < 7; j++) {\n        const date = `${currentMonth}/${\n          calDate > 9 ? calDate : `0${calDate}`\n        }/${currentYear}`;\n        const dayDate = getDayDate(date);\n        const activeDateKey = `row-${i + 1}-column-${j + 1}`;\n        // This if statement handles the easiest calendar month scenario, where the 1st of the month falls on a Sunday\n        if (firstDay === 0) {\n          const dateCell = {\n            date,\n            dayDate,\n            calDate,\n            activeDateKey,\n            inMonth,\n            sessions: [],\n            lessons: [],\n            worksheets: [],\n            testSections: [],\n            simulatedSat: [],\n          };\n          // This if statement handles the case where the date spills over into the next month\n          if (calDate === daysInActiveMonth) {\n            calDate = 1;\n            currentMonth =\n              activeMonthIndex > 9\n                ? activeMonthIndex + 2\n                : `0${activeMonthIndex + 2}`;\n            inMonth = false;\n          } else {\n            calDate += 1;\n          }\n          rowArr.push(dateCell);\n        }\n        // This else statement handles the more likely scenario, where the first row contains several days from the preceding month\n        else {\n          const dateCell = {\n            date,\n            dayDate,\n            calDate,\n            activeDateKey,\n            inMonth,\n            sessions: [],\n            lessons: [],\n            worksheets: [],\n            testSections: [],\n            simulatedSat: [],\n          };\n          // This if statement handles the case where the date spills over into the next month\n          if (inMonth === false && calDate === daysInPreviousMonth) {\n            calDate = 1;\n            currentMonth = getNextMonthAsCurrentMonth(activeMonthIndex);\n            inMonth = true;\n          } else if (inMonth === true && calDate === daysInActiveMonth) {\n            currentMonth =\n              activeMonthIndex > 9\n                ? activeMonthIndex + 2\n                : `0${activeMonthIndex + 2}`;\n            calDate = 1;\n            inMonth = false;\n          } else {\n            calDate += 1;\n          }\n          rowArr.push(dateCell);\n        }\n      }\n      rows.push(...rowArr);\n    }\n    this.setState({ activeMonth: activeMonthIndex });\n    if (this.props.rows.length === 0) {\n      const { onSetCalendarRows } = this.props;\n      onSetCalendarRows(rows);\n    }\n  };\n\n  onSetActiveDate = incomingDate => {\n    this.setState({ activeDate: incomingDate, activeColumn: incomingDate[13] });\n  };\n\n  onAssignSession = session => {\n    const { rows } = this.props;\n    const updatedDate = rows.filter(row => row.date === session.date)[0];\n    const updatedDateIndex = rows.indexOf(updatedDate);\n    updatedDate.sessions.push(session);\n    const updatedRows = update(rows, {\n      $splice: [[updatedDateIndex, 1, updatedDate]],\n    });\n    const { onSetCalendarRows } = this.props;\n    onSetCalendarRows(updatedRows);\n    this.onToggleAssignSessionModal();\n  };\n\n\n  onAssignLessons = (lessons, date) => {\n    const { rows } = this.props;\n    const updatedDate = rows.filter(row => row.date === date)[0];\n    const updatedDateIndex = rows.indexOf(updatedDate);\n    updatedDate.lessons.push(...lessons);\n    const updatedRows = update(rows, {\n      $splice: [[updatedDateIndex, 1, updatedDate]],\n    });\n    const { onSetCalendarRows } = this.props;\n    onSetCalendarRows(updatedRows);\n    this.onToggleAssignLessonsModal();\n  };\n\n  onToggleAssignLessonsModal = (event = null, modalDate = null) => {\n    if (event) {\n      event.preventDefault();\n    }\n    const { onSetAssignLessonsModalOpen, assignLessonsModalOpen } = this.props;\n    onSetAssignLessonsModalOpen(!assignLessonsModalOpen);\n    this.setState({ modalDate, assignDropdownIsOpen: false });\n  };\n\n  onAssignTestSection = testSection => {\n    const { rows } = this.props;\n    const updatedDate = rows.filter(row => row.date === testSection.assignDate)[0];\n    const updatedDateIndex = rows.indexOf(updatedDate);\n    updatedDate.testSections.push(testSection);\n    const updatedRows = update(rows, {\n      $splice: [[updatedDateIndex, 1, updatedDate]],\n    });\n    const { onSetCalendarRows } = this.props;\n    onSetCalendarRows(updatedRows);\n    this.onToggleAssignTestSectionModal();\n  };\n\n  onAssignSimulatedSat = simulatedSat => {\n    const { rows } = this.props;\n    const updatedDate = rows.filter(\n      row => row.date === simulatedSat.assignDate\n    )[0];\n    const updatedDateIndex = rows.indexOf(updatedDate);\n    updatedDate.simulatedSat.push(simulatedSat);\n    const updatedRows = update(rows, {\n      $splice: [[updatedDateIndex, 1, updatedDate]],\n    });\n    const { onSetCalendarRows } = this.props;\n    onSetCalendarRows(updatedRows);\n    this.onToggleAssignSimulatedSatModal();\n  };\n\n  onAssignTargetTest = targetTestDate => {\n    throw `pending decision of what test date assign ui looks like${targetTestDate.toString()}`;\n    // console.warn(, targetTestDate);\n  };\n\n  onToggleAssignSessionModal = (event = null, modalDate = null) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState(({ assignSessionModalOpen }) => ({\n      assignSessionModalOpen: !assignSessionModalOpen,\n      modalDate,\n      assignDropdownIsOpen: false,\n    }));\n  };\n\n  onToggleAssignTestSectionModal = (event = null, modalDate = null) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState(({ assignTestSectionModalOpen }) => ({\n      assignTestSectionModalOpen: !assignTestSectionModalOpen,\n      modalDate,\n      assignDropdownIsOpen: false,\n    }));\n  };\n\n  onToggleAssignSimulatedSatModal = (event = null, modalDate = null) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState(({ assignSimulatedSatModalOpen }) => ({\n      assignSimulatedSatModalOpen: !assignSimulatedSatModalOpen,\n      modalDate,\n      assignDropdownIsOpen: false,\n    }));\n  };\n\n  onToggleAssignTargetTestModal = (event = null) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState(({ assignTargetTestDateModalOpen }) => ({\n      assignTargetTestDateModalOpen: !assignTargetTestDateModalOpen,\n      assignDropdownIsOpen: false,\n    }));\n  };\n\n  onToggleAddDropdown = () =>\n    this.setState(({ addDropdownOpen }) => ({\n      addDropdownOpen: !addDropdownOpen,\n      deleteDropdownOpen: false,\n    }));\n  onToggleDeleteDropdown = () =>\n    this.setState(({ deleteDropdownOpen }) => ({\n      deleteDropdownOpen: !deleteDropdownOpen,\n      addDropdownOpen: false,\n    }));\n\n  onToggleAssignDropdown = () =>\n    this.setState(({ assignDropdownIsOpen }) => ({\n      assignDropdownIsOpen: !assignDropdownIsOpen,\n    }));\n  onToggleHandleFilteredItemsDropdown = () =>\n    this.setState(({ onToggleHandleFilteredItemsDropdown }) => ({\n      onToggleHandleFilteredItemsDropdown: !onToggleHandleFilteredItemsDropdown,\n    }));\n\n  onClearFilters = () => this.setState({ filters: [], eventFilters: [] });\n\n  onHandleDetailsChange = (name, event) =>\n    this.setState({ [name]: event.target.value });\n\n  onDragEnd = result => {\n    const { rows } = this.props;\n    const { source, destination, draggableId } = result;\n    // The following draggable vars are pulled from the dragged item to identify the event type (lesson, worksheet, etc), date, and index in that date's array of that type of event\n    const draggableKeys = draggableId.split(\"-\");\n    const draggableType = draggableKeys[0];\n    const draggableIndex = draggableKeys[2];\n\n    // If the event isn't switching dates, we return out of the function early and do nothing\n    if (!destination || source.droppableId === destination.droppableId) {\n      return;\n    }\n\n    // The follwing sourceDate and destinationDate vars are used to find the dates being modified and their index in the month of calendar dates\n    const sourceDateKey = source.droppableId.split(\"-\")[1];\n    const destinationDateKey = destination.droppableId.split(\"-\")[1];\n\n    const sourceDate = rows.filter(row => row.date === sourceDateKey)[0];\n    const destinationDate = rows.filter(\n      row => row.date === destinationDateKey\n    )[0];\n\n    const sourceDateIndex = rows.indexOf(sourceDate);\n    const destinationDateIndex = rows.indexOf(destinationDate);\n\n    // Here we target the event being moved, alter its date to that of the destintion, splice it from the source and push it to the destination\n    // Finally, we perform two splice operations to replace the old source and destination dates with their updated equivalents\n    const movedEvent = sourceDate[draggableType][draggableIndex];\n    movedEvent.date = destinationDate.date;\n    sourceDate[draggableType].splice(draggableIndex, 1);\n    destinationDate[draggableType].push(movedEvent);\n    const updatedRows = update(rows, {\n      $splice: [+[sourceDateIndex, 1, sourceDate],\n        [destinationDateIndex, 1, destinationDate],\n      ],\n    });\n    const { onSetCalendarRows } = this.props;\n    onSetCalendarRows(updatedRows);\n  };\n\n  handleFilterClick = (filter, eventFilter = false) => {\n    // TODO: Only the following filters are active: sessions, lessons, worksheets, test sections, simulated sats, target tests\n    // The other filters dont seem to have corresponding data in this page\n    const { filters: allFilters, eventFilters } = this.state;\n    let filters;\n    let filterName;\n    if (eventFilter) {\n      filters = eventFilters;\n      filterName = \"eventFilters\";\n    } else {\n      filters = allFilters;\n      filterName = \"filters\";\n    }\n    let updatedFilters;\n    if (filters.indexOf(filter) === -1) {\n      updatedFilters = update(filters, {\n        $push: [filter],\n      });\n    } else {\n      const filterIndex = filters.indexOf(filter);\n      updatedFilters = update(filters, {\n        $splice: [[filterIndex, 1]],\n      });\n    }\n    this.setState({ [filterName]: updatedFilters });\n  };\n\n\n  onToggleAssignWorksheetsModal = (event = null, modalDate = null) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ modalDate, assignDropdownIsOpen: false });\n    const { onSetAssignWorksheetModalOpen, assignWorkSheetsModalOpen } = this.props;\n    onSetAssignWorksheetModalOpen(!assignWorkSheetsModalOpen);\n  };\n\n  onAssignWorksheets = (worksheets, date) => {\n    const { rows } = this.props;\n    const updatedDate = rows.filter(row => row.date === date)[0];\n    const updatedDateIndex = rows.indexOf(updatedDate);\n    updatedDate.worksheets.push(...worksheets);\n    const updatedRows = update(rows, {\n      $splice: [[updatedDateIndex, 1, updatedDate]],\n    });\n    const { onSetCalendarRows } = this.props;\n    onSetCalendarRows(updatedRows);\n    this.onToggleAssignWorksheetsModal();\n  };\n\n\n  mapRows = () => {\n    const {\n      filters,\n      eventFilters,\n      activeDate,\n      activeColumn,\n      addDropdownOpen,\n      deleteDropdownOpen,\n    } = this.state;\n    const {\n      rows,\n    } = this.props;\n    let startIndex = -7;\n    let endIndex = 0;\n    const rowArray = [];\n    for (let i = 0; i < 6; i++) {\n      startIndex += 7;\n      endIndex += 7;\n      rowArray.push(\n        <CalendarRow\n          key={i}\n          rows={rows.slice(startIndex, endIndex)}\n          filters={filters}\n          eventFilters={eventFilters}\n          activeDate={activeDate}\n          activeColumn={activeColumn}\n          addDropdownOpen={addDropdownOpen}\n          deleteDropdownOpen={deleteDropdownOpen}\n          onSetActiveDate={this.onSetActiveDate}\n          onToggleAddDropdown={this.onToggleAddDropdown}\n          onToggleDeleteDropdown={this.onToggleDeleteDropdown}\n          onToggleAssignLessonsModal={this.onToggleAssignLessonsModal}\n          onToggleAssignSessionModal={this.onToggleAssignSessionModal}\n          onToggleAssignWorksheetsModal={this.onToggleAssignWorksheetsModal}\n          onToggleAssignTestSectionModal={this.onToggleAssignTestSectionModal}\n          onToggleAssignSimulatedSatModal={this.onToggleAssignSimulatedSatModal}\n        />\n      );\n    }\n    return rowArray;\n  };\n\n  render() {\n    const {\n      assignSessionModalOpen,\n      activeMonth,\n      assignTestSectionModalOpen,\n      assignSimulatedSatModalOpen,\n      assignTargetTestDateModalOpen,\n      modalDate,\n      assignDropdownIsOpen,\n      onToggleHandleFilteredItemsDropdown,\n      filters,\n      eventFilters,\n    } = this.state;\n    const {\n      assignLessonsModalOpen,\n      assignWorkSheetsModalOpen,\n    } = this.props;\n    return (\n      <React.Fragment>\n        <Choose>\n          <When condition={assignLessonsModalOpen}>\n            <AssignLessonModal\n              modalDate={modalDate}\n              open={assignLessonsModalOpen}\n              onClose={this.onToggleAssignLessonsModal}\n              onAssignLessons={this.onAssignLessons}\n            />\n          </When>\n          <When condition={assignWorkSheetsModalOpen}>\n            <AssignWorksheetModal\n              modalDate={modalDate}\n              open={assignWorkSheetsModalOpen}\n              onClose={this.onToggleAssignWorksheetsModal}\n              onAssignWorksheets={this.onAssignWorksheets}\n            />\n          </When>\n          <Otherwise>\n            <AssignSessionModal\n              modalDate={modalDate}\n              open={assignSessionModalOpen}\n              onClose={this.onToggleAssignSessionModal}\n              onAssignSession={this.onAssignSession}\n            />\n            <AssignTestSectionModal\n              modalDate={modalDate}\n              open={assignTestSectionModalOpen}\n              onClose={this.onToggleAssignTestSectionModal}\n              onAssignTestSection={this.onAssignTestSection}\n              user = {this.props.user}\n            />\n            <AssignSimulatedSatModal\n              modalDate={modalDate}\n              open={assignSimulatedSatModalOpen}\n              onClose={this.onToggleAssignSimulatedSatModal}\n              onAssignSimulatedSat={this.onAssignSimulatedSat}\n            />\n            <AssignTargetTestModal\n              open={assignTargetTestDateModalOpen}\n              onClose={this.onToggleAssignTargetTestModal}\n              onAssignTargetTest={this.onAssignTargetTest}\n            />\n            <StickyContainer>\n              <FilterSection\n                filters={filters}\n                eventFilters={eventFilters}\n                onClearFilters={this.onClearFilters}\n                handleFilterClick={this.handleFilterClick}\n              />\n              <div className=\"calendar-section view-month\">\n                <div className=\"calendar-slider\">\n                  <CalendarHeader\n                    activeMonth={Number(activeMonth)}\n                    onSetActiveMonth={this.onSetActiveMonth}\n                  />\n                  <div\n                    id=\"calendar\"\n                    className=\"main-slick-calendar cal-context\"\n                    style={{ width: \"100%\" }}\n                  >\n                    <div className=\"slide\">\n                      <table className=\"calendar-table cal-month-box\">\n                        <thead>\n                          <tr className=\"calendar-head-row\">\n                            <th>Su</th>\n                            <th>M</th>\n                            <th>Tu</th>\n                            <th>W</th>\n                            <th>Th</th>\n                            <th>F</th>\n                            <th>Sa</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <DragDropContext onDragEnd={this.onDragEnd}>\n                            {this.mapRows()}\n                          </DragDropContext>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                  <div className=\"add-btn-block\">\n                    <a\n                      href=\"#\"\n                      data-target=\"dropdown_assign\"\n                      onClick={this.onToggleAssignDropdown}\n                      className=\"dropdown-trigger waves-effect waves-teal btn add-btn\"\n                    >\n                  Assign...\n                    </a>\n                    <ul\n                      id=\"dropdown_assign\"\n                      className=\"dropdown-content\"\n                      style={{\n                        display: assignDropdownIsOpen ? \"block\" : \"none\",\n                        opacity: assignDropdownIsOpen ? \"100\" : \"0\",\n                      }}\n                    >\n                      <li>\n                        <a\n                          href=\"#\"\n                          onClick={this.onToggleAssignSessionModal}\n                          className=\"modal-trigger\"\n                        >\n                      Session\n                        </a>\n                      </li>\n                      <li>\n                        <a\n                          href=\"#\"\n                          onClick={this.onToggleAssignLessonsModal}\n                          className=\"modal-trigger\"\n                        >\n                      Lesson\n                        </a>\n                      </li>\n                      <li>\n                        <a\n                          href=\"#\"\n                          onClick={this.onToggleAssignWorksheetsModal}\n                          className=\"modal-trigger\"\n                        >\n                      Worksheet\n                        </a>\n                      </li>\n                      <li>\n                        <a\n                          href=\"#\"\n                          onClick={this.onToggleAssignTestSectionModal}\n                          className=\"modal-trigger\"\n                        >\n                      Test Section\n                        </a>\n                      </li>\n                      <li>\n                        <a\n                          href=\"#\"\n                          onClick={this.onToggleAssignSimulatedSatModal}\n                          className=\"modal-trigger\"\n                        >\n                      Simulated SAT\n                        </a>\n                      </li>\n                      <li>\n                        <a\n                          href=\"#\"\n                          onClick={this.onToggleAssignTargetTestModal}\n                          className=\"modal-trigger\"\n                        >\n                      Target Test\n                        </a>\n                      </li>\n                      <li className=\"divider\" tabIndex=\"-1\"></li>\n                      <li className=\"dropdown-footer\">\n                        <a href=\"#\" className=\"modal-trigger\">\n                      Apply Course Template\n                        </a>\n                      </li>\n                    </ul>\n                  </div>\n                  <div className=\"add-btn-block btn-block-right\">\n                    <a\n                      href=\"#\"\n                      data-target=\"dropdown_other\"\n                      onClick={this.onToggleHandleFilteredItemsDropdown}\n                      className=\"dropdown-trigger waves-effect waves-teal btn add-btn-circle\"\n                    >\n                      <i className=\"icon-dots\"></i>\n                    </a>\n                    <ul\n                      id=\"dropdown_other\"\n                      className=\"dropdown-content\"\n                      style={{\n                        display: onToggleHandleFilteredItemsDropdown\n                          ? \"block\"\n                          : \"none\",\n                        opacity: onToggleHandleFilteredItemsDropdown ? \"100\" : \"0\",\n                      }}\n                    >\n                      <li className=\"dropdown-header\">\n                        <b>With Filtered Items... </b>\n                        <b className=\"small\">\n                      (items currently visible on calendar)\n                        </b>\n                      </li>\n                      <li className=\"divider\"></li>\n                      <li>\n                        <a href=\"#\" className=\"modal-trigger\">\n                      Save Course as Template\n                        </a>\n                      </li>\n                      <li>\n                        <a href=\"#\">Reset All</a>\n                      </li>\n                      <li>\n                        <a href=\"#\">Delete All</a>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </StickyContainer>\n          </Otherwise>\n        </Choose>\n      </React.Fragment>\n    );\n  }\n}\n\n\nCalendar.propTypes = {\n  assignLessonsModalOpen: PropTypes.bool.isRequired,\n  assignWorkSheetsModalOpen: PropTypes.bool.isRequired,\n  onSetAssignLessonsModalOpen: PropTypes.func.isRequired,\n  onSetAssignWorksheetModalOpen: PropTypes.func.isRequired,\n  onSetCalendarRows: PropTypes.func.isRequired,\n  rows: PropTypes.array.isRequired,\n  user: PropTypes.object.isRequired,\n};\n\n\nconst mapStateToProps = createStructuredSelector({\n  assignLessonsModalOpen: makeSelectAssignLessonsModalOpen(),\n  assignWorkSheetsModalOpen: makeSelectAssignWorkSheetsModalOpen(),\n  rows: makeSelectCalendarRows(),\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onSetAssignLessonsModalOpen: (value) => dispatch(setAssignLessonsModalOpen(value)),\n    onSetAssignWorksheetModalOpen: (value) => dispatch(setAssignWorksheetModalOpen(value)),\n    onSetCalendarRows: (rows) => dispatch(setCalendarRows(rows)),\n  };\n}\n\nconst withConnect = connect(\n  mapStateToProps,\n  mapDispatchToProps\n);\n\nexport default compose(withConnect)(Calendar);\n"]},"metadata":{},"sourceType":"module"}