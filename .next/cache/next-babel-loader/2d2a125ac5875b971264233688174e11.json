{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\n/* eslint-disable react/no-did-mount-set-state */\n\n/* eslint-disable react/no-did-update-set-state */\n\n/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport moment from 'moment';\nimport FilterSection from './components/FilterSection';\nimport FullView from './components/FullView';\nimport { dueDateAscending, subjectAscending, subjectDescending, passageAscending, passageDescending, lessonNameDescending, lessonNameAscending, statusDescending, statusAscending, availableDateAscending, availableDateDescending, dueDate, flagsAscending, flagsDescending, completionDateAscending, completionDateDescending, lessonTypeAscending, lessonTypeDescending } from '../../utils/sortFunctions';\nimport ListView from './components/ListView';\nimport AssignLessonModal from './components/AssignLessonModal'; // TODO: compare updatedlessons to lessons and update lesson list\n\nclass DetailLessonList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onOpenModal\", () => this.setState({\n      modalOpen: true\n    }));\n\n    _defineProperty(this, \"onCloseModal\", () => this.setState({\n      modalOpen: false\n    }));\n\n    _defineProperty(this, \"onClearFilters\", () => this.setState({\n      statusFilters: [],\n      subjectFilters: [],\n      completeFilters: [],\n      flagFilters: [],\n      classTypeFilters: [],\n      dueDateFilters: [],\n      unitFilter: \"\",\n      nameFilter: \"\"\n    }));\n\n    _defineProperty(this, \"onSetSort\", sort => this.setState({\n      sort\n    }));\n\n    _defineProperty(this, \"onSetFilteredState\", lesson => this.setState({\n      nameFilter: lesson\n    }));\n\n    _defineProperty(this, \"onUnsetFilteredState\", filter => this.setState({\n      [filter]: \"\"\n    }));\n\n    _defineProperty(this, \"onChangeView\", view => this.setState({\n      currentView: view,\n      active: view\n    }));\n\n    _defineProperty(this, \"onSetUnitFilter\", unit => this.setState({\n      unitFilter: unit\n    }));\n\n    _defineProperty(this, \"onSortLessons\", lessons => {\n      const {\n        sort\n      } = this.state;\n\n      switch (sort) {\n        case 'subjectAscending':\n          return lessons.sort(subjectAscending);\n\n        case 'subjectDescending':\n          return lessons.sort(subjectDescending);\n\n        case 'passageAscending':\n          return lessons.sort(passageAscending);\n\n        case 'statusAscending':\n          return lessons.sort(statusAscending);\n\n        case 'passageDescending':\n          return lessons.sort(passageDescending);\n\n        case 'statusDescending':\n          return lessons.sort(statusDescending);\n\n        case 'availableDateAscending':\n          return lessons.sort(availableDateAscending);\n\n        case 'availableDateDescending':\n          return lessons.sort(availableDateDescending);\n\n        case 'dueDateDescending':\n          return lessons.sort(dueDate);\n\n        case 'dueDateAscending':\n          return lessons.sort(dueDateAscending);\n\n        case 'flagsAscending':\n          return lessons.sort(flagsAscending);\n\n        case 'flagsDescending':\n          return lessons.sort(flagsDescending);\n\n        case 'lessonNameAscending':\n          return lessons.sort(lessonNameAscending);\n\n        case 'lessonNameDescending':\n          return lessons.sort(lessonNameDescending);\n\n        case 'completionDateAscending':\n          return lessons.sort(completionDateAscending);\n\n        case 'completionDateDescending':\n          return lessons.sort(completionDateDescending);\n\n        case 'lessonTypeAscending':\n          return lessons.sort(lessonTypeAscending);\n\n        case 'lessonTypeDescending':\n          return lessons.sort(lessonTypeDescending);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(this, \"onAddUpdatedLessons\", lessons => this.setState({\n      updatedLessons: lessons\n    }));\n\n    _defineProperty(this, \"onFilterByName\", () => {\n      const {\n        lessons,\n        nameFilter\n      } = this.state;\n      return lessons.reduce((finalArr, currentLesson) => {\n        const {\n          lessonName\n        } = currentLesson;\n        const lessonString = lessonName.replace(/\\s/g, \"\").toLowerCase();\n\n        if (lessonString.indexOf(nameFilter) !== -1 && finalArr.indexOf(currentLesson) === -1) {\n          finalArr.push(currentLesson);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(this, \"onCloneLesson\", index => {\n      const {\n        lessons\n      } = this.state;\n      this.setState(prevState => {\n        prevState.lessons.push(lessons[index]);\n        return {\n          lessons: prevState.lessons\n        };\n      });\n    });\n\n    _defineProperty(this, \"onDeleteLesson\", index => {\n      const {\n        lessons\n      } = this.state;\n      const newLessonsArray = this.arrayItemRemover(lessons, lessons[index]);\n      this.setState({\n        lessons: newLessonsArray\n      });\n    });\n\n    _defineProperty(this, \"onFilterLessons\", () => {\n      const {\n        statusFilters,\n        subjectFilters,\n        unitFilter,\n        classTypeFilters,\n        scoreStatusFilters,\n        flagFilters,\n        lessons: allLessons\n      } = this.state;\n      let lessons = allLessons;\n\n      if (scoreStatusFilters.length && scoreStatusFilters.indexOf(\"all\") === -1) {\n        lessons = lessons.filter(lesson => scoreStatusFilters.indexOf(lesson.scoreStatus) !== -1);\n      }\n\n      if (statusFilters.length && statusFilters.indexOf(\"all\") === -1) {\n        lessons = lessons.filter(lesson => statusFilters.indexOf(lesson.status) !== -1);\n      }\n\n      if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n        lessons = lessons.filter(lesson => subjectFilters.indexOf(lesson.subject) !== -1);\n      }\n\n      if (flagFilters.length && flagFilters.indexOf('all') === -1) {\n        lessons = lessons.filter(lesson => lesson.flags.length !== 0);\n      }\n\n      if (classTypeFilters.length && classTypeFilters.indexOf(\"all\") === -1) {\n        lessons = lessons.filter(lesson => classTypeFilters.indexOf(lesson.type) !== -1);\n      }\n\n      if (unitFilter.length && unitFilter.indexOf('all') === -1) {\n        lessons = lessons.filter(lesson => unitFilter.indexOf(lesson.unit) !== -1);\n      }\n\n      return lessons;\n    });\n\n    _defineProperty(this, \"getMappableLessons\", () => {\n      const {\n        sort,\n        unitFilter,\n        lessons,\n        dueDateFilters,\n        nameFilter,\n        statusFilters,\n        subjectFilters,\n        scoreStatusFilters,\n        classTypeFilters,\n        flagFilters\n      } = this.state;\n      let mappableLessons = lessons;\n\n      if (nameFilter.length) {\n        mappableLessons = this.onFilterByName();\n      }\n\n      if (statusFilters.length || unitFilter.length || scoreStatusFilters.length || subjectFilters.length || classTypeFilters.length || flagFilters.length) {\n        mappableLessons = this.onFilterLessons();\n      }\n\n      if (dueDateFilters.length) {\n        mappableLessons = this.filterDueDate();\n      }\n\n      if (sort) {\n        return this.onSortLessons(mappableLessons);\n      }\n\n      return mappableLessons;\n    });\n\n    _defineProperty(this, \"filterDueDate\", () => {\n      const {\n        user\n      } = this.props;\n      const {\n        dueDateFilters,\n        lessons: allLessons\n      } = this.state;\n      let lessons = allLessons;\n\n      if (dueDateFilters.length && dueDateFilters.indexOf('all') === -1) {\n        if (dueDateFilters.includes('overdue')) {\n          lessons = lessons.filter(lesson => lesson.overdue === true);\n        }\n\n        if (dueDateFilters.includes('dueToday')) {\n          lessons = lessons.filter(lesson => lesson.dueDate === moment().format(\"MM/DD/Y\"));\n        }\n\n        if (dueDateFilters.includes('dueThisWeek')) {\n          lessons = lessons.filter(lesson => moment(lesson.dueDate).format('w') === moment().format(\"W\"));\n        }\n\n        if (dueDateFilters.includes('dueNextSession')) {\n          lessons = lessons.filter(lesson => moment(user.nextSession).isSameOrAfter(lesson.dueDate, 'day'));\n        }\n\n        return lessons;\n      }\n\n      return lessons;\n    });\n\n    _defineProperty(this, \"handleFilterClick\", (filterType, filter) => {\n      const {\n        subjectFilters: currentSubjectFilters,\n        scoreStatusFilters: currentScoreStatusFilters,\n        statusFilters: currentStatusFilters,\n        flagFilters: currentFlagFilters,\n        dueDateFilters: currentDueDateFilters,\n        classTypeFilters: currentClassTypeFilters\n      } = this.state;\n      let modifiedFilterCurrentState;\n      let modifiedFilterName;\n      let modifiedFilterUpdatedState;\n\n      switch (filterType) {\n        case 'subject':\n          modifiedFilterCurrentState = currentSubjectFilters;\n          modifiedFilterName = 'subjectFilters';\n          break;\n\n        case 'status':\n          modifiedFilterCurrentState = currentStatusFilters;\n          modifiedFilterName = 'statusFilters';\n          break;\n\n        case 'score':\n          modifiedFilterCurrentState = currentScoreStatusFilters;\n          modifiedFilterName = 'scoreStatusFilters';\n          break;\n\n        case 'flags':\n          modifiedFilterCurrentState = currentFlagFilters;\n          modifiedFilterName = 'flagFilters';\n          break;\n\n        case 'dueDate':\n          modifiedFilterCurrentState = currentDueDateFilters;\n          modifiedFilterName = 'dueDateFilters';\n          break;\n\n        case 'classType':\n          modifiedFilterCurrentState = currentClassTypeFilters;\n          modifiedFilterName = 'classTypeFilters';\n          break;\n\n        default:\n          break;\n      } // Decide whether we're adding or removing the selected filter\n\n\n      if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $push: [filter]\n        });\n      } else {\n        const filterIndex = modifiedFilterCurrentState.indexOf(filter);\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      this.setState({\n        [modifiedFilterName]: modifiedFilterUpdatedState\n      });\n    });\n\n    _defineProperty(this, \"arrayItemRemover\", (array, value) => array.filter(lesson => lesson !== value));\n\n    _defineProperty(this, \"renderCurrentView\", () => {\n      const {\n        active\n      } = this.state;\n      const {\n        user\n      } = this.props;\n\n      if (active === 'full') {\n        return __jsx(FullView, {\n          user: user,\n          lessons: this.getMappableLessons(),\n          onDeleteLesson: this.onDeleteLesson,\n          onCloneLesson: this.onCloneLesson\n        });\n      }\n\n      return __jsx(ListView, {\n        user: user,\n        lessons: this.getMappableLessons(),\n        onSetSort: this.onSetSort,\n        sort: this.state.sort\n      });\n    });\n\n    this.state = {\n      test: true,\n      lessons: this.props.user.lessons,\n      modalOpen: false,\n      currentView: 'full',\n      active: 'full',\n      statusFilters: [],\n      subjectFilters: [],\n      scoreStatusFilters: [],\n      flagFilters: [],\n      classTypeFilters: [],\n      dueDateFilters: [],\n      sort: \"\",\n      nameFilter: \"\",\n      unitFilter: \"\",\n      updatedLessons: []\n    };\n  }\n\n  render() {\n    const {\n      currentView,\n      subjectFilters,\n      statusFilters,\n      scoreStatusFilters,\n      flagFilters,\n      dueDateFilters,\n      classTypeFilters\n    } = this.state;\n    return __jsx(React.Fragment, null, __jsx(FilterSection, {\n      currentView: currentView,\n      onChangeView: this.onChangeView,\n      onHandleFilterClick: this.onHandleFilterClick,\n      onClearFilters: this.onClearFilters,\n      onSetFilteredState: this.onSetFilteredState,\n      onUnsetFilteredState: this.onUnsetFilteredState,\n      onSetSort: this.onSetSort,\n      subjectFilters: subjectFilters,\n      statusFilters: statusFilters,\n      scoreStatusFilters: scoreStatusFilters,\n      flagFilters: flagFilters,\n      dueDateFilters: dueDateFilters,\n      classTypeFilters: classTypeFilters,\n      handleFilterClick: this.handleFilterClick,\n      onSetUnitFilter: this.onSetUnitFilter,\n      filterDueDate: this.filterDueDate\n    }), this.renderCurrentView(), __jsx(AssignLessonModal, {\n      open: this.state.modalOpen,\n      lessons: this.props.user.lessons,\n      onCloseModal: this.onCloseModal,\n      onAddUpdatedLessons: this.onAddUpdatedLessons\n    }), __jsx(\"a\", {\n      href: \"#\",\n      onClick: this.onOpenModal,\n      className: \"waves-effect waves-teal btn add-btn modal-trigger\"\n    }, __jsx(\"i\", {\n      className: \"material-icons\"\n    }, \"add\"), \"Assign Lesson\"));\n  }\n\n}\n\nDetailLessonList.propTypes = {\n  user: PropTypes.object.isRequired\n};\nexport default DetailLessonList;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Student/DetailLessonList/index.js"],"names":["React","PropTypes","update","moment","FilterSection","FullView","dueDateAscending","subjectAscending","subjectDescending","passageAscending","passageDescending","lessonNameDescending","lessonNameAscending","statusDescending","statusAscending","availableDateAscending","availableDateDescending","dueDate","flagsAscending","flagsDescending","completionDateAscending","completionDateDescending","lessonTypeAscending","lessonTypeDescending","ListView","AssignLessonModal","DetailLessonList","Component","constructor","props","setState","modalOpen","statusFilters","subjectFilters","completeFilters","flagFilters","classTypeFilters","dueDateFilters","unitFilter","nameFilter","sort","lesson","filter","view","currentView","active","unit","lessons","state","updatedLessons","reduce","finalArr","currentLesson","lessonName","lessonString","replace","toLowerCase","indexOf","push","index","prevState","newLessonsArray","arrayItemRemover","scoreStatusFilters","allLessons","length","scoreStatus","status","subject","flags","type","mappableLessons","onFilterByName","onFilterLessons","filterDueDate","onSortLessons","user","includes","overdue","format","nextSession","isSameOrAfter","filterType","currentSubjectFilters","currentScoreStatusFilters","currentStatusFilters","currentFlagFilters","currentDueDateFilters","currentClassTypeFilters","modifiedFilterCurrentState","modifiedFilterName","modifiedFilterUpdatedState","$push","filterIndex","$splice","array","value","getMappableLessons","onDeleteLesson","onCloneLesson","onSetSort","test","render","onChangeView","onHandleFilterClick","onClearFilters","onSetFilteredState","onUnsetFilteredState","handleFilterClick","onSetUnitFilter","renderCurrentView","onCloseModal","onAddUpdatedLessons","onOpenModal","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-did-mount-set-state */\n/* eslint-disable react/no-did-update-set-state */\n/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport moment from 'moment';\nimport FilterSection from './components/FilterSection';\nimport FullView from './components/FullView';\nimport { dueDateAscending, subjectAscending, subjectDescending, passageAscending, passageDescending, lessonNameDescending, lessonNameAscending, statusDescending, statusAscending, availableDateAscending, availableDateDescending, dueDate, flagsAscending, flagsDescending, completionDateAscending, completionDateDescending, lessonTypeAscending, lessonTypeDescending} from '../../utils/sortFunctions';\nimport ListView from './components/ListView';\nimport AssignLessonModal from './components/AssignLessonModal';\n\n// TODO: compare updatedlessons to lessons and update lesson list\nclass DetailLessonList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      test: true,\n      lessons: this.props.user.lessons,\n      modalOpen: false,\n      currentView: 'full',\n      active: 'full',\n      statusFilters: [],\n      subjectFilters: [],\n      scoreStatusFilters: [],\n      flagFilters: [],\n      classTypeFilters: [],\n      dueDateFilters: [],\n      sort: \"\",\n      nameFilter: \"\",\n      unitFilter: \"\",\n      updatedLessons: [],\n    }\n  };\n\n  onOpenModal = () => this.setState({modalOpen: true});\n  onCloseModal = () => this.setState({modalOpen: false});\n  onClearFilters = () => this.setState({ statusFilters: [], subjectFilters: [], completeFilters: [], flagFilters: [], classTypeFilters: [], dueDateFilters: [], unitFilter: \"\", nameFilter: \"\" })\n  onSetSort = (sort) => this.setState({sort})\n  onSetFilteredState = (lesson) => this.setState({nameFilter: lesson })\n  onUnsetFilteredState = (filter) => this.setState({[filter]: \"\" })\n  onChangeView = (view) => this.setState({currentView: view, active: view})\n\n  onSetUnitFilter = (unit) => this.setState({unitFilter: unit})\n\n  // eslint-disable-next-line consistent-return\n  onSortLessons = (lessons) => {\n    const { sort } = this.state;\n    switch(sort) {\n      case 'subjectAscending':\n        return lessons.sort(subjectAscending);\n      case 'subjectDescending':\n        return lessons.sort(subjectDescending);\n      case 'passageAscending':\n        return lessons.sort(passageAscending);\n      case 'statusAscending':\n        return lessons.sort(statusAscending);\n      case 'passageDescending':\n        return lessons.sort(passageDescending);\n      case 'statusDescending':\n        return lessons.sort(statusDescending);\n      case 'availableDateAscending':\n          return lessons.sort(availableDateAscending);\n      case 'availableDateDescending':\n       return lessons.sort(availableDateDescending)\n      case 'dueDateDescending':\n        return lessons.sort(dueDate);\n      case 'dueDateAscending':\n        return lessons.sort(dueDateAscending)\n      case 'flagsAscending':\n        return lessons.sort(flagsAscending);\n      case 'flagsDescending':\n        return lessons.sort(flagsDescending);\n      case 'lessonNameAscending':\n        return lessons.sort(lessonNameAscending);\n      case 'lessonNameDescending':\n        return lessons.sort(lessonNameDescending);\n      case 'completionDateAscending':\n        return lessons.sort(completionDateAscending);\n      case 'completionDateDescending':\n        return lessons.sort(completionDateDescending);\n      case 'lessonTypeAscending':\n        return lessons.sort(lessonTypeAscending);\n      case 'lessonTypeDescending':\n        return lessons.sort(lessonTypeDescending);\n      default:\n        break;\n    }\n  }\n  onAddUpdatedLessons = (lessons) => this.setState({updatedLessons: lessons})\n\n\n  onFilterByName = () => {\n    const { lessons, nameFilter } = this.state;\n    return lessons.reduce((finalArr, currentLesson) => {\n      const { lessonName } = currentLesson;\n      const lessonString = lessonName.replace(/\\s/g, \"\").toLowerCase();\n      if (lessonString.indexOf(nameFilter) !== -1 && finalArr.indexOf(currentLesson) === -1) {\n        finalArr.push(currentLesson);\n      }\n      return finalArr;\n    }, []);\n  }\n  onCloneLesson = (index) => {\n    const { lessons } = this.state;\n    this.setState(prevState => {\n      prevState.lessons.push(lessons[index]);\n      return { lessons: prevState.lessons}\n     })\n  }\n\n  onDeleteLesson = (index) => {\n    const { lessons } = this.state;\n    const newLessonsArray = this.arrayItemRemover(lessons, lessons[index])\n    this.setState({lessons: newLessonsArray})\n  }\n  // note: unassigned and incomplete are filtering opposite, but this works for some reason\n  onFilterLessons = () => {\n    const { statusFilters, subjectFilters, unitFilter, classTypeFilters, scoreStatusFilters, flagFilters, lessons: allLessons } = this.state;\n    let lessons = allLessons;\n    if (scoreStatusFilters.length && scoreStatusFilters.indexOf(\"all\") === -1) {\n      lessons = lessons.filter(lesson => scoreStatusFilters.indexOf(lesson.scoreStatus) !== -1);\n    }\n    if (statusFilters.length && statusFilters.indexOf(\"all\") === -1) {\n      lessons = lessons.filter(lesson => statusFilters.indexOf(lesson.status) !== -1);\n    }\n    if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n      lessons = lessons.filter(lesson => subjectFilters.indexOf(lesson.subject) !== -1)\n    }\n    if (flagFilters.length && flagFilters.indexOf('all') === -1) {\n      lessons = lessons.filter(lesson => lesson.flags.length !== 0)\n    }\n    if (classTypeFilters.length && classTypeFilters.indexOf(\"all\") === -1) {\n      lessons = lessons.filter(lesson => classTypeFilters.indexOf(lesson.type) !== -1)\n    }\n    if (unitFilter.length && unitFilter.indexOf('all') === -1) {\n      lessons = lessons.filter(lesson => unitFilter.indexOf(lesson.unit) !== -1)\n    }\n    return lessons;\n  }\n\n  getMappableLessons = () => {\n    const { sort, unitFilter, lessons, dueDateFilters, nameFilter, statusFilters, subjectFilters, scoreStatusFilters, classTypeFilters, flagFilters} = this.state;\n    let mappableLessons = lessons;\n    if (nameFilter.length) {\n      mappableLessons = this.onFilterByName();\n    }\n    if (statusFilters.length || unitFilter.length || scoreStatusFilters.length || subjectFilters.length || classTypeFilters.length || flagFilters.length) {\n      mappableLessons = this.onFilterLessons();\n    }\n    if (dueDateFilters.length){\n      mappableLessons = this.filterDueDate();\n    }\n    if (sort) {\n      return this.onSortLessons(mappableLessons)\n    }\n    return mappableLessons\n  }\n\n\n  // may need to alter dueNextSession depending if client wants ALL vs incomplete/overdue\n  // TODO: only works with one due date filter, not multiple\n   filterDueDate = () => {\n     const { user } = this.props;\n    const { dueDateFilters, lessons: allLessons } = this.state;\n    let lessons = allLessons;\n    if (dueDateFilters.length && dueDateFilters.indexOf('all') === -1) {\n      if (dueDateFilters.includes('overdue')) {\n      lessons = lessons.filter(lesson => lesson.overdue === true)\n      }\n      if(dueDateFilters.includes('dueToday')) {\n        lessons = lessons.filter(lesson => lesson.dueDate === moment().format(\"MM/DD/Y\"))\n      }\n      if(dueDateFilters.includes('dueThisWeek')) {\n        lessons = lessons.filter(lesson => moment(lesson.dueDate).format('w') === moment().format(\"W\"))\n      }\n      if (dueDateFilters.includes('dueNextSession')) {\n        lessons = lessons.filter(lesson => moment(user.nextSession).isSameOrAfter(lesson.dueDate, 'day'))\n      }\n      return lessons\n    }\n    return lessons\n  }\n\n\n  handleFilterClick = (filterType, filter) => {\n    const { subjectFilters: currentSubjectFilters, scoreStatusFilters: currentScoreStatusFilters, statusFilters: currentStatusFilters, flagFilters: currentFlagFilters, dueDateFilters: currentDueDateFilters, classTypeFilters: currentClassTypeFilters } = this.state;\n    let modifiedFilterCurrentState;\n    let modifiedFilterName;\n    let modifiedFilterUpdatedState;\n    switch (filterType) {\n      case 'subject':\n        modifiedFilterCurrentState = currentSubjectFilters;\n        modifiedFilterName = 'subjectFilters';\n        break;\n      case 'status':\n        modifiedFilterCurrentState = currentStatusFilters;\n        modifiedFilterName = 'statusFilters';\n        break;\n      case 'score':\n        modifiedFilterCurrentState = currentScoreStatusFilters;\n        modifiedFilterName = 'scoreStatusFilters';\n        break;\n      case 'flags':\n          modifiedFilterCurrentState = currentFlagFilters;\n          modifiedFilterName = 'flagFilters';\n          break;\n      case 'dueDate':\n          modifiedFilterCurrentState = currentDueDateFilters;\n          modifiedFilterName = 'dueDateFilters';\n          break;\n      case 'classType':\n          modifiedFilterCurrentState = currentClassTypeFilters;\n          modifiedFilterName = 'classTypeFilters';\n          break;\n        default:\n        break;\n    }\n    // Decide whether we're adding or removing the selected filter\n    if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $push: [filter],\n      });\n    } else {\n      const filterIndex = modifiedFilterCurrentState.indexOf(filter);\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $splice: [[ filterIndex, 1 ]],\n      });\n    }\n    this.setState({ [modifiedFilterName]: modifiedFilterUpdatedState });\n  }\n\n  arrayItemRemover = (array, value) => array.filter((lesson) => lesson !== value)\n\n  renderCurrentView = () => {\n    const { active } = this.state;\n    const { user } = this.props;\n    if (active === 'full') {\n      return <FullView user={user} lessons={this.getMappableLessons()} onDeleteLesson={this.onDeleteLesson} onCloneLesson={this.onCloneLesson}/>\n    }\n    return <ListView user={user} lessons={this.getMappableLessons()} onSetSort={this.onSetSort} sort={this.state.sort}/>\n  }\n\n\n  render() {\n    const { currentView, subjectFilters, statusFilters, scoreStatusFilters, flagFilters, dueDateFilters, classTypeFilters } = this.state;\n    return (\n      <React.Fragment>\n        <FilterSection\n        currentView={currentView}\n        onChangeView={this.onChangeView}\n        onHandleFilterClick={this.onHandleFilterClick}\n        onClearFilters={this.onClearFilters}\n        onSetFilteredState={this.onSetFilteredState}\n        onUnsetFilteredState={this.onUnsetFilteredState}\n        onSetSort={this.onSetSort}\n        subjectFilters={subjectFilters}\n        statusFilters={statusFilters}\n        scoreStatusFilters={scoreStatusFilters}\n        flagFilters={flagFilters}\n        dueDateFilters={dueDateFilters}\n        classTypeFilters={classTypeFilters}\n        handleFilterClick={this.handleFilterClick}\n        onSetUnitFilter={this.onSetUnitFilter}\n        filterDueDate={this.filterDueDate}\n        />\n        {this.renderCurrentView()}\n        <AssignLessonModal\n          open={this.state.modalOpen}\n          lessons={this.props.user.lessons}\n          onCloseModal={this.onCloseModal}\n          onAddUpdatedLessons={this.onAddUpdatedLessons}/>\n      <a href=\"#\" onClick={this.onOpenModal} className=\"waves-effect waves-teal btn add-btn modal-trigger\"><i className=\"material-icons\">add</i>Assign Lesson</a>\n      </React.Fragment>\n    )\n  }\n}\n\nDetailLessonList.propTypes = {\n  user: PropTypes.object.isRequired,\n};\n\nexport default DetailLessonList;\n"]},"metadata":{},"sourceType":"module"}