{"ast":null,"code":"import _objectSpread2 from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport update from 'immutability-helper';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport FilterSection from '../components/CourseTemplate/components/FilterSection';\nimport TemplateCard from '../components/CourseTemplate/components/TemplateCard';\nimport sampleTemplates from '../components/CourseTemplate/utils/sampleTemplate';\nimport { sessionSort, lessonSort, estimatedTotalCourseWorkSort } from '../components/CourseTemplate/utils/sortOptions';\n\nvar CourseTemplates =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CourseTemplates, _React$Component);\n\n  function CourseTemplates(props) {\n    var _this;\n\n    _classCallCheck(this, CourseTemplates);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CourseTemplates).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClearFilters\", function () {\n      return _this.setState({\n        subjectFilters: [],\n        sourceFilters: [],\n        titleFilter: '',\n        sort: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (titleFilter) {\n      return _this.setState({\n        templatesAreFiltered: true,\n        titleFilter: titleFilter\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function () {\n      return _this.setState({\n        templatesAreFiltered: false,\n        titleFilter: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetDropdown\", function (dropdownIndex) {\n      return _this.setState({\n        dropdownIndex: dropdownIndex,\n        dropdownIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseDropdown\", function () {\n      return _this.setState({\n        dropdownIsOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleEditModal\", function () {\n      return _this.setState(function (_ref) {\n        var editModalOpen = _ref.editModalOpen;\n        return {\n          editModalOpen: !editModalOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortTemplates\", function (templates) {\n      var sort = _this.state.sort;\n\n      switch (sort) {\n        case 'sessions':\n          return templates.sort(sessionSort);\n\n        case 'estimatedTotalCourseWork':\n          return templates.sort(estimatedTotalCourseWorkSort);\n\n        case 'lessons':\n          return templates.sort(lessonSort);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByTitle\", function () {\n      var _this$state = _this.state,\n          templates = _this$state.templates,\n          titleFilter = _this$state.titleFilter;\n      return templates.reduce(function (finalArr, currentTemplate) {\n        var title = currentTemplate.title;\n        var templateString = title.replace(/\\s/g, \"\").toLowerCase();\n\n        if (templateString.indexOf(titleFilter) !== -1 && finalArr.indexOf(currentTemplate) === -1) {\n          finalArr.push(currentTemplate);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterTemplates\", function () {\n      var _this$state2 = _this.state,\n          subjectFilters = _this$state2.subjectFilters,\n          sourceFilters = _this$state2.sourceFilters,\n          allTemplates = _this$state2.templates;\n      var templates = allTemplates;\n\n      if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n        templates = templates.filter(function (template) {\n          return subjectFilters.indexOf(template.subject) !== -1;\n        });\n      }\n\n      if (sourceFilters.length) {\n        templates = templates.filter(function (template) {\n          return sourceFilters.indexOf(template.source) !== -1;\n        });\n      }\n\n      return templates;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableTemplates\", function () {\n      var _this$state3 = _this.state,\n          subjectFilters = _this$state3.subjectFilters,\n          sourceFilters = _this$state3.sourceFilters,\n          titleFilter = _this$state3.titleFilter,\n          sort = _this$state3.sort,\n          templates = _this$state3.templates;\n      var mappableTemplates = templates;\n\n      if (titleFilter.length) {\n        mappableTemplates = _this.onFilterByTitle();\n      }\n\n      if (subjectFilters.length || sourceFilters.length) {\n        mappableTemplates = _this.onFilterTemplates();\n      }\n\n      if (sort) {\n        return _this.onSortTemplates(mappableTemplates);\n      }\n\n      return mappableTemplates;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"importTemplateFromFile\", function () {\n      console.warn('stubbed out import function');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterClick\", function (filterType, filter) {\n      var _this$state4 = _this.state,\n          currentSubjectFilters = _this$state4.subjectFilters,\n          currentSourceFilters = _this$state4.sourceFilters;\n      var modifiedFilterCurrentState;\n      var modifiedFilterName;\n      var modifiedFilterUpdatedState;\n\n      switch (filterType) {\n        case 'subject':\n          modifiedFilterCurrentState = currentSubjectFilters;\n          modifiedFilterName = 'subjectFilters';\n          break;\n\n        case 'source':\n          modifiedFilterCurrentState = currentSourceFilters;\n          modifiedFilterName = 'sourceFilters';\n          break;\n\n        default:\n          break;\n      } // Decide whether we're adding or removing the selected filter\n\n\n      if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $push: [filter]\n        });\n      } else {\n        var filterIndex = modifiedFilterCurrentState.indexOf(filter);\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, modifiedFilterName, modifiedFilterUpdatedState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapTemplateCards\", function () {\n      return _this.getMappableTemplates().map(function (template, index) {\n        return __jsx(TemplateCard, {\n          template: template,\n          index: index,\n          dropdownIndex: _this.state.dropdownIndex,\n          dropdownIsOpen: _this.state.dropdownIsOpen,\n          onCloseDropdown: _this.onCloseDropdown,\n          onSetDropdown: _this.onSetDropdown,\n          onToggleEditModal: _this.onToggleEditModal\n        });\n      });\n    });\n\n    _this.state = {\n      templates: sampleTemplates,\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      editModalOpen: false,\n      subjectFilters: [],\n      sourceFilters: [],\n      titleFilter: '',\n      sort: ''\n    };\n    return _this;\n  }\n\n  _createClass(CourseTemplates, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state5 = this.state,\n          subjectFilters = _this$state5.subjectFilters,\n          sourceFilters = _this$state5.sourceFilters;\n      return __jsx(\"main\", {\n        id: \"main\",\n        role: \"main\"\n      }, __jsx(\"div\", {\n        className: \"main-holder grey lighten-5 switcher-section\"\n      }, __jsx(StickyContainer, null, __jsx(Sticky, null, function (_ref2) {\n        var style = _ref2.style;\n        return __jsx(\"div\", {\n          className: \"title-row card-panel\",\n          style: _objectSpread2({}, style, {\n            zIndex: 1999\n          })\n        }, __jsx(\"div\", {\n          className: \"mobile-header\"\n        }, __jsx(\"a\", {\n          href: \"#\",\n          \"data-target\": \"slide-out\",\n          className: \"sidenav-trigger\"\n        }, __jsx(\"i\", {\n          className: \"material-icons\"\n        }, \"menu\"))), __jsx(\"h2\", {\n          className: \"h1 white-text\"\n        }, __jsx(\"span\", {\n          className: \"heading-holder\"\n        }, __jsx(\"i\", {\n          className: \"icon-module\"\n        }), __jsx(\"span\", {\n          className: \"heading-block\"\n        }, \"Course Template Library\"))));\n      }), __jsx(FilterSection, {\n        subjectFilters: subjectFilters,\n        sourceFilters: sourceFilters,\n        onSetSort: this.onSetSort,\n        onClearFilters: this.onClearFilters,\n        handleFilterClick: this.handleFilterClick,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState\n      }), __jsx(\"div\", {\n        className: \"content-section\"\n      }, __jsx(\"div\", {\n        className: \"container-middle\"\n      }, __jsx(\"div\", {\n        className: \"result-row center-align\"\n      }, __jsx(\"b\", {\n        className: \"result\"\n      }, \"- \", this.getMappableTemplates().length, \" matches -\")), __jsx(\"div\", {\n        className: \"d-flex-content row card-width-470\"\n      }, this.mapTemplateCards()))), __jsx(\"div\", {\n        className: \"add-btn-block\"\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.importTemplateFromFile,\n        className: \"waves-effect waves-teal btn add-btn\"\n      }, __jsx(\"i\", {\n        className: \"material-icons\"\n      }, \"add\"), \" Import Template from File\")))));\n    }\n  }]);\n\n  return CourseTemplates;\n}(React.Component);\n\nexport default CourseTemplates;","map":null,"metadata":{},"sourceType":"module"}