{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/DetailTestAnswerSheetComplete/components/WritingPage/components/DropDownOptions/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport PropTypes from \"prop-types\";\nimport { toast } from \"react-toastify\";\nimport ClickOffComponentWrapper from \"../../../../../../ClickOffComponentWrapper\";\nimport { updateFlagStatus } from \"../../../../../index/actions\";\n\nclass DropDownOptions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentWillReceiveProps\", nextProps => {\n      const {\n        question: {\n          flag: {\n            status\n          }\n        },\n        question\n      } = nextProps;\n\n      if (question.flag.status !== this.state.status) {\n        this.setState({\n          status\n        });\n      }\n    });\n\n    _defineProperty(this, \"onHandleQuestionFlagStatus\", async (_e, status) => {\n      const {\n        studentTestId,\n        onUpdateFlagStatus,\n        question: {\n          flag: {\n            id\n          }\n        },\n        question,\n        onCloseQuestionModal\n      } = this.props; // User validation\n\n      if (status === this.state.status) return;\n\n      if (this.state.status === \"UN_FLAGGED\" && status === \"REVIEWED\" && !id) {\n        return toast.error(`There is no flag to mark reviwed.`, {\n          className: \"update-error\",\n          progressClassName: \"progress-bar-error\"\n        });\n      } // Continue with request\n\n\n      let postBody = {};\n      const newQuestion = question;\n\n      if (status === \"FLAGGED\" && !id) {\n        postBody = {\n          student_test_id: studentTestId,\n          test_problem_id: question.id\n        };\n      } else {\n        postBody = {\n          student_test_id: studentTestId,\n          flag_id: id,\n          status\n        };\n      }\n\n      newQuestion.flag.status = status;\n      onUpdateFlagStatus(postBody, status, newQuestion);\n      onCloseQuestionModal();\n    });\n\n    this.state = {\n      status: \"UN_FLAGGED\"\n    };\n  }\n\n  render() {\n    const {\n      open,\n      onCloseQuestionModal\n    } = this.props;\n    return open ? [__jsx(ClickOffComponentWrapper, {\n      onOuterClick: () => onCloseQuestionModal(),\n      key: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, __jsx(\"ul\", {\n      id: \"dropdown01\",\n      style: {\n        display: \"block\",\n        opacity: \"1\",\n        transform: \"scaleX(1) scaleY(1)\"\n      },\n      className: \"jsx-1977393408\" + \" \" + \"dropdown-content dropdown-wide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, __jsx(\"li\", {\n      className: \"jsx-1977393408\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      href: \"#\",\n      onClick: e => this.onHandleQuestionFlagStatus(e, \"FLAGGED\"),\n      className: \"jsx-1977393408\" + \" \" + \"option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Add Flag\")), __jsx(\"li\", {\n      className: \"jsx-1977393408\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      href: \"#!\",\n      onClick: e => this.onHandleQuestionFlagStatus(e, \"REVIEWED\"),\n      className: \"jsx-1977393408\" + \" \" + \"option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Mark Flag Reviewed\")), __jsx(\"li\", {\n      className: \"jsx-1977393408\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      href: \"#!\",\n      onClick: e => this.onHandleQuestionFlagStatus(e, \"UN_FLAGGED\"),\n      className: \"jsx-1977393408\" + \" \" + \"option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Remove Flag\")))), __jsx(_JSXStyle, {\n      id: \"1977393408\",\n      key: \"1\",\n      __self: this\n    }, \".option.jsx-1977393408{font-weight:normal;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93b2xmL0RvY3VtZW50cy9jbGVhcmNob2ljZS9hZG1pbi9mZWF0dXJlLXZpZXctdXBkYXRlZC1jb3Vyc2UvY2xlYXItY2hvaWNlLWFkbWluL2NvbXBvbmVudHMvU3R1ZGVudC9EZXRhaWxUZXN0QW5zd2VyU2hlZXRDb21wbGV0ZS9jb21wb25lbnRzL1dyaXRpbmdQYWdlL2NvbXBvbmVudHMvRHJvcERvd25PcHRpb25zL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJGb0IsQUFHa0MsbUJBQ3JCIiwiZmlsZSI6Ii9Vc2Vycy93b2xmL0RvY3VtZW50cy9jbGVhcmNob2ljZS9hZG1pbi9mZWF0dXJlLXZpZXctdXBkYXRlZC1jb3Vyc2UvY2xlYXItY2hvaWNlLWFkbWluL2NvbXBvbmVudHMvU3R1ZGVudC9EZXRhaWxUZXN0QW5zd2VyU2hlZXRDb21wbGV0ZS9jb21wb25lbnRzL1dyaXRpbmdQYWdlL2NvbXBvbmVudHMvRHJvcERvd25PcHRpb25zL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgY29tcG9zZSB9IGZyb20gXCJyZWR1eFwiO1xuaW1wb3J0IHsgY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yIH0gZnJvbSBcInJlc2VsZWN0XCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gXCJyZWFjdC10b2FzdGlmeVwiO1xuaW1wb3J0IENsaWNrT2ZmQ29tcG9uZW50V3JhcHBlciBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vLi4vQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyXCI7XG5pbXBvcnQgeyB1cGRhdGVGbGFnU3RhdHVzIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2luZGV4L2FjdGlvbnNcIjtcblxuY2xhc3MgRHJvcERvd25PcHRpb25zIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN0YXR1czogXCJVTl9GTEFHR0VEXCIsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSAobmV4dFByb3BzKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgZmxhZzogeyBzdGF0dXMgfSxcbiAgICAgIH0sXG4gICAgICBxdWVzdGlvbixcbiAgICB9ID0gbmV4dFByb3BzO1xuICAgIGlmIChxdWVzdGlvbi5mbGFnLnN0YXR1cyAhPT0gdGhpcy5zdGF0ZS5zdGF0dXMpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdGF0dXMsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgb25IYW5kbGVRdWVzdGlvbkZsYWdTdGF0dXMgPSBhc3luYyAoX2UsIHN0YXR1cykgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHN0dWRlbnRUZXN0SWQsXG4gICAgICBvblVwZGF0ZUZsYWdTdGF0dXMsXG4gICAgICBxdWVzdGlvbjoge1xuICAgICAgICBmbGFnOiB7IGlkIH0sXG4gICAgICB9LFxuICAgICAgcXVlc3Rpb24sXG4gICAgICBvbkNsb3NlUXVlc3Rpb25Nb2RhbCxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAvLyBVc2VyIHZhbGlkYXRpb25cbiAgICBpZiAoc3RhdHVzID09PSB0aGlzLnN0YXRlLnN0YXR1cykgcmV0dXJuO1xuICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyA9PT0gXCJVTl9GTEFHR0VEXCIgJiYgc3RhdHVzID09PSBcIlJFVklFV0VEXCIgJiYgIWlkKSB7XG4gICAgICByZXR1cm4gdG9hc3QuZXJyb3IoYFRoZXJlIGlzIG5vIGZsYWcgdG8gbWFyayByZXZpd2VkLmAsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcInVwZGF0ZS1lcnJvclwiLFxuICAgICAgICBwcm9ncmVzc0NsYXNzTmFtZTogXCJwcm9ncmVzcy1iYXItZXJyb3JcIixcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDb250aW51ZSB3aXRoIHJlcXVlc3RcbiAgICBsZXQgcG9zdEJvZHkgPSB7fTtcbiAgICBjb25zdCBuZXdRdWVzdGlvbiA9IHF1ZXN0aW9uO1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gXCJGTEFHR0VEXCIgJiYgIWlkKSB7XG4gICAgICBwb3N0Qm9keSA9IHsgc3R1ZGVudF90ZXN0X2lkOiBzdHVkZW50VGVzdElkLCB0ZXN0X3Byb2JsZW1faWQ6IHF1ZXN0aW9uLmlkIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc3RCb2R5ID0geyBzdHVkZW50X3Rlc3RfaWQ6IHN0dWRlbnRUZXN0SWQsIGZsYWdfaWQ6IGlkLCBzdGF0dXMgfTtcbiAgICB9XG4gICAgbmV3UXVlc3Rpb24uZmxhZy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgb25VcGRhdGVGbGFnU3RhdHVzKHBvc3RCb2R5LCBzdGF0dXMsIG5ld1F1ZXN0aW9uKTtcbiAgICBvbkNsb3NlUXVlc3Rpb25Nb2RhbCgpO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBvcGVuLFxuICAgICAgb25DbG9zZVF1ZXN0aW9uTW9kYWwsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxJZiBjb25kaXRpb249e29wZW59PlxuICAgICAgICA8Q2xpY2tPZmZDb21wb25lbnRXcmFwcGVyIG9uT3V0ZXJDbGljaz17KCkgPT4gb25DbG9zZVF1ZXN0aW9uTW9kYWwoKX0+XG4gICAgICAgICAgPHVsXG4gICAgICAgICAgICBpZD1cImRyb3Bkb3duMDFcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZHJvcGRvd24tY29udGVudCBkcm9wZG93bi13aWRlXCJcbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgICAgICAgb3BhY2l0eTogXCIxXCIsXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogXCJzY2FsZVgoMSkgc2NhbGVZKDEpXCIsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwib3B0aW9uXCIgaHJlZj1cIiNcIiBvbkNsaWNrPXsoZSkgPT4gdGhpcy5vbkhhbmRsZVF1ZXN0aW9uRmxhZ1N0YXR1cyhlLCBcIkZMQUdHRURcIil9PkFkZCBGbGFnPC9hPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwib3B0aW9uXCIgaHJlZj1cIiMhXCIgb25DbGljaz17KGUpID0+IHRoaXMub25IYW5kbGVRdWVzdGlvbkZsYWdTdGF0dXMoZSwgXCJSRVZJRVdFRFwiKX0+TWFyayBGbGFnIFJldmlld2VkPC9hPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwib3B0aW9uXCIgaHJlZj1cIiMhXCIgb25DbGljaz17KGUpID0+IHRoaXMub25IYW5kbGVRdWVzdGlvbkZsYWdTdGF0dXMoZSwgXCJVTl9GTEFHR0VEXCIpfT5SZW1vdmUgRmxhZzwvYT5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPC91bD5cbiAgICAgICAgPC9DbGlja09mZkNvbXBvbmVudFdyYXBwZXI+XG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAgIC5vcHRpb24ge1xuICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgIDwvSWY+XG4gICAgKTtcbiAgfVxufVxuXG5Ecm9wRG93bk9wdGlvbnMucHJvcFR5cGVzID0ge1xuICBvcGVuOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBvbkNsb3NlUXVlc3Rpb25Nb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgcXVlc3Rpb246IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbn07XG5cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIG9uVXBkYXRlRmxhZ1N0YXR1czogKHBheWxvYWQsIHN0YXR1cywgcXVlc3Rpb24pID0+XG4gICAgICBkaXNwYXRjaCh1cGRhdGVGbGFnU3RhdHVzKHBheWxvYWQsIHN0YXR1cywgcXVlc3Rpb24pKSxcbiAgfTtcbn1cblxuY29uc3Qgd2l0aENvbm5lY3QgPSBjb25uZWN0KG51bGwsIG1hcERpc3BhdGNoVG9Qcm9wcyk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvc2Uod2l0aENvbm5lY3QpKERyb3BEb3duT3B0aW9ucyk7XG4iXX0= */\\n/*@ sourceURL=/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/DetailTestAnswerSheetComplete/components/WritingPage/components/DropDownOptions/index.js */\")] : null;\n  }\n\n}\n\nDropDownOptions.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onCloseQuestionModal: PropTypes.func.isRequired,\n  question: PropTypes.object.isRequired\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onUpdateFlagStatus: (payload, status, question) => dispatch(updateFlagStatus(payload, status, question))\n  };\n}\n\nconst withConnect = connect(null, mapDispatchToProps);\nexport default compose(withConnect)(DropDownOptions);","map":{"version":3,"sources":["/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/DetailTestAnswerSheetComplete/components/WritingPage/components/DropDownOptions/index.js"],"names":["React","connect","compose","createStructuredSelector","PropTypes","toast","ClickOffComponentWrapper","updateFlagStatus","DropDownOptions","Component","constructor","props","nextProps","question","flag","status","state","setState","_e","studentTestId","onUpdateFlagStatus","id","onCloseQuestionModal","error","className","progressClassName","postBody","newQuestion","student_test_id","test_problem_id","flag_id","render","open","display","opacity","transform","e","onHandleQuestionFlagStatus","propTypes","bool","isRequired","func","object","mapDispatchToProps","dispatch","payload","withConnect"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport PropTypes from \"prop-types\";\nimport { toast } from \"react-toastify\";\nimport ClickOffComponentWrapper from \"../../../../../../ClickOffComponentWrapper\";\nimport { updateFlagStatus } from \"../../../../../index/actions\";\n\nclass DropDownOptions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \"UN_FLAGGED\",\n    };\n  }\n\n  componentWillReceiveProps = (nextProps) => {\n    const {\n      question: {\n        flag: { status },\n      },\n      question,\n    } = nextProps;\n    if (question.flag.status !== this.state.status) {\n      this.setState({\n        status,\n      });\n    }\n  };\n\n  onHandleQuestionFlagStatus = async (_e, status) => {\n    const {\n      studentTestId,\n      onUpdateFlagStatus,\n      question: {\n        flag: { id },\n      },\n      question,\n      onCloseQuestionModal,\n    } = this.props;\n    // User validation\n    if (status === this.state.status) return;\n    if (this.state.status === \"UN_FLAGGED\" && status === \"REVIEWED\" && !id) {\n      return toast.error(`There is no flag to mark reviwed.`, {\n        className: \"update-error\",\n        progressClassName: \"progress-bar-error\",\n      });\n    }\n    // Continue with request\n    let postBody = {};\n    const newQuestion = question;\n\n    if (status === \"FLAGGED\" && !id) {\n      postBody = { student_test_id: studentTestId, test_problem_id: question.id };\n    } else {\n      postBody = { student_test_id: studentTestId, flag_id: id, status };\n    }\n    newQuestion.flag.status = status;\n    onUpdateFlagStatus(postBody, status, newQuestion);\n    onCloseQuestionModal();\n  };\n\n  render() {\n    const {\n      open,\n      onCloseQuestionModal,\n    } = this.props;\n    return (\n      <If condition={open}>\n        <ClickOffComponentWrapper onOuterClick={() => onCloseQuestionModal()}>\n          <ul\n            id=\"dropdown01\"\n            className=\"dropdown-content dropdown-wide\"\n            style={{\n              display: \"block\",\n              opacity: \"1\",\n              transform: \"scaleX(1) scaleY(1)\",\n            }}\n          >\n            <li>\n              <a className=\"option\" href=\"#\" onClick={(e) => this.onHandleQuestionFlagStatus(e, \"FLAGGED\")}>Add Flag</a>\n            </li>\n            <li>\n              <a className=\"option\" href=\"#!\" onClick={(e) => this.onHandleQuestionFlagStatus(e, \"REVIEWED\")}>Mark Flag Reviewed</a>\n            </li>\n            <li>\n              <a className=\"option\" href=\"#!\" onClick={(e) => this.onHandleQuestionFlagStatus(e, \"UN_FLAGGED\")}>Remove Flag</a>\n            </li>\n          </ul>\n        </ClickOffComponentWrapper>\n        <style jsx>{`\n            .option {\n              font-weight: normal;\n            }\n          `}</style>\n      </If>\n    );\n  }\n}\n\nDropDownOptions.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onCloseQuestionModal: PropTypes.func.isRequired,\n  question: PropTypes.object.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onUpdateFlagStatus: (payload, status, question) =>\n      dispatch(updateFlagStatus(payload, status, question)),\n  };\n}\n\nconst withConnect = connect(null, mapDispatchToProps);\n\nexport default compose(withConnect)(DropDownOptions);\n"]},"metadata":{},"sourceType":"module"}