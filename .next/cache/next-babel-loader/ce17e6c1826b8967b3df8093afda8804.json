{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport update from 'immutability-helper';\nimport Portal from '../../../Portal';\nimport ClickOffComponentWrapper from '../../../ClickOffComponentWrapper';\nimport OwnerContactInfo from './components/OwnerContactInfo';\nimport LocationContactInfo from '../SharedModalComponents/LocationContactInfo';\nimport LocationEmailSettings from '../SharedModalComponents/LocationEmailSettings';\nimport LocationBranding from '../SharedModalComponents/LocationBranding';\nimport { nestedCreateFieldValidation } from '../../../utils/fieldValidation';\nimport initialState from '../../utils/initialState';\n\nclass NewLocationModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onSetValidation\", (validation, cb) => this.setState({\n      validation\n    }, cb));\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      const {\n        owner,\n        locationContactInfo,\n        locationEmailSettings,\n        locationBranding\n      } = this.state;\n      const {\n        onSaveNewLocation,\n        onSaveLocationError,\n        onAddNewLocation,\n        fromInstructorPage = false\n      } = this.props; // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n      // const valid = true;\n\n      const valid = await nestedCreateFieldValidation(this.state, this.onSetValidation, validation => console.warn('validation', validation));\n\n      if (!valid) {\n        // return onSaveLocationError();\n        console.warn('not valid');\n      }\n\n      const postBody = {\n        locationContactInfo,\n        locationEmailSettings,\n        locationBranding,\n        owner\n      };\n\n      if (fromInstructorPage) {\n        onSaveNewLocation(postBody);\n      } else {\n        onAddNewLocation(postBody);\n      }\n\n      console.warn('stubbed out save function');\n      this.onCloseModal();\n    });\n\n    _defineProperty(this, \"onResetLocation\", () => this.setState(initialState));\n\n    _defineProperty(this, \"onCloseModal\", () => {\n      const {\n        onClose\n      } = this.props;\n      onClose();\n      this.onResetLocation();\n    });\n\n    _defineProperty(this, \"handleDetailsChange\", (event, name, section) => {\n      let value;\n\n      if (event.hex) {\n        value = event.hex;\n      } else {\n        value = event.target ? event.target.value : event;\n      }\n\n      const updatedState = update(this.state, {\n        [section]: {\n          $merge: {\n            [name]: value\n          }\n        }\n      });\n      this.setState(updatedState);\n    });\n\n    this.state = {\n      ownerContactInfo: {\n        firstName: '',\n        lastName: '',\n        email: '',\n        gender: '',\n        phone: '',\n        streetAddress: '',\n        city: '',\n        state: '',\n        zip: ''\n      },\n      locationEmailSettings: {\n        automatedEmailOriginAddress: '',\n        automatedEmailSalutation: ''\n      },\n      locationContactInfo: {\n        locationName: '',\n        locationNickname: '',\n        locationEmail: '',\n        locationPhoneNumber: '',\n        website: '',\n        locationStreetAddress: '',\n        locationCity: '',\n        locationState: '',\n        locationZip: ''\n      },\n      locationBranding: {\n        locationUrl: '',\n        headerColor1: '',\n        headerColor2: '',\n        headerLogoBackgroundColor: '',\n        headerLogoBackgroundAlpha: '',\n        horizontalLogoVariation: '',\n        squareLogoVariation: '',\n        backgroundImage: '',\n        backgroundBlur: '',\n        backgroundOverlayAlpha: '',\n        studentWelcomeVideo: '',\n        instructorWelcomeVideo: ''\n      },\n      validation: {\n        ownerContactInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true\n        },\n        locationEmailSettings: {\n          automatedEmailOriginAddress: true,\n          automatedEmailSalutation: true\n        },\n        locationContactInfo: {\n          locationName: true,\n          locationNickname: true,\n          locationEmail: true\n        },\n        locationBranding: {\n          locationUrl: true,\n          headerColor1: true,\n          headerColor2: true,\n          headerLogoBackgroundColor: true,\n          headerLogoBackgroundAlpha: true,\n          horizontalLogoVariation: true,\n          squareLogoVariation: true,\n          backgroundImage: true,\n          backgroundBlur: true,\n          backgroundOverlayAlpha: true\n        }\n      }\n    };\n  } // This function is passed into nestedCreateFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n\n\n  render() {\n    const {\n      open\n    } = this.props;\n    const {\n      ownerContactInfo,\n      locationEmailSettings,\n      locationContactInfo,\n      locationBranding\n    } = this.state;\n    return __jsx(Portal, {\n      selector: \"#modal\"\n    }, open && __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"overlay\"\n    }, __jsx(ClickOffComponentWrapper, {\n      onOuterClick: this.onCloseModal\n    }, __jsx(\"div\", {\n      id: \"modal_user_create\",\n      className: \"jsx-2557376288\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-modal card-main card grey lighten-3\"\n    }, __jsx(\"div\", {\n      style: {\n        backgroundColor: '#31837a',\n        color: '#fff'\n      },\n      className: \"jsx-2557376288\" + \" \" + \"card-panel card-panel-title\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-panel-row row\"\n    }, __jsx(\"div\", {\n      style: {\n        display: 'block'\n      },\n      className: \"jsx-2557376288\" + \" \" + \"col\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-2557376288\" + \" \" + \"h2\"\n    }, __jsx(\"span\", {\n      className: \"jsx-2557376288\" + \" \" + \"heading-holder\"\n    }, __jsx(\"span\", {\n      className: \"jsx-2557376288\" + \" \" + \"heading-block\"\n    }, \"Create New Owner\")))), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"col\"\n    }, __jsx(\"span\", {\n      className: \"jsx-2557376288\" + \" \" + \"block-icon\"\n    }, __jsx(\"i\", {\n      className: \"jsx-2557376288\" + \" \" + \"icon-owner\"\n    }), __jsx(\"span\", {\n      className: \"jsx-2557376288\" + \" \" + \"text-icon\"\n    }, \"Owner\"))))), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-content\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"card-body\"\n    }, __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"row mb-0\"\n    }, __jsx(OwnerContactInfo, {\n      state: ownerContactInfo,\n      handleDetailsChange: this.handleDetailsChange\n    }), __jsx(LocationContactInfo, {\n      state: locationContactInfo,\n      handleDetailsChange: this.handleDetailsChange\n    })), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"row mb-0\"\n    }, __jsx(LocationEmailSettings, {\n      state: locationEmailSettings,\n      handleDetailsChange: this.handleDetailsChange\n    }), __jsx(LocationBranding, {\n      state: locationBranding,\n      handleDetailsChange: this.handleDetailsChange\n    }))), __jsx(\"div\", {\n      className: \"jsx-2557376288\" + \" \" + \"modal-footer\"\n    }, __jsx(\"a\", {\n      href: \"#!\",\n      onClick: this.onCloseModal,\n      className: \"jsx-2557376288\" + \" \" + \"modal-close waves-effect waves-teal btn-flat pink-text text-darken-1\"\n    }, \"Cancel\"), __jsx(\"a\", {\n      href: \"#\",\n      onClick: this.onSubmit,\n      className: \"jsx-2557376288\" + \" \" + \"btn\"\n    }, \"Save\"))))))), __jsx(_JSXStyle, {\n      id: \"2557376288\"\n    }, [\".overlay.jsx-2557376288{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:1999;}\", \".card-modal.jsx-2557376288{margin:0;border-radius:6px;}\", \".modal.jsx-2557376288{display:block;background-color:white;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}\", \".modal-custom.jsx-2557376288{opacity:1;visibility:visible;}\", \".modal-footer.jsx-2557376288{background-color:white;}\"]));\n  }\n\n}\n\nexport default NewLocationModal;","map":null,"metadata":{},"sourceType":"module"}