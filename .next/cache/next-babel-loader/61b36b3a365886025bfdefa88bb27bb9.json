{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Doughnut } from 'react-chartjs-2';\nimport ClickOffComponentWrapper from '../../../../../../ClickOffComponentWrapper';\nimport statusColorMap, { chartColorMap } from '../../../../../DetailWorksheetPage/utils/statusColorMap';\nimport LessonDetailAnswerSheet from '../../../../../LessonDetailAnswerSheet';\n\nconst data = (current, target, status) => ({\n  datasets: [{\n    data: [current, target - current],\n    backgroundColor: [chartColorMap[status], '#eaeaea']\n  }]\n});\n\nconst getLessonActivityStatus = status => {\n  if (status === \"Scheduled\") {\n    return 'card-main card-lesson-detail card-disabled card-assigned card';\n  }\n\n  return 'card-main card-lesson-detail card-assigned card';\n};\n\nclass LessonCard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onOpenDetailModal\", () => this.setState({\n      detailModalOpen: true\n    }));\n\n    _defineProperty(this, \"onCloseDetailModal\", () => this.setState({\n      detailModalOpen: false\n    }));\n\n    _defineProperty(this, \"onSetDropdown\", dropdownIsOpen => this.setState({\n      dropdownIsOpen: !dropdownIsOpen\n    }));\n\n    _defineProperty(this, \"onReschedule\", (assignDate, assignTime, dueDate, dueTime) => {\n      // eslint-disable-next-line no-console\n      console.warn('Stubbed out date functionality', assignDate, assignTime, dueDate, dueTime);\n    });\n\n    _defineProperty(this, \"renderLessonIcon\", subject => {\n      switch (subject) {\n        case 'Reading':\n          return 'icon-books';\n\n        case 'Writing':\n          return 'icon-hands';\n\n        case 'Math':\n          return 'icon-calculator';\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(this, \"renderDropdownOptions\", status => {\n      const {\n        lesson: {\n          assignDate,\n          assignTime,\n          dueDate,\n          dueTime\n        }\n      } = this.props;\n\n      if (status === \"Scheduled\" || status === 'Assigned') {\n        return __jsx(React.Fragment, null, __jsx(\"li\", null, __jsx(\"a\", {\n          href: \"#\"\n        }, \"Reschedule\")), __jsx(\"li\", null, __jsx(\"a\", {\n          href: \"#!\"\n        }, \"Unassign\")));\n      }\n\n      return __jsx(React.Fragment, null, __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onReschedule(assignDate, assignTime, dueDate, dueTime)\n      }, \"Reschedule\")), __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"#!\"\n      }, \"Mark all Flags Reviewed\")), __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"#!\"\n      }, \"Reset\")), __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"#!\"\n      }, \"Unassign\")));\n    });\n\n    _defineProperty(this, \"renderProblemCount\", (status, scoreStatus, score, problems, completedProblems) => {\n      if (status === \"Started\") {\n        return __jsx(\"span\", {\n          className: \"chart-value chart-value-column\",\n          style: {\n            bottom: '8px',\n            backgroundColor: chartColorMap[status]\n          }\n        }, __jsx(\"span\", {\n          className: \"chart-count\",\n          \"data-count-up\": true,\n          \"data-start-val\": \"0\",\n          \"data-end-val\": \"4\",\n          \"data-duration\": \"1\"\n        }, __jsx(\"span\", {\n          className: \"text-small\",\n          style: {\n            fontSize: 'x-small'\n          }\n        }, completedProblems)), __jsx(\"span\", {\n          className: \"text-small\",\n          style: {\n            fontSize: 'xx-small'\n          }\n        }, \"out of\"), \" \", __jsx(\"span\", {\n          className: \"text-small\",\n          style: {\n            fontSize: 'x-small'\n          }\n        }, problems));\n      }\n\n      return __jsx(\"span\", {\n        className: \"chart-value\",\n        style: {\n          height: '50px',\n          width: '50px',\n          bottom: '6px',\n          backgroundColor: chartColorMap[scoreStatus]\n        }\n      }, __jsx(\"span\", {\n        \"data-count-up\": true,\n        \"data-start-val\": \"0\",\n        \"data-end-val\": \"96\",\n        \"data-duration\": \"1\"\n      }), score !== \"\" ? __jsx(\"span\", {\n        className: \"percentage\"\n      }, Math.floor(`${score / problems * 100}`), \"%\") : null);\n    });\n\n    _defineProperty(this, \"renderAlerts\", flags => {\n      if (flags.length) {\n        return __jsx(\"span\", {\n          className: \"badge-rounded-xs badge red darken-2 white-text\"\n        }, __jsx(\"b\", {\n          className: \"badge-text\"\n        }, flags.length), \" \", __jsx(\"i\", {\n          className: \"icon-flag\"\n        }));\n      }\n\n      return __jsx(\"div\", {\n        className: \"right-col col s3\"\n      }, \"\\xA0\");\n    });\n\n    this.state = {\n      test: true,\n      dropdownIsOpen: false,\n      detailModalOpen: false\n    };\n  }\n\n  render() {\n    const {\n      dropdownIsOpen\n    } = this.state;\n    const {\n      lesson,\n      lesson: {\n        subject,\n        timeEstimate,\n        status,\n        scoreStatus,\n        score,\n        unit,\n        lessonName,\n        assigned,\n        flags,\n        type,\n        problems,\n        completedProblems = '',\n        passage,\n        dueDate,\n        availableDate,\n        completionDate,\n        overdue\n      }\n    } = this.props;\n    return __jsx(React.Fragment, null, __jsx(LessonDetailAnswerSheet, {\n      onCloseDetailModal: this.onCloseDetailModal,\n      open: this.state.detailModalOpen,\n      user: this.props.user,\n      lesson: lesson\n    }), __jsx(\"div\", {\n      className: \"card-main-col col s12 m8 l7 xl5\"\n    }, __jsx(\"div\", {\n      className: getLessonActivityStatus(status)\n    }, __jsx(\"div\", {\n      className: \"card-panel\",\n      style: {\n        backgroundColor: '#666',\n        color: '#fff'\n      }\n    }, __jsx(\"div\", {\n      className: \"card-panel-row row\"\n    }, __jsx(\"div\", {\n      className: \"icon-col col s1\"\n    }, __jsx(\"i\", {\n      className: this.renderLessonIcon(subject)\n    })), __jsx(\"div\", {\n      className: \"col s9\"\n    }, __jsx(\"div\", {\n      className: \"card-panel-text center-align\"\n    }, __jsx(\"div\", {\n      className: \"text-small\"\n    }, unit), __jsx(\"div\", {\n      className: \"text-large\"\n    }, __jsx(\"a\", {\n      href: \"#\",\n      onClick: this.onOpenDetailModal\n    }, lessonName)))), __jsx(\"div\", {\n      className: \"col s1 right-align\"\n    }, __jsx(\"div\", {\n      className: \"row icons-row\"\n    }, this.renderAlerts(flags), __jsx(\"div\", {\n      className: \"dropdown-block col\"\n    }, __jsx(\"a\", {\n      className: \"dropdown-trigger btn\",\n      href: \"#\",\n      \"data-target\": \"dropdown01\",\n      onClick: () => this.onSetDropdown(dropdownIsOpen)\n    }, __jsx(\"i\", {\n      className: \"material-icons dots-icon\"\n    }, \"more_vert\")), dropdownIsOpen ? __jsx(ClickOffComponentWrapper, {\n      onOuterClick: () => this.onSetDropdown(dropdownIsOpen)\n    }, __jsx(\"ul\", {\n      id: \"dropdown01\",\n      className: \"dropdown-content dropdown-wide\",\n      style: {\n        display: \"block\",\n        opacity: '1',\n        transform: 'scaleX(1) scaleY(1)'\n      }\n    }, this.renderDropdownOptions(status))) : null))))), __jsx(\"div\", {\n      className: \"card-content\"\n    }, __jsx(\"div\", {\n      className: \"d-flex sameheight-all row mb-0\"\n    }, __jsx(\"div\", {\n      className: \"col s6\"\n    }, __jsx(\"div\", {\n      className: \"chart-container\"\n    }, __jsx(\"div\", {\n      className: \"chart-holder\",\n      style: {\n        width: '140px',\n        height: '95px'\n      }\n    }, __jsx(Doughnut, {\n      data: completionDate ? () => data(score, problems, scoreStatus) : () => data(completedProblems, problems, status),\n      height: 210,\n      options: {\n        circumference: 1.45 * Math.PI,\n        rotation: -3.85,\n        cutoutPercentage: 60,\n        tooltips: false\n      }\n    }), this.renderProblemCount(status, scoreStatus, score, problems, completedProblems)), __jsx(\"div\", {\n      className: \"chart-row\"\n    }, __jsx(\"div\", {\n      className: \"chart-col chart-start\"\n    }, \"\\xA0\"), __jsx(\"div\", {\n      className: \"chart-col chart-end\"\n    }, __jsx(\"span\", {\n      className: \"amount\",\n      style: {\n        color: chartColorMap[status]\n      }\n    }, problems))), __jsx(\"div\", {\n      className: \"chart-description\",\n      style: {\n        marginTop: '10px'\n      }\n    }, __jsx(\"dl\", {\n      className: \"dl-horizontal\"\n    }, __jsx(\"dt\", null, \"Time Est:\"), __jsx(\"dd\", null, timeEstimate)), __jsx(\"dl\", {\n      className: \"dl-horizontal\"\n    }, __jsx(\"dt\", null, \"Problems:\"), __jsx(\"dd\", null, problems))))), __jsx(\"div\", {\n      className: \"col s6 right-align justify-end\"\n    }, __jsx(\"dl\", {\n      className: \"dl-horizontal\",\n      style: {\n        marginTop: '20px',\n        marginBottom: '-10px'\n      }\n    }, __jsx(\"dt\", null, \"Available:\"), __jsx(\"dd\", null, __jsx(\"time\", {\n      dateTime: availableDate\n    }, availableDate))), __jsx(\"dl\", {\n      className: overdue ? 'dl-horizontal red-text text-darken-3' : 'dl-horizontal',\n      style: {\n        marginTop: '13px',\n        marginBottom: '-3px'\n      }\n    }, !assigned || status === \"Scheduled\" ? __jsx(\"dt\", null, \"No Due Date\") : [__jsx(\"dt\", {\n      key: \"0\"\n    }, \"Due:\"), __jsx(\"dd\", {\n      key: \"1\"\n    }, __jsx(\"time\", {\n      dateTime: dueDate\n    }, dueDate))]), completionDate ? __jsx(\"dl\", {\n      className: \"dl-horizontal\"\n    }, __jsx(\"dt\", null, \"Completed:\"), __jsx(\"dd\", null, __jsx(\"time\", {\n      dateTime: completionDate\n    }, completionDate))) : null, __jsx(\"div\", {\n      className: \"align-self-end\"\n    }, scoreStatus !== \"\" ? __jsx(\"span\", {\n      className: `badge badge-rounded-md ${statusColorMap[scoreStatus]} white-text`\n    }, scoreStatus) : __jsx(\"span\", {\n      className: `badge badge-rounded-md ${statusColorMap[status]} white-text`\n    }, status))))), __jsx(\"div\", {\n      className: \"card-text\"\n    }, __jsx(\"dl\", {\n      className: \"dl-horizontal\"\n    }, __jsx(\"dt\", null, \"p.\", passage), __jsx(\"dd\", null, \"(\", type, \")\"))))));\n  }\n\n}\n\nLessonCard.propTypes = {\n  lesson: PropTypes.object.isRequired,\n  user: PropTypes.object.isRequired\n};\nexport default LessonCard;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Student/DetailLessonList/components/FullView/components/LessonCard/index.js"],"names":["React","PropTypes","Doughnut","ClickOffComponentWrapper","statusColorMap","chartColorMap","LessonDetailAnswerSheet","data","current","target","status","datasets","backgroundColor","getLessonActivityStatus","LessonCard","Component","constructor","props","setState","detailModalOpen","dropdownIsOpen","assignDate","assignTime","dueDate","dueTime","console","warn","subject","lesson","onReschedule","scoreStatus","score","problems","completedProblems","bottom","fontSize","height","width","Math","floor","flags","length","state","test","render","timeEstimate","unit","lessonName","assigned","type","passage","availableDate","completionDate","overdue","onCloseDetailModal","user","color","renderLessonIcon","onOpenDetailModal","renderAlerts","onSetDropdown","display","opacity","transform","renderDropdownOptions","circumference","PI","rotation","cutoutPercentage","tooltips","renderProblemCount","marginTop","marginBottom","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Doughnut } from 'react-chartjs-2';\nimport ClickOffComponentWrapper from '../../../../../../ClickOffComponentWrapper';\nimport statusColorMap, {chartColorMap} from '../../../../../DetailWorksheetPage/utils/statusColorMap';\nimport LessonDetailAnswerSheet from '../../../../../LessonDetailAnswerSheet';\n\nconst data = (current, target, status) => ({\n  datasets: [{\n    data: [current, target - current],\n    backgroundColor: [\n      chartColorMap[status],\n      '#eaeaea',\n    ],\n  }],\n})\n\nconst getLessonActivityStatus = (status) => {\n  if (status === \"Scheduled\") {\n    return 'card-main card-lesson-detail card-disabled card-assigned card';\n  }\n  return 'card-main card-lesson-detail card-assigned card';\n}\n\nclass LessonCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      test: true,\n      dropdownIsOpen: false,\n      detailModalOpen: false,\n    };\n  }\n\n  onOpenDetailModal = () => this.setState({detailModalOpen: true})\n  onCloseDetailModal = () => this.setState({detailModalOpen: false});\n  onSetDropdown = (dropdownIsOpen) => this.setState({ dropdownIsOpen: !dropdownIsOpen });\n\n  onReschedule = (assignDate, assignTime, dueDate, dueTime) => {\n    // eslint-disable-next-line no-console\n    console.warn('Stubbed out date functionality', assignDate, assignTime, dueDate, dueTime);\n  }\n\n  // eslint-disable-next-line consistent-return\n  renderLessonIcon = (subject) => {\n    switch (subject) {\n      case 'Reading':\n        return 'icon-books';\n      case 'Writing':\n        return 'icon-hands';\n      case 'Math':\n        return 'icon-calculator';\n      default:\n        break;\n    }\n  }\n\n  renderDropdownOptions = (status) => {\n    const { lesson: {assignDate, assignTime, dueDate, dueTime}} = this.props;\n    if (status === \"Scheduled\" || status === 'Assigned'){\n      return (\n        <React.Fragment>\n        <li><a href=\"#\">Reschedule</a></li>\n        <li><a href=\"#!\">Unassign</a></li>\n        </React.Fragment>\n      )\n    }\n      return (\n        <React.Fragment>\n        <li><a href=\"#\" onClick={this.onReschedule(assignDate, assignTime, dueDate, dueTime)}>Reschedule</a></li>\n        <li><a href=\"#!\" >Mark all Flags Reviewed</a></li>\n        <li><a href=\"#!\" >Reset</a></li>\n        <li><a href=\"#!\">Unassign</a></li>\n        </React.Fragment>\n      )\n  }\n\n  renderProblemCount = (status, scoreStatus, score, problems, completedProblems) => {\n    if (status === \"Started\") {\n      return (\n        <span className=\"chart-value chart-value-column\" style={{ bottom: '8px', backgroundColor: chartColorMap[status]}}>\n          <span className=\"chart-count\" data-count-up data-start-val=\"0\" data-end-val=\"4\" data-duration=\"1\"><span className=\"text-small\" style={{fontSize: 'x-small'}}>{completedProblems}</span></span>\n          <span className=\"text-small\" style={{fontSize: 'xx-small'}}>out of</span> <span className=\"text-small\" style={{fontSize: 'x-small'}}>{problems}</span>\n        </span>\n      )\n    }\n    return (\n      <span className=\"chart-value\" style={{ height: '50px', width: '50px', bottom: '6px', backgroundColor: chartColorMap[scoreStatus]}}><span data-count-up data-start-val=\"0\" data-end-val=\"96\" data-duration=\"1\"></span>\n      <If condition={score !== \"\"}>\n        <span className=\"percentage\">{Math.floor(`${score / problems * 100}`)}%</span>\n        </If>\n        </span>\n    )\n  }\n\n\n  renderAlerts = (flags) => {\n    if (flags.length) {\n      return (\n          <span className=\"badge-rounded-xs badge red darken-2 white-text\"><b className=\"badge-text\">{flags.length}</b> <i className=\"icon-flag\"></i></span>\n      )\n    }\n    return (\n      <div className=\"right-col col s3\">&nbsp;</div>\n    )\n  }\n\n  render() {\n    const { dropdownIsOpen } = this.state;\n    const {  lesson, lesson: { subject, timeEstimate, status, scoreStatus, score, unit, lessonName, assigned, flags,\n      type, problems, completedProblems = '', passage, dueDate,\n       availableDate, completionDate, overdue } } = this.props;\n    return (\n      <React.Fragment>\n      <LessonDetailAnswerSheet\n        onCloseDetailModal={this.onCloseDetailModal}\n        open={this.state.detailModalOpen}\n        user={this.props.user}\n        lesson={lesson}  />\n              <div className=\"card-main-col col s12 m8 l7 xl5\">\n        <div className={getLessonActivityStatus(status)}>\n          <div className=\"card-panel\" style={{ backgroundColor: '#666', color: '#fff' }}>\n            <div className=\"card-panel-row row\">\n              <div className=\"icon-col col s1\">\n                <i className={this.renderLessonIcon(subject)}></i>\n              </div>\n              <div className=\"col s9\">\n                <div className=\"card-panel-text center-align\">\n                  <div className=\"text-small\">{unit}</div>\n                  <div className=\"text-large\"><a href=\"#\" onClick={this.onOpenDetailModal}>{lessonName}</a></div>\n                </div>\n              </div>\n              <div className=\"col s1 right-align\">\n                <div className=\"row icons-row\">\n                  {this.renderAlerts(flags)}\n                  <div className=\"dropdown-block col\">\n                    <a\n                      className='dropdown-trigger btn'\n                      href='#'\n                      data-target='dropdown01'\n                      onClick={() => this.onSetDropdown(dropdownIsOpen)}\n                    ><i className=\"material-icons dots-icon\">more_vert</i></a>\n                    <If condition={dropdownIsOpen}>\n                      <ClickOffComponentWrapper onOuterClick={() => this.onSetDropdown(dropdownIsOpen)}>\n                        <ul id='dropdown01' className='dropdown-content dropdown-wide' style={{ display: \"block\", opacity: '1', transform: 'scaleX(1) scaleY(1)' }}>\n                          {this.renderDropdownOptions(status)}\n                        </ul>\n                      </ClickOffComponentWrapper>\n                    </If>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"d-flex sameheight-all row mb-0\">\n              <div className=\"col s6\">\n                <div className=\"chart-container\">\n                  <div className=\"chart-holder\" style={{width: '140px', height: '95px'}}>\n                        <Doughnut\n                          data={completionDate ? () => data(score, problems, scoreStatus) : () => data(completedProblems, problems, status)}\n                          height={210}\n                          options={{\n                            circumference: 1.45 * Math.PI,\n                            rotation: -3.85,\n                            cutoutPercentage: 60,\n                            tooltips: false,\n                          }}\n                          />\n                          {this.renderProblemCount(status, scoreStatus, score, problems, completedProblems)}\n                  </div>\n                  <div className=\"chart-row\">\n                    <div className=\"chart-col chart-start\">&nbsp;</div>\n                    <div className=\"chart-col chart-end\">\n                      <span className=\"amount\" style={{color: chartColorMap[status]}}>{problems}</span>\n                    </div>\n                  </div>\n                  <div className=\"chart-description\" style={{marginTop: '10px'}}>\n                    <dl className=\"dl-horizontal\">\n                      <dt>Time Est:</dt>\n                      <dd>{timeEstimate}</dd>\n                    </dl>\n                    <dl className=\"dl-horizontal\">\n                      <dt>Problems:</dt>\n                      <dd>{problems}</dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col s6 right-align justify-end\">\n                <dl className=\"dl-horizontal\" style={{marginTop: '20px', marginBottom: '-10px'}}>\n                  <dt>Available:</dt>\n                  <dd><time dateTime={availableDate}>{availableDate}</time></dd>\n                </dl>\n                <dl className={overdue ? 'dl-horizontal red-text text-darken-3' : 'dl-horizontal'} style={{marginTop: '13px', marginBottom: '-3px'}}>\n                  <Choose>\n                    <When condition={!assigned || status === \"Scheduled\"}>\n                      <dt>No Due Date</dt>\n                    </When>\n                    <Otherwise>\n                      <dt>Due:</dt>\n                      <dd><time dateTime={dueDate}>{dueDate}</time></dd>\n                    </Otherwise>\n                  </Choose>\n                </dl>\n                <If condition={completionDate}>\n                <dl className=\"dl-horizontal\">\n                  <dt>Completed:</dt>\n                  <dd><time dateTime={completionDate}>{completionDate}</time></dd>\n                </dl>\n                </If>\n              <div className=\"align-self-end\">\n                <Choose>\n                  <When condition={scoreStatus !== \"\"}>\n                    <span className={`badge badge-rounded-md ${statusColorMap[scoreStatus]} white-text`}>{scoreStatus}</span>\n                  </When>\n                  <Otherwise>\n                  <span className={`badge badge-rounded-md ${statusColorMap[status]} white-text`}>{status}</span>\n                  </Otherwise>\n                </Choose>\n              </div>\n              </div>\n            </div>\n          </div>\n            <div className=\"card-text\">\n              <dl className=\"dl-horizontal\">\n                  <dt>p.{passage}</dt>\n                  <dd>({type})</dd>\n                </dl>\n          </div>\n        </div>\n      </div>\n      </React.Fragment>\n\n    );\n  }\n}\n\nLessonCard.propTypes = {\n  lesson: PropTypes.object.isRequired,\n  user: PropTypes.object.isRequired,\n\n};\n\nexport default LessonCard;\n"]},"metadata":{},"sourceType":"module"}