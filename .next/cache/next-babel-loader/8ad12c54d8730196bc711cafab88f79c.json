{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport Portal from '../../../../Portal';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\nvar InstructorDetailsModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(InstructorDetailsModal, _React$Component);\n\n  function InstructorDetailsModal(props) {\n    var _this;\n\n    _classCallCheck(this, InstructorDetailsModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InstructorDetailsModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillReceiveProps\", function (nextProps) {\n      if (!_this.state.originalInstructor || nextProps.instructor.id !== _this.state.originalInstructor.id) {\n        var _nextProps$instructor = nextProps.instructor;\n        _nextProps$instructor = _nextProps$instructor === void 0 ? {} : _nextProps$instructor;\n        var id = _nextProps$instructor.id,\n            basicInfo = _nextProps$instructor.basicInfo,\n            accountInfo = _nextProps$instructor.accountInfo,\n            contactInfo = _nextProps$instructor.contactInfo,\n            locations = _nextProps$instructor.locations;\n        var updatedInstructor = {\n          id: id,\n          basicInfo: basicInfo,\n          accountInfo: accountInfo,\n          contactInfo: contactInfo,\n          locations: locations\n        };\n        var originalInstructorState = _this.state.originalInstructor;\n        var originalInstructor = update(originalInstructorState, {\n          $merge: nextProps.instructor\n        });\n\n        _this.setState({\n          originalInstructor: originalInstructor,\n          updatedInstructor: updatedInstructor\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetDropdown\", function (dropdownIndex) {\n      return _this.setState({\n        dropdownIndex: dropdownIndex,\n        dropdownIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseDropdown\", function () {\n      return _this.setState({\n        dropdownIsOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenDeleteLocationModal\", function (pendingLocationDelete) {\n      return _this.setState({\n        deleteLocationModalOpen: true,\n        pendingLocationDelete: pendingLocationDelete\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseDeleteLocationModal\", function () {\n      return _this.setState({\n        deleteLocationModalOpen: false,\n        pendingLocationDelete: {}\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenNewLocationModal\", function () {\n      return _this.setState({\n        newLocationModalOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseNewLocationModal\", function () {\n      return _this.setState({\n        newLocationModalOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenEditLocationModal\", function (activeLocation) {\n      return _this.setState({\n        editLocationModalOpen: true,\n        activeLocation: activeLocation\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseEditLocationModal\", function () {\n      return _this.setState({\n        editLocationModalOpen: false,\n        dropdownIsOpen: false,\n        activeLocation: {}\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCancelChanges\", function () {\n      var onClose = _this.props.onClose;\n      var _this$state = _this.state,\n          updatedInstructor = _this$state.updatedInstructor,\n          originalInstructor = _this$state.originalInstructor;\n\n      _this.setState({\n        updatedInstructor: originalInstructor\n      }, onClose());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetValidation\", function (validation, cb) {\n      return _this.setState({\n        validation: validation\n      }, cb);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function _callee(event) {\n      var _this$state$updatedIn, id, basicInfo, accountInfo, contactInfo, locations, _this$props, onSaveLocationError, onSaveInstructorChanges, onClose, valid, postBody;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _this$state$updatedIn = _this.state.updatedInstructor, id = _this$state$updatedIn.id, basicInfo = _this$state$updatedIn.basicInfo, accountInfo = _this$state$updatedIn.accountInfo, contactInfo = _this$state$updatedIn.contactInfo, locations = _this$state$updatedIn.locations;\n              _this$props = _this.props, onSaveLocationError = _this$props.onSaveLocationError, onSaveInstructorChanges = _this$props.onSaveInstructorChanges, onClose = _this$props.onClose; // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n              // const valid = true;\n\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(nestedEditFieldValidation(_this.state, _this.state.updatedInstructor, _this.onSetValidation, function (validation) {\n                return console.warn('validation', validation);\n              }));\n\n            case 5:\n              valid = _context.sent;\n\n              if (!valid) {\n                // return onSaveLocationError();\n                console.warn('not valid');\n              }\n\n              postBody = {\n                id: id,\n                basicInfo: basicInfo,\n                accountInfo: accountInfo,\n                contactInfo: contactInfo,\n                locations: locations\n              };\n              onSaveInstructorChanges(postBody);\n              console.warn('stubbed out save function');\n              onClose();\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"initialInstructorMount\", function () {\n      return _this.state.originalInstructor.id !== _this.props.instructor.id;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDetailsChange\", function (event, name, section) {\n      var previousInstructorState = _this.state.updatedInstructor;\n      var value = event.target ? event.target.value : event;\n      var updatedInstructor = update(previousInstructorState, _defineProperty({}, section, {\n        $merge: _defineProperty({}, name, value)\n      }));\n\n      _this.setState({\n        updatedInstructor: updatedInstructor\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderModalHeader\", function () {\n      var _this$props$instructo = _this.props.instructor.accountInfo,\n          initialLastName = _this$props$instructo.lastName,\n          initialFIrstName = _this$props$instructo.firstName,\n          initialEmail = _this$props$instructo.email;\n      var _this$state$updatedIn2 = _this.state.updatedInstructor.accountInfo,\n          updatedLastName = _this$state$updatedIn2.lastName,\n          updatedFirstName = _this$state$updatedIn2.firstName,\n          updatedEmail = _this$state$updatedIn2.email;\n      var lastName;\n      var firstName;\n      var email;\n\n      if (_this.initialInstructorMount()) {\n        lastName = initialLastName;\n        firstName = initialFIrstName;\n        email = initialEmail;\n      } else {\n        lastName = updatedLastName;\n        firstName = updatedFirstName;\n        email = updatedEmail;\n      }\n\n      return __jsx(React.Fragment, null, __jsx(\"h4\", {\n        className: \"h3\"\n      }, lastName, \", \", firstName), __jsx(\"a\", {\n        href: \"mailto:\".concat(email)\n      }, email));\n    });\n\n    _this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      updatedInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: ''\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: ''\n        },\n        locations: []\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true\n        }\n      }\n    };\n    return _this;\n  }\n\n  _createClass(InstructorDetailsModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props$instructo2 = this.props.instructor;\n      _this$props$instructo2 = _this$props$instructo2 === void 0 ? {} : _this$props$instructo2;\n      var id = _this$props$instructo2.id,\n          basicInfo = _this$props$instructo2.basicInfo,\n          accountInfo = _this$props$instructo2.accountInfo,\n          contactInfo = _this$props$instructo2.contactInfo,\n          locations = _this$props$instructo2.locations;\n      var updatedInstructor = {\n        id: id,\n        basicInfo: basicInfo,\n        accountInfo: accountInfo,\n        contactInfo: contactInfo,\n        locations: locations\n      };\n      var originalInstructorState = this.state.originalInstructor;\n      var originalInstructor = update(originalInstructorState, {\n        $merge: updatedInstructor\n      });\n      this.setState({\n        originalInstructor: originalInstructor,\n        updatedInstructor: updatedInstructor\n      }); // eslint-disable-line\n    } // This resets the component state to reflect the details of the next instructor the user clicks on\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          open = _this$props2.open,\n          _this$props2$instruct = _this$props2.instructor,\n          accountInfo = _this$props2$instruct.accountInfo,\n          contactInfo = _this$props2$instruct.contactInfo,\n          locations = _this$props2$instruct.locations,\n          onOpenDeleteModal = _this$props2.onOpenDeleteModal,\n          deleteModalOpen = _this$props2.deleteModalOpen;\n      var _this$state2 = this.state,\n          dropdownIsOpen = _this$state2.dropdownIsOpen,\n          dropdownIndex = _this$state2.dropdownIndex,\n          activeLocation = _this$state2.activeLocation,\n          deleteLocationModalOpen = _this$state2.deleteLocationModalOpen,\n          pendingLocationDelete = _this$state2.pendingLocationDelete,\n          newLocationModalOpen = _this$state2.newLocationModalOpen,\n          editLocationModalOpen = _this$state2.editLocationModalOpen,\n          _this$state2$updatedI = _this$state2.updatedInstructor,\n          updatedAccountInfo = _this$state2$updatedI.accountInfo,\n          updatedContactInfo = _this$state2$updatedI.contactInfo,\n          updatedLocations = _this$state2$updatedI.locations;\n      return __jsx(Portal, {\n        selector: \"#modal\"\n      }, open && __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"overlay\"\n      }, __jsx(ClickOffComponentWrapper, {\n        onOuterClick: this.onCancelChanges,\n        nestedModals: deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen\n      }, __jsx(\"div\", {\n        id: \"modal_user_edit\",\n        className: \"jsx-2557376288\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-modal card-main card grey lighten-3\"\n      }, __jsx(\"div\", {\n        style: {\n          backgroundColor: '#31837a',\n          color: '#fff'\n        },\n        className: \"jsx-2557376288\" + \" \" + \"owner-box card-panel card-panel-title\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-panel-row row\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"col s9\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"user-block\"\n      }, __jsx(\"div\", {\n        style: {\n          backgroundColor: '#0085ce',\n          color: '#fff'\n        },\n        className: \"jsx-2557376288\" + \" \" + \"user-circle\"\n      }, __jsx(\"img\", {\n        src: \"./static/images/img-owner01.jpg\",\n        alt: \"\",\n        className: \"jsx-2557376288\"\n      })), __jsx(\"div\", {\n        style: {\n          color: '#fff'\n        },\n        className: \"jsx-2557376288\" + \" \" + \"user-text\"\n      }, this.renderModalHeader()))), __jsx(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        className: \"jsx-2557376288\" + \" \" + \"col\"\n      }, __jsx(\"span\", {\n        className: \"jsx-2557376288\" + \" \" + \"block-icon\"\n      }, __jsx(\"i\", {\n        className: \"jsx-2557376288\" + \" \" + \"icon-owner\"\n      }), __jsx(\"span\", {\n        className: \"jsx-2557376288\" + \" \" + \"text-icon\"\n      }, \"Owner\"))))), __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-content\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"card-body\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"row mb-0\"\n      }, __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"col s12 l6\"\n      }, __jsx(AccountInfo, {\n        state: this.initialInstructorMount() ? accountInfo : updatedAccountInfo,\n        handleDetailsChange: this.handleDetailsChange\n      }), __jsx(ContactInfo, {\n        state: this.initialInstructorMount() ? contactInfo : updatedContactInfo,\n        handleDetailsChange: this.handleDetailsChange\n      })), __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"col s12 l6\"\n      }, __jsx(Locations, {\n        state: this.initialInstructorMount() ? locations : updatedLocations,\n        handleDetailsChange: this.handleDetailsChange,\n        dropdownIsOpen: dropdownIsOpen,\n        dropdownIndex: dropdownIndex,\n        activeLocation: activeLocation,\n        deleteLocationModalOpen: deleteLocationModalOpen,\n        pendingLocationDelete: pendingLocationDelete,\n        newLocationModalOpen: newLocationModalOpen,\n        editLocationModalOpen: editLocationModalOpen,\n        onSetDropdown: this.onSetDropdown,\n        onCloseDropdown: this.onCloseDropdown,\n        onOpenNewLocationModal: this.onOpenNewLocationModal,\n        onOpenEditLocationModal: this.onOpenEditLocationModal,\n        onCloseNewLocationModal: this.onCloseNewLocationModal,\n        onCloseEditLocationModal: this.onCloseEditLocationModal,\n        onOpenDeleteLocationModal: this.onOpenDeleteLocationModal,\n        onCloseDeleteLocationModal: this.onCloseDeleteLocationModal\n      })))), __jsx(\"div\", {\n        className: \"jsx-2557376288\" + \" \" + \"modal-footer\"\n      }, __jsx(\"a\", {\n        href: \"#\",\n        onClick: onOpenDeleteModal,\n        className: \"jsx-2557376288\" + \" \" + \"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n      }, \"Delete\"), __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onCancelChanges,\n        className: \"jsx-2557376288\" + \" \" + \"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n      }, \"Cancel\"), __jsx(\"a\", {\n        href: \"#\",\n        onClick: this.onSubmit,\n        className: \"jsx-2557376288\" + \" \" + \"btn\"\n      }, \"Save\"))))))), __jsx(_JSXStyle, {\n        id: \"2557376288\"\n      }, \".overlay.jsx-2557376288{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:1999;}.card-modal.jsx-2557376288{margin:0;border-radius:6px;}.modal.jsx-2557376288{display:block;background-color:white;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}.modal-custom.jsx-2557376288{opacity:1;visibility:visible;}.modal-footer.jsx-2557376288{background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL0luc3RydWN0b3IvTGlzdFBhZ2UvY29tcG9uZW50cy9JbnN0cnVjdG9yRGV0YWlsc01vZGFsL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJRVyxBQUdnQyxBQVNOLEFBSUssQUFTSixBQUlhLFNBaEJMLENBYUMsSUFUSSxDQWJhLFFBMEJ0QyxJQWhCQSxFQWFBLFFBVG9CLFdBYlosTUFDRSxDQWFBLE9BWkMsQ0FhQyxRQVpILEVBYUUsS0FaSSxJQWEyRyxTQVoxSCxvR0FhQSIsImZpbGUiOiIvVm9sdW1lcy9IREQvU2l0ZXMvY2xlYXJjaG9pY2V0ZXN0cHJlcC9jbGVhci1jaG9pY2UtYWRtaW4vY29tcG9uZW50cy9JbnN0cnVjdG9yL0xpc3RQYWdlL2NvbXBvbmVudHMvSW5zdHJ1Y3RvckRldGFpbHNNb2RhbC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB1cGRhdGUgZnJvbSAnaW1tdXRhYmlsaXR5LWhlbHBlcic7XG5cbmltcG9ydCBQb3J0YWwgZnJvbSAnLi4vLi4vLi4vLi4vUG9ydGFsJztcbmltcG9ydCBDbGlja09mZkNvbXBvbmVudFdyYXBwZXIgZnJvbSAnLi4vLi4vLi4vLi4vQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyJztcblxuaW1wb3J0IEFjY291bnRJbmZvIGZyb20gJy4uL1NoYXJlZE1vZGFsQ29tcG9uZW50cy9BY2NvdW50SW5mbyc7XG5pbXBvcnQgQ29udGFjdEluZm8gZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0NvbnRhY3RJbmZvJztcbmltcG9ydCBMb2NhdGlvbnMgZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0xvY2F0aW9ucyc7XG5cbmltcG9ydCB7IG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9maWVsZFZhbGlkYXRpb24nO1xuXG5jbGFzcyBJbnN0cnVjdG9yRGV0YWlsc01vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRlbGV0ZUxvY2F0aW9uTW9kYWxPcGVuOiBmYWxzZSxcbiAgICAgIG5ld0xvY2F0aW9uTW9kYWxPcGVuOiBmYWxzZSxcbiAgICAgIGVkaXRMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsXG4gICAgICBwZW5kaW5nTG9jYXRpb25EZWxldGU6IHt9LFxuICAgICAgYWN0aXZlTG9jYXRpb246IHt9LFxuICAgICAgZHJvcGRvd25Jc09wZW46IGZhbHNlLFxuICAgICAgZHJvcGRvd25JbmRleDogbnVsbCxcbiAgICAgIG9yaWdpbmFsSW5zdHJ1Y3Rvcjoge1xuICAgICAgICBhY2NvdW50SW5mbzoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICBnZW5kZXI6ICcnLFxuICAgICAgICB9LFxuICAgICAgICBjb250YWN0SW5mbzoge1xuICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICBzdHJlZXRBZGRyZXNzOiAnJyxcbiAgICAgICAgICBjaXR5OiAnJyxcbiAgICAgICAgICBzdGF0ZTogJycsXG4gICAgICAgICAgemlwOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgICB1cGRhdGVkSW5zdHJ1Y3Rvcjoge1xuICAgICAgICBhY2NvdW50SW5mbzoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICBnZW5kZXI6ICcnLFxuICAgICAgICB9LFxuICAgICAgICBjb250YWN0SW5mbzoge1xuICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICBzdHJlZXRBZGRyZXNzOiAnJyxcbiAgICAgICAgICBjaXR5OiAnJyxcbiAgICAgICAgICBzdGF0ZTogJycsXG4gICAgICAgICAgemlwOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgIGFjY291bnRJbmZvOiB7XG4gICAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICAgIGxhc3ROYW1lOiB0cnVlLFxuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIGdlbmRlcjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgaW5zdHJ1Y3RvcjogeyBpZCwgYmFzaWNJbmZvLCBhY2NvdW50SW5mbywgY29udGFjdEluZm8sIGxvY2F0aW9ucyB9ID0ge30gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdXBkYXRlZEluc3RydWN0b3IgPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH07XG4gICAgY29uc3QgeyBvcmlnaW5hbEluc3RydWN0b3I6IG9yaWdpbmFsSW5zdHJ1Y3RvclN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IG9yaWdpbmFsSW5zdHJ1Y3RvciA9IHVwZGF0ZShvcmlnaW5hbEluc3RydWN0b3JTdGF0ZSwge1xuICAgICAgJG1lcmdlOiB1cGRhdGVkSW5zdHJ1Y3RvcixcbiAgICB9KTtcbiAgICB0aGlzLnNldFN0YXRlKHsgb3JpZ2luYWxJbnN0cnVjdG9yLCB1cGRhdGVkSW5zdHJ1Y3RvciB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB9XG5cbiAgLy8gVGhpcyByZXNldHMgdGhlIGNvbXBvbmVudCBzdGF0ZSB0byByZWZsZWN0IHRoZSBkZXRhaWxzIG9mIHRoZSBuZXh0IGluc3RydWN0b3IgdGhlIHVzZXIgY2xpY2tzIG9uXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSAobmV4dFByb3BzKSA9PiB7XG4gICAgaWYgKCghdGhpcy5zdGF0ZS5vcmlnaW5hbEluc3RydWN0b3IgfHwgbmV4dFByb3BzLmluc3RydWN0b3IuaWQgIT09IHRoaXMuc3RhdGUub3JpZ2luYWxJbnN0cnVjdG9yLmlkKSkge1xuICAgICAgY29uc3QgeyBpbnN0cnVjdG9yOiB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH0gPSB7fSB9ID0gbmV4dFByb3BzO1xuICAgICAgY29uc3QgdXBkYXRlZEluc3RydWN0b3IgPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH07XG4gICAgICBjb25zdCB7IG9yaWdpbmFsSW5zdHJ1Y3Rvcjogb3JpZ2luYWxJbnN0cnVjdG9yU3RhdGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCBvcmlnaW5hbEluc3RydWN0b3IgPSB1cGRhdGUob3JpZ2luYWxJbnN0cnVjdG9yU3RhdGUsIHtcbiAgICAgICAgJG1lcmdlOiBuZXh0UHJvcHMuaW5zdHJ1Y3RvcixcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9yaWdpbmFsSW5zdHJ1Y3RvciwgdXBkYXRlZEluc3RydWN0b3IgfSk7XG4gICAgfVxuICB9XG5cbiAgb25TZXREcm9wZG93biA9IChkcm9wZG93bkluZGV4KSA9PiB0aGlzLnNldFN0YXRlKHsgZHJvcGRvd25JbmRleCwgZHJvcGRvd25Jc09wZW46IHRydWUgfSk7XG4gIG9uQ2xvc2VEcm9wZG93biA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBkcm9wZG93bklzT3BlbjogZmFsc2UgfSk7XG5cbiAgb25PcGVuRGVsZXRlTG9jYXRpb25Nb2RhbCA9IChwZW5kaW5nTG9jYXRpb25EZWxldGUpID0+IHRoaXMuc2V0U3RhdGUoeyBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbjogdHJ1ZSwgcGVuZGluZ0xvY2F0aW9uRGVsZXRlIH0pO1xuICBvbkNsb3NlRGVsZXRlTG9jYXRpb25Nb2RhbCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZToge30gfSk7XG5cbiAgb25PcGVuTmV3TG9jYXRpb25Nb2RhbCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBuZXdMb2NhdGlvbk1vZGFsT3BlbjogdHJ1ZSB9KTtcbiAgb25DbG9zZU5ld0xvY2F0aW9uTW9kYWwgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgbmV3TG9jYXRpb25Nb2RhbE9wZW46IGZhbHNlIH0pO1xuXG4gIG9uT3BlbkVkaXRMb2NhdGlvbk1vZGFsID0gKGFjdGl2ZUxvY2F0aW9uKSA9PiB0aGlzLnNldFN0YXRlKHsgZWRpdExvY2F0aW9uTW9kYWxPcGVuOiB0cnVlLCBhY3RpdmVMb2NhdGlvbiB9KTtcbiAgb25DbG9zZUVkaXRMb2NhdGlvbk1vZGFsID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGVkaXRMb2NhdGlvbk1vZGFsT3BlbjogZmFsc2UsIGRyb3Bkb3duSXNPcGVuOiBmYWxzZSwgYWN0aXZlTG9jYXRpb246IHt9IH0pO1xuXG4gIG9uQ2FuY2VsQ2hhbmdlcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB1cGRhdGVkSW5zdHJ1Y3Rvciwgb3JpZ2luYWxJbnN0cnVjdG9yIH0gPSB0aGlzLnN0YXRlO1xuICAgIHRoaXMuc2V0U3RhdGUoeyB1cGRhdGVkSW5zdHJ1Y3Rvcjogb3JpZ2luYWxJbnN0cnVjdG9yIH0sIG9uQ2xvc2UoKSk7XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbnRvIG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24sIGl0IHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24gY2hlY2sgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgLy8gVGhlIHVwZGF0ZWQgY29tcG9uZW50IHZhbGlkYXRpb24gc3RhdGUgaXMgc2V0IGFuZCB0aGVuIHRoZSBjYWxsYmFjayBpcyBkaXNwYXRjaGVkIC0gaW4gdGhpcyBjYXNlLCB0aGUgY2FsbGJhY2sgaGFuZGxlcyB0aGUgdG9hc3Qgd2FybmluZyBhdCB0aGUgY29udGFpbmVyIGxldmVsXG4gIG9uU2V0VmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uLCBjYikgPT4gdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRpb24gfSwgY2IpO1xuXG4gIC8vIElmIGFsbCB0aGUgZmllbGRzIGFyZSB2YWxpZCwgd2UgY29uc3RydWN0IGEgcG9zdCBib2R5IGFuZCBjYWxsIG9uU2F2ZU5ld0xvY2F0aW9uIHBhc3NlZCBkb3duIGZyb20gdGhlIGNvbnRhaW5lciBsZXZlbFxuICBvblN1Ym1pdCA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgeyB1cGRhdGVkSW5zdHJ1Y3RvcjogeyBpZCwgYmFzaWNJbmZvLCBhY2NvdW50SW5mbywgY29udGFjdEluZm8sIGxvY2F0aW9ucyB9IH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgb25TYXZlTG9jYXRpb25FcnJvciwgb25TYXZlSW5zdHJ1Y3RvckNoYW5nZXMsIG9uQ2xvc2UgfSA9IHRoaXMucHJvcHM7XG4gICAgLy8gTk9URTogU3dhcCBvdXQgd2hhdCBpbnN0YW5jZSBvZiB2YWxpZCBpcyBhY3RpdmUgaWYgeW91IHdhbnQgdG8gdGVzdCBzYXZpbmcgYSBuZXcgbG9jYXRpb24gd2l0aG91dCB3b3JyeWluZyBhYm91dCB2YWxpZGF0aW9uXG4gICAgLy8gY29uc3QgdmFsaWQgPSB0cnVlO1xuICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgbmVzdGVkRWRpdEZpZWxkVmFsaWRhdGlvbih0aGlzLnN0YXRlLCB0aGlzLnN0YXRlLnVwZGF0ZWRJbnN0cnVjdG9yLCB0aGlzLm9uU2V0VmFsaWRhdGlvbiwgKHZhbGlkYXRpb24pID0+IGNvbnNvbGUud2FybigndmFsaWRhdGlvbicsIHZhbGlkYXRpb24pKTtcbiAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAvLyByZXR1cm4gb25TYXZlTG9jYXRpb25FcnJvcigpO1xuICAgICAgY29uc29sZS53YXJuKCdub3QgdmFsaWQnKTtcbiAgICB9XG4gICAgY29uc3QgcG9zdEJvZHkgPSB7IGlkLCBiYXNpY0luZm8sIGFjY291bnRJbmZvLCBjb250YWN0SW5mbywgbG9jYXRpb25zIH07XG4gICAgb25TYXZlSW5zdHJ1Y3RvckNoYW5nZXMocG9zdEJvZHkpO1xuICAgIGNvbnNvbGUud2Fybignc3R1YmJlZCBvdXQgc2F2ZSBmdW5jdGlvbicpO1xuICAgIG9uQ2xvc2UoKTtcbiAgfVxuXG4gIGluaXRpYWxJbnN0cnVjdG9yTW91bnQgPSAoKSA9PiB0aGlzLnN0YXRlLm9yaWdpbmFsSW5zdHJ1Y3Rvci5pZCAhPT0gdGhpcy5wcm9wcy5pbnN0cnVjdG9yLmlkO1xuXG4gIC8vIFdlIHB1bGwgdGhlIHZhbHVlIGJhc2VkIG9uIHRoZSBmaWVsZCB0eXBlIHRoZW4gbWVyZ2UgdGhhdCB1cGRhdGVkIGtleS92YWx1ZSBwYWlyIHdpdGggdGhlIGxhc3QgdmVyc2lvbiBvZiBjb21wb25lbnQgc3RhdGVcbiAgaGFuZGxlRGV0YWlsc0NoYW5nZSA9IChldmVudCwgbmFtZSwgc2VjdGlvbikgPT4ge1xuICAgIGNvbnN0IHsgdXBkYXRlZEluc3RydWN0b3I6IHByZXZpb3VzSW5zdHJ1Y3RvclN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHZhbHVlID0gZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LnZhbHVlIDogZXZlbnQ7XG4gICAgY29uc3QgdXBkYXRlZEluc3RydWN0b3IgPSB1cGRhdGUocHJldmlvdXNJbnN0cnVjdG9yU3RhdGUsIHtcbiAgICAgIFtzZWN0aW9uXTogeyAkbWVyZ2U6IHsgW25hbWVdOiB2YWx1ZSB9IH0sXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZWRJbnN0cnVjdG9yIH0pO1xuICB9XG5cbiAgcmVuZGVyTW9kYWxIZWFkZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBpbnN0cnVjdG9yOiB7IGFjY291bnRJbmZvOiB7IGxhc3ROYW1lOiBpbml0aWFsTGFzdE5hbWUsIGZpcnN0TmFtZTogaW5pdGlhbEZJcnN0TmFtZSwgZW1haWw6IGluaXRpYWxFbWFpbCB9IH0gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB1cGRhdGVkSW5zdHJ1Y3RvcjogeyBhY2NvdW50SW5mbzogeyBsYXN0TmFtZTogdXBkYXRlZExhc3ROYW1lLCBmaXJzdE5hbWU6IHVwZGF0ZWRGaXJzdE5hbWUsIGVtYWlsOiB1cGRhdGVkRW1haWwgfSB9IH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBsYXN0TmFtZTtcbiAgICBsZXQgZmlyc3ROYW1lO1xuICAgIGxldCBlbWFpbDtcbiAgICBpZiAodGhpcy5pbml0aWFsSW5zdHJ1Y3Rvck1vdW50KCkpIHtcbiAgICAgIGxhc3ROYW1lID0gaW5pdGlhbExhc3ROYW1lO1xuICAgICAgZmlyc3ROYW1lID0gaW5pdGlhbEZJcnN0TmFtZTtcbiAgICAgIGVtYWlsID0gaW5pdGlhbEVtYWlsO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0TmFtZSA9IHVwZGF0ZWRMYXN0TmFtZTtcbiAgICAgIGZpcnN0TmFtZSA9IHVwZGF0ZWRGaXJzdE5hbWU7XG4gICAgICBlbWFpbCA9IHVwZGF0ZWRFbWFpbDtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgPGg0IGNsYXNzTmFtZT1cImgzXCI+e2xhc3ROYW1lfSwge2ZpcnN0TmFtZX08L2g0PlxuICAgICAgICA8YSBocmVmPXtgbWFpbHRvOiR7ZW1haWx9YH0+e2VtYWlsfTwvYT5cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG9wZW4sIGluc3RydWN0b3I6IHsgYWNjb3VudEluZm8sIGNvbnRhY3RJbmZvLCBsb2NhdGlvbnMgfSwgb25PcGVuRGVsZXRlTW9kYWwsIGRlbGV0ZU1vZGFsT3BlbiB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGRyb3Bkb3duSXNPcGVuLCBkcm9wZG93bkluZGV4LCBhY3RpdmVMb2NhdGlvbiwgZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW4sIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZSwgbmV3TG9jYXRpb25Nb2RhbE9wZW4sIGVkaXRMb2NhdGlvbk1vZGFsT3BlbixcbiAgICAgIHVwZGF0ZWRJbnN0cnVjdG9yOiB7XG4gICAgICAgIGFjY291bnRJbmZvOiB1cGRhdGVkQWNjb3VudEluZm8sIGNvbnRhY3RJbmZvOiB1cGRhdGVkQ29udGFjdEluZm8sIGxvY2F0aW9uczogdXBkYXRlZExvY2F0aW9ucyxcbiAgICAgIH0sXG4gICAgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIChcbiAgICAgIDxQb3J0YWwgc2VsZWN0b3I9XCIjbW9kYWxcIj5cbiAgICAgICAge29wZW4gJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmxheVwiPlxuICAgICAgICAgICAgPENsaWNrT2ZmQ29tcG9uZW50V3JhcHBlciBvbk91dGVyQ2xpY2s9e3RoaXMub25DYW5jZWxDaGFuZ2VzfSBuZXN0ZWRNb2RhbHM9e2RlbGV0ZU1vZGFsT3BlbiB8fCBkZWxldGVMb2NhdGlvbk1vZGFsT3BlbiB8fCBlZGl0TG9jYXRpb25Nb2RhbE9wZW4gfHwgbmV3TG9jYXRpb25Nb2RhbE9wZW59PlxuICAgICAgICAgICAgICA8ZGl2IGlkPVwibW9kYWxfdXNlcl9lZGl0XCIgY2xhc3NOYW1lPVwibW9kYWwgbW9kYWwtY3VzdG9tIG1vZGFsLWN1c3RvbS1sYXJnZSBtb2RhbC1ncmF5XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLW1vZGFsIGNhcmQtbWFpbiBjYXJkIGdyZXkgbGlnaHRlbi0zXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm93bmVyLWJveCBjYXJkLXBhbmVsIGNhcmQtcGFuZWwtdGl0bGVcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjMzE4MzdhJywgY29sb3I6ICcjZmZmJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXBhbmVsLXJvdyByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzOVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1jaXJjbGVcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjMDA4NWNlJywgY29sb3I6ICcjZmZmJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi4vc3RhdGljL2ltYWdlcy9pbWctb3duZXIwMS5qcGdcIiBhbHQ9XCJcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXRleHRcIiBzdHlsZT17eyBjb2xvcjogJyNmZmYnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck1vZGFsSGVhZGVyKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xcIiBzdHlsZT17eyB0ZXh0QWxpZ246ICdyaWdodCcgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJibG9jay1pY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImljb24tb3duZXJcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtaWNvblwiPk93bmVyPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzMTIgbDZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjY291bnRJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3RoaXMuaW5pdGlhbEluc3RydWN0b3JNb3VudCgpID8gYWNjb3VudEluZm8gOiB1cGRhdGVkQWNjb3VudEluZm99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29udGFjdEluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17dGhpcy5pbml0aWFsSW5zdHJ1Y3Rvck1vdW50KCkgPyBjb250YWN0SW5mbyA6IHVwZGF0ZWRDb250YWN0SW5mb31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEZXRhaWxzQ2hhbmdlPXt0aGlzLmhhbmRsZURldGFpbHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sIHMxMiBsNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TG9jYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3RoaXMuaW5pdGlhbEluc3RydWN0b3JNb3VudCgpID8gbG9jYXRpb25zIDogdXBkYXRlZExvY2F0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEZXRhaWxzQ2hhbmdlPXt0aGlzLmhhbmRsZURldGFpbHNDaGFuZ2V9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bklzT3Blbj17ZHJvcGRvd25Jc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25JbmRleD17ZHJvcGRvd25JbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVMb2NhdGlvbj17YWN0aXZlTG9jYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlTG9jYXRpb25Nb2RhbE9wZW49e2RlbGV0ZUxvY2F0aW9uTW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbkRlbGV0ZT17cGVuZGluZ0xvY2F0aW9uRGVsZXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xvY2F0aW9uTW9kYWxPcGVuPXtuZXdMb2NhdGlvbk1vZGFsT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0TG9jYXRpb25Nb2RhbE9wZW49e2VkaXRMb2NhdGlvbk1vZGFsT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNldERyb3Bkb3duPXt0aGlzLm9uU2V0RHJvcGRvd259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZURyb3Bkb3duPXt0aGlzLm9uQ2xvc2VEcm9wZG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5OZXdMb2NhdGlvbk1vZGFsPXt0aGlzLm9uT3Blbk5ld0xvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuRWRpdExvY2F0aW9uTW9kYWw9e3RoaXMub25PcGVuRWRpdExvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZU5ld0xvY2F0aW9uTW9kYWw9e3RoaXMub25DbG9zZU5ld0xvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZUVkaXRMb2NhdGlvbk1vZGFsPXt0aGlzLm9uQ2xvc2VFZGl0TG9jYXRpb25Nb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5EZWxldGVMb2NhdGlvbk1vZGFsPXt0aGlzLm9uT3BlbkRlbGV0ZUxvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZURlbGV0ZUxvY2F0aW9uTW9kYWw9e3RoaXMub25DbG9zZURlbGV0ZUxvY2F0aW9uTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uT3BlbkRlbGV0ZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2F2ZXMtZWZmZWN0IHdhdmVzLXRlYWwgYnRuLWZsYXQgcGluay10ZXh0IHRleHQtZGFya2VuLTFcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIERlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNhbmNlbENoYW5nZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtb2RhbC1jbG9zZSB3YXZlcy1lZmZlY3Qgd2F2ZXMtdGVhbCBidG4tZmxhdCBncmV5LXRleHQgdGV4dC1kYXJrZW4tMVwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAgIC5vdmVybGF5IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxOTk5O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5jYXJkLW1vZGFsIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5tb2RhbCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMTAlO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAxMCU7XG4gICAgICAgICAgICAgICAgbGVmdDogMTAlO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMjRweCAzOHB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwIDlweCA0NnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDExcHggMTVweCAtN3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAubW9kYWwtY3VzdG9tIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLm1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L1BvcnRhbD5cbiAgICApO1xuICB9XG59XG5cbkluc3RydWN0b3JEZXRhaWxzTW9kYWwucHJvcFR5cGVzID0ge1xuICBvcGVuOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBkZWxldGVNb2RhbE9wZW46IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gIG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gIG9uT3BlbkRlbGV0ZU1vZGFsOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBpbnN0cnVjdG9yOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBJbnN0cnVjdG9yRGV0YWlsc01vZGFsO1xuIl19 */\\n/*@ sourceURL=/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Instructor/ListPage/components/InstructorDetailsModal/index.js */\"));\n    }\n  }]);\n\n  return InstructorDetailsModal;\n}(React.Component);\n\nInstructorDetailsModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  instructor: PropTypes.object.isRequired\n};\nexport default InstructorDetailsModal;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Instructor/ListPage/components/InstructorDetailsModal/index.js"],"names":["React","PropTypes","update","Portal","ClickOffComponentWrapper","AccountInfo","ContactInfo","Locations","nestedEditFieldValidation","InstructorDetailsModal","props","nextProps","state","originalInstructor","instructor","id","basicInfo","accountInfo","contactInfo","locations","updatedInstructor","originalInstructorState","$merge","setState","dropdownIndex","dropdownIsOpen","pendingLocationDelete","deleteLocationModalOpen","newLocationModalOpen","activeLocation","editLocationModalOpen","onClose","validation","cb","event","preventDefault","onSaveLocationError","onSaveInstructorChanges","onSetValidation","console","warn","valid","postBody","name","section","previousInstructorState","value","target","initialLastName","lastName","initialFIrstName","firstName","initialEmail","email","updatedLastName","updatedFirstName","updatedEmail","initialInstructorMount","gender","phone","streetAddress","city","zip","open","onOpenDeleteModal","deleteModalOpen","updatedAccountInfo","updatedContactInfo","updatedLocations","onCancelChanges","backgroundColor","color","renderModalHeader","textAlign","handleDetailsChange","onSetDropdown","onCloseDropdown","onOpenNewLocationModal","onOpenEditLocationModal","onCloseNewLocationModal","onCloseEditLocationModal","onOpenDeleteLocationModal","onCloseDeleteLocationModal","onSubmit","Component","propTypes","bool","isRequired","func","object"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\n\nimport Portal from '../../../../Portal';\nimport ClickOffComponentWrapper from '../../../../ClickOffComponentWrapper';\n\nimport AccountInfo from '../SharedModalComponents/AccountInfo';\nimport ContactInfo from '../SharedModalComponents/ContactInfo';\nimport Locations from '../SharedModalComponents/Locations';\n\nimport { nestedEditFieldValidation } from '../../../../utils/fieldValidation';\n\nclass InstructorDetailsModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteLocationModalOpen: false,\n      newLocationModalOpen: false,\n      editLocationModalOpen: false,\n      pendingLocationDelete: {},\n      activeLocation: {},\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      originalInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      updatedInstructor: {\n        accountInfo: {\n          firstName: '',\n          lastName: '',\n          email: '',\n          gender: '',\n        },\n        contactInfo: {\n          phone: '',\n          streetAddress: '',\n          city: '',\n          state: '',\n          zip: '',\n        },\n        locations: [],\n      },\n      validation: {\n        accountInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true,\n        },\n      },\n    };\n  }\n\n  componentDidMount() {\n    const { instructor: { id, basicInfo, accountInfo, contactInfo, locations } = {} } = this.props;\n    const updatedInstructor = { id, basicInfo, accountInfo, contactInfo, locations };\n    const { originalInstructor: originalInstructorState } = this.state;\n    const originalInstructor = update(originalInstructorState, {\n      $merge: updatedInstructor,\n    });\n    this.setState({ originalInstructor, updatedInstructor }); // eslint-disable-line\n  }\n\n  // This resets the component state to reflect the details of the next instructor the user clicks on\n  componentWillReceiveProps = (nextProps) => {\n    if ((!this.state.originalInstructor || nextProps.instructor.id !== this.state.originalInstructor.id)) {\n      const { instructor: { id, basicInfo, accountInfo, contactInfo, locations } = {} } = nextProps;\n      const updatedInstructor = { id, basicInfo, accountInfo, contactInfo, locations };\n      const { originalInstructor: originalInstructorState } = this.state;\n      const originalInstructor = update(originalInstructorState, {\n        $merge: nextProps.instructor,\n      });\n      this.setState({ originalInstructor, updatedInstructor });\n    }\n  }\n\n  onSetDropdown = (dropdownIndex) => this.setState({ dropdownIndex, dropdownIsOpen: true });\n  onCloseDropdown = () => this.setState({ dropdownIsOpen: false });\n\n  onOpenDeleteLocationModal = (pendingLocationDelete) => this.setState({ deleteLocationModalOpen: true, pendingLocationDelete });\n  onCloseDeleteLocationModal = () => this.setState({ deleteLocationModalOpen: false, pendingLocationDelete: {} });\n\n  onOpenNewLocationModal = () => this.setState({ newLocationModalOpen: true });\n  onCloseNewLocationModal = () => this.setState({ newLocationModalOpen: false });\n\n  onOpenEditLocationModal = (activeLocation) => this.setState({ editLocationModalOpen: true, activeLocation });\n  onCloseEditLocationModal = () => this.setState({ editLocationModalOpen: false, dropdownIsOpen: false, activeLocation: {} });\n\n  onCancelChanges = () => {\n    const { onClose } = this.props;\n    const { updatedInstructor, originalInstructor } = this.state;\n    this.setState({ updatedInstructor: originalInstructor }, onClose());\n  }\n\n  // This function is passed into nestedEditFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n  onSetValidation = (validation, cb) => this.setState({ validation }, cb);\n\n  // If all the fields are valid, we construct a post body and call onSaveNewLocation passed down from the container level\n  onSubmit = async (event) => {\n    event.preventDefault();\n    const { updatedInstructor: { id, basicInfo, accountInfo, contactInfo, locations } } = this.state;\n    const { onSaveLocationError, onSaveInstructorChanges, onClose } = this.props;\n    // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n    // const valid = true;\n    const valid = await nestedEditFieldValidation(this.state, this.state.updatedInstructor, this.onSetValidation, (validation) => console.warn('validation', validation));\n    if (!valid) {\n      // return onSaveLocationError();\n      console.warn('not valid');\n    }\n    const postBody = { id, basicInfo, accountInfo, contactInfo, locations };\n    onSaveInstructorChanges(postBody);\n    console.warn('stubbed out save function');\n    onClose();\n  }\n\n  initialInstructorMount = () => this.state.originalInstructor.id !== this.props.instructor.id;\n\n  // We pull the value based on the field type then merge that updated key/value pair with the last version of component state\n  handleDetailsChange = (event, name, section) => {\n    const { updatedInstructor: previousInstructorState } = this.state;\n    const value = event.target ? event.target.value : event;\n    const updatedInstructor = update(previousInstructorState, {\n      [section]: { $merge: { [name]: value } },\n    });\n    this.setState({ updatedInstructor });\n  }\n\n  renderModalHeader = () => {\n    const { instructor: { accountInfo: { lastName: initialLastName, firstName: initialFIrstName, email: initialEmail } } } = this.props;\n    const { updatedInstructor: { accountInfo: { lastName: updatedLastName, firstName: updatedFirstName, email: updatedEmail } } } = this.state;\n    let lastName;\n    let firstName;\n    let email;\n    if (this.initialInstructorMount()) {\n      lastName = initialLastName;\n      firstName = initialFIrstName;\n      email = initialEmail;\n    } else {\n      lastName = updatedLastName;\n      firstName = updatedFirstName;\n      email = updatedEmail;\n    }\n    return (\n      <React.Fragment>\n        <h4 className=\"h3\">{lastName}, {firstName}</h4>\n        <a href={`mailto:${email}`}>{email}</a>\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { open, instructor: { accountInfo, contactInfo, locations }, onOpenDeleteModal, deleteModalOpen } = this.props;\n    const { dropdownIsOpen, dropdownIndex, activeLocation, deleteLocationModalOpen, pendingLocationDelete, newLocationModalOpen, editLocationModalOpen,\n      updatedInstructor: {\n        accountInfo: updatedAccountInfo, contactInfo: updatedContactInfo, locations: updatedLocations,\n      },\n    } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <div className=\"overlay\">\n            <ClickOffComponentWrapper onOuterClick={this.onCancelChanges} nestedModals={deleteModalOpen || deleteLocationModalOpen || editLocationModalOpen || newLocationModalOpen}>\n              <div id=\"modal_user_edit\" className=\"modal modal-custom modal-custom-large modal-gray\">\n                <div className=\"card-modal card-main card grey lighten-3\">\n                  <div className=\"owner-box card-panel card-panel-title\" style={{ backgroundColor: '#31837a', color: '#fff' }}>\n                    <div className=\"card-panel-row row\">\n                      <div className=\"col s9\">\n                        <div className=\"user-block\">\n                          <div className=\"user-circle\" style={{ backgroundColor: '#0085ce', color: '#fff' }}>\n                            <img src=\"./static/images/img-owner01.jpg\" alt=\"\" />\n                          </div>\n                          <div className=\"user-text\" style={{ color: '#fff' }}>\n                            {this.renderModalHeader()}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"col\" style={{ textAlign: 'right' }}>\n                        <span className=\"block-icon\">\n                          <i className=\"icon-owner\"></i>\n                          <span className=\"text-icon\">Owner</span>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"card-content\">\n                    <div className=\"card-body\">\n                      <div className=\"row mb-0\">\n                        <div className=\"col s12 l6\">\n                          <AccountInfo\n                            state={this.initialInstructorMount() ? accountInfo : updatedAccountInfo}\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                          <ContactInfo\n                            state={this.initialInstructorMount() ? contactInfo : updatedContactInfo}\n                            handleDetailsChange={this.handleDetailsChange}\n                          />\n                        </div>\n                        <div className=\"col s12 l6\">\n                          <Locations\n                            state={this.initialInstructorMount() ? locations : updatedLocations}\n                            handleDetailsChange={this.handleDetailsChange}\n\n                            dropdownIsOpen={dropdownIsOpen}\n                            dropdownIndex={dropdownIndex}\n                            activeLocation={activeLocation}\n                            deleteLocationModalOpen={deleteLocationModalOpen}\n                            pendingLocationDelete={pendingLocationDelete}\n                            newLocationModalOpen={newLocationModalOpen}\n                            editLocationModalOpen={editLocationModalOpen}\n                            onSetDropdown={this.onSetDropdown}\n                            onCloseDropdown={this.onCloseDropdown}\n                            onOpenNewLocationModal={this.onOpenNewLocationModal}\n                            onOpenEditLocationModal={this.onOpenEditLocationModal}\n                            onCloseNewLocationModal={this.onCloseNewLocationModal}\n                            onCloseEditLocationModal={this.onCloseEditLocationModal}\n                            onOpenDeleteLocationModal={this.onOpenDeleteLocationModal}\n                            onCloseDeleteLocationModal={this.onCloseDeleteLocationModal}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"modal-footer\">\n                      <a\n                        href=\"#\"\n                        onClick={onOpenDeleteModal}\n                        className=\"waves-effect waves-teal btn-flat pink-text text-darken-1\"\n                      >\n                        Delete\n                      </a>\n                      <a\n                        href=\"#\"\n                        onClick={this.onCancelChanges}\n                        className=\"modal-close waves-effect waves-teal btn-flat grey-text text-darken-1\"\n                      >\n                        Cancel\n                      </a>\n                      <a\n                        href=\"#\"\n                        onClick={this.onSubmit}\n                        className=\"btn\"\n                      >\n                        Save\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ClickOffComponentWrapper>\n          </div>\n        )}\n        <style jsx>\n          {`\n              .overlay {\n                position: fixed;\n                background-color: rgba(0, 0, 0, 0.7);\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: 1999;\n              }\n              .card-modal {\n                margin: 0;\n                border-radius: 6px;\n              }\n              .modal {\n                display: block;\n                background-color: white;\n                position: absolute;\n                top: 10%;\n                right: 10%;\n                left: 10%;\n                box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2);\n              }\n              .modal-custom {\n                opacity: 1;\n                visibility: visible;\n              }\n              .modal-footer {\n                background-color: white;\n              }\n            `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nInstructorDetailsModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  deleteModalOpen: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onOpenDeleteModal: PropTypes.func.isRequired,\n  instructor: PropTypes.object.isRequired,\n};\n\nexport default InstructorDetailsModal;\n"]},"metadata":{},"sourceType":"module"}