{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport FullView from './components/FullView';\nimport ListView from './components/ListView';\nimport FilterSection from './components/FilterSection';\nimport sampleWorksheets from './utils/sampleWorksheets';\nimport { dueDate, assignDate, problems, completed, flags, score, timeEstimate } from '../../utils/sortFunctions';\n\nvar DetailWorksheetPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DetailWorksheetPage, _React$Component);\n\n  function DetailWorksheetPage(props) {\n    var _this;\n\n    _classCallCheck(this, DetailWorksheetPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DetailWorksheetPage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAssignWorksheetDropdown\", function (event) {\n      event.preventDefault();\n\n      _this.setState(function (_ref) {\n        var assignWorksheetDropdownOpen = _ref.assignWorksheetDropdownOpen;\n        return {\n          assignWorksheetDropdownOpen: !assignWorksheetDropdownOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleDetailModalOpen\", function (worksheetIndex) {\n      return _this.setState(function (_ref2) {\n        var detailModalOpen = _ref2.detailModalOpen,\n            worksheets = _ref2.worksheets;\n        return {\n          detailModalOpen: !detailModalOpen,\n          activeWorksheet: worksheets[worksheetIndex]\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeView\", function (view) {\n      return _this.setState({\n        currentView: view\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (filterName) {\n      return _this.setState({\n        worksheetsAreFiltered: true,\n        filterName: filterName\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function () {\n      return _this.setState({\n        worksheetsAreFiltered: false,\n        filterName: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredTopicState\", function (filterTopic) {\n      return _this.setState({\n        worksheetsAreFiltered: true,\n        filterTopic: filterTopic\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredTopicState\", function () {\n      return _this.setState({\n        filterTopic: ''\n      }, _this.checkForFilteredState);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAssignWorksheet\", function (assignType) {\n      console.warn('Stubbed out assign worksheet click', assignType);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByName\", function () {\n      var _this$state = _this.state,\n          worksheets = _this$state.worksheets,\n          filterName = _this$state.filterName;\n      return worksheets.reduce(function (finalArr, currentWorksheet) {\n        var _currentWorksheet$acc = currentWorksheet.accountInfo,\n            lastName = _currentWorksheet$acc.lastName,\n            firstName = _currentWorksheet$acc.firstName;\n        var worksheetString = \"\".concat(firstName.toLowerCase()).concat(lastName.toLowerCase());\n\n        if (worksheetString.indexOf(filterName) !== -1 && finalArr.indexOf(currentWorksheet) === -1) {\n          finalArr.push(currentWorksheet);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByTopic\", function () {\n      var preFilteredWorksheets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var _this$state2 = _this.state,\n          allWorksheets = _this$state2.worksheets,\n          filterTopic = _this$state2.filterTopic;\n      var worksheets;\n\n      if (preFilteredWorksheets.length) {\n        worksheets = preFilteredWorksheets;\n      } else {\n        worksheets = allWorksheets;\n      }\n\n      return worksheets.reduce(function (finalArr, currentWorksheet) {\n        var topic = currentWorksheet.topic;\n\n        if (topic === filterTopic && finalArr.indexOf(currentWorksheet) === -1) {\n          finalArr.push(currentWorksheet);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortWorksheets\", function (worksheets) {\n      var sort = _this.state.sort;\n\n      switch (sort) {\n        case 'dueDate':\n          return worksheets.sort(dueDate);\n\n        case 'assignDate':\n          return worksheets.sort(assignDate);\n\n        case 'problems':\n          return worksheets.sort(problems);\n\n        case 'completed':\n          return worksheets.sort(completed);\n\n        case 'flags':\n          return worksheets.sort(flags);\n\n        case 'score':\n          return worksheets.sort(score);\n\n        case 'timeEstimate':\n          return worksheets.sort(timeEstimate);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableWorksheets\", function () {\n      var _this$state3 = _this.state,\n          filterName = _this$state3.filterName,\n          filterTopic = _this$state3.filterTopic,\n          allWorksheets = _this$state3.worksheets,\n          sort = _this$state3.sort;\n      var worksheets;\n\n      if (filterName.length && !filterTopic.length) {\n        worksheets = _this.onFilterByName();\n      } else if (!filterName.length && filterTopic.length) {\n        worksheets = _this.onFilterByTopic();\n      } else if (filterName.length && filterTopic.length) {\n        var filteredByName = _this.onFilterByName();\n\n        worksheets = _this.onFilterByTopic(filteredByName);\n      } else {\n        worksheets = allWorksheets;\n      }\n\n      if (sort) {\n        return _this.onSortWorksheets(worksheets);\n      }\n\n      return worksheets;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkForFilteredState\", function () {\n      var _this$state4 = _this.state,\n          filterName = _this$state4.filterName,\n          filterTopic = _this$state4.filterTopic;\n\n      if (!filterName.length && !filterTopic.length) {\n        _this.setState({\n          worksheetsAreFiltered: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderWorksheetView\", function () {\n      var currentView = _this.state.currentView;\n\n      switch (currentView) {\n        case 'list':\n          return __jsx(ListView, {\n            onToggleDetailModalOpen: _this.onToggleDetailModalOpen,\n            worksheets: _this.getMappableWorksheets()\n          });\n\n        case 'full':\n          return __jsx(FullView, {\n            onToggleDetailModalOpen: _this.onToggleDetailModalOpen,\n            worksheets: _this.getMappableWorksheets()\n          });\n\n        default:\n          break;\n      }\n    });\n\n    _this.state = {\n      sort: '',\n      filterName: '',\n      filterTopic: '',\n      currentView: 'full',\n      assignWorksheetDropdownOpen: false,\n      worksheets: sampleWorksheets,\n      detailModalOpen: false,\n      activeWorksheet: null\n    };\n    return _this;\n  }\n\n  _createClass(DetailWorksheetPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state5 = this.state,\n          currentView = _this$state5.currentView,\n          assignWorksheetDropdownOpen = _this$state5.assignWorksheetDropdownOpen;\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"main-holder grey lighten-5 switcher-section\"\n      }, __jsx(FilterSection, {\n        currentView: currentView,\n        onChangeView: this.onChangeView,\n        onSetSort: this.onSetSort,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState,\n        onSetFilteredTopicState: this.onSetFilteredTopicState,\n        onUnsetFilteredTopicState: this.onUnsetFilteredTopicState\n      }), this.renderWorksheetView()), __jsx(\"div\", {\n        className: \"add-btn-block\"\n      }, __jsx(\"a\", {\n        href: \"#\",\n        \"data-target\": \"dropdown_assign_selected\",\n        onClick: this.onToggleAssignWorksheetDropdown,\n        className: \"dropdown-trigger waves-effect waves-teal btn add-btn\"\n      }, __jsx(\"i\", {\n        className: \"material-icons\"\n      }, \"add\"), \" Assign Worksheet\"), __jsx(\"ul\", {\n        id: \"dropdown_assign_selected\",\n        className: \"dropdown-content dropdown-small\",\n        style: {\n          display: assignWorksheetDropdownOpen ? 'block' : '0',\n          opacity: assignWorksheetDropdownOpen ? '1' : '0'\n        }\n      }, __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onAssignWorksheet('fromSaved');\n        }\n      }, \"From Saved\")), __jsx(\"li\", null, __jsx(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onAssignWorksheet('createNew');\n        }\n      }, \"Create New\")))));\n    }\n  }]);\n\n  return DetailWorksheetPage;\n}(React.Component);\n\nexport default DetailWorksheetPage;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Classes/DetailWorksheetPage/index.js"],"names":["React","FullView","ListView","FilterSection","sampleWorksheets","dueDate","assignDate","problems","completed","flags","score","timeEstimate","DetailWorksheetPage","props","event","preventDefault","setState","assignWorksheetDropdownOpen","worksheetIndex","detailModalOpen","worksheets","activeWorksheet","sort","view","currentView","filterName","worksheetsAreFiltered","filterTopic","checkForFilteredState","assignType","console","warn","state","reduce","finalArr","currentWorksheet","accountInfo","lastName","firstName","worksheetString","toLowerCase","indexOf","push","preFilteredWorksheets","allWorksheets","length","topic","onFilterByName","onFilterByTopic","filteredByName","onSortWorksheets","onToggleDetailModalOpen","getMappableWorksheets","onChangeView","onSetSort","onSetFilteredState","onUnsetFilteredState","onSetFilteredTopicState","onUnsetFilteredTopicState","renderWorksheetView","onToggleAssignWorksheetDropdown","display","opacity","onAssignWorksheet","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport FullView from './components/FullView';\nimport ListView from './components/ListView';\nimport FilterSection from './components/FilterSection';\n\nimport sampleWorksheets from './utils/sampleWorksheets';\nimport { dueDate, assignDate, problems, completed, flags, score, timeEstimate } from '../../utils/sortFunctions';\n\nclass DetailWorksheetPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sort: '',\n      filterName: '',\n      filterTopic: '',\n      currentView: 'full',\n      assignWorksheetDropdownOpen: false,\n      worksheets: sampleWorksheets,\n      detailModalOpen: false,\n      activeWorksheet: null,\n    };\n  }\n\n  onToggleAssignWorksheetDropdown = (event) => {\n    event.preventDefault();\n    this.setState(({ assignWorksheetDropdownOpen }) => ({ assignWorksheetDropdownOpen: !assignWorksheetDropdownOpen }))\n  }\n\n  onToggleDetailModalOpen = (worksheetIndex) => this.setState(({ detailModalOpen, worksheets }) => ({ detailModalOpen: !detailModalOpen, activeWorksheet: worksheets[worksheetIndex] }))\n\n  onSetSort = (sort) => this.setState({ sort })\n  onChangeView = (view) => this.setState({ currentView: view });\n\n  onSetFilteredState = (filterName) => this.setState({ worksheetsAreFiltered: true, filterName })\n  onUnsetFilteredState = () => this.setState({ worksheetsAreFiltered: false, filterName: '' })\n\n  onSetFilteredTopicState = (filterTopic) => this.setState({ worksheetsAreFiltered: true, filterTopic })\n  onUnsetFilteredTopicState = () => this.setState({ filterTopic: '' }, this.checkForFilteredState)\n\n  onAssignWorksheet = (assignType) => {\n    console.warn('Stubbed out assign worksheet click', assignType);\n  }\n\n  onFilterByName = () => {\n    const { worksheets, filterName } = this.state;\n    return worksheets.reduce((finalArr, currentWorksheet) => {\n      const { accountInfo: { lastName, firstName } } = currentWorksheet;\n      const worksheetString = `${firstName.toLowerCase()}${lastName.toLowerCase()}`;\n      if (worksheetString.indexOf(filterName) !== -1 && finalArr.indexOf(currentWorksheet) === -1) {\n        finalArr.push(currentWorksheet);\n      }\n      return finalArr;\n    }, []);\n  }\n\n  onFilterByTopic = (preFilteredWorksheets = []) => {\n    const { worksheets: allWorksheets, filterTopic } = this.state;\n    let worksheets;\n    if (preFilteredWorksheets.length) {\n      worksheets = preFilteredWorksheets;\n    } else {\n      worksheets = allWorksheets;\n    }\n    return worksheets.reduce((finalArr, currentWorksheet) => {\n      const { topic } = currentWorksheet;\n      if (topic === filterTopic && finalArr.indexOf(currentWorksheet) === -1) {\n        finalArr.push(currentWorksheet);\n      }\n      return finalArr;\n    }, []);\n  }\n\n  // eslint-disable-next-line consistent-return\n  onSortWorksheets = (worksheets) => {\n    const { sort } = this.state;\n    switch (sort) {\n      case 'dueDate':\n        return worksheets.sort(dueDate);\n      case 'assignDate':\n        return worksheets.sort(assignDate);\n      case 'problems':\n        return worksheets.sort(problems);\n      case 'completed':\n        return worksheets.sort(completed);\n      case 'flags':\n        return worksheets.sort(flags);\n      case 'score':\n        return worksheets.sort(score);\n      case 'timeEstimate':\n        return worksheets.sort(timeEstimate);\n      default:\n        break;\n    }\n  }\n\n  getMappableWorksheets = () => {\n    const { filterName, filterTopic, worksheets: allWorksheets, sort } = this.state;\n    let worksheets;\n    if (filterName.length && !filterTopic.length) {\n      worksheets = this.onFilterByName();\n    } else if (!filterName.length && filterTopic.length) {\n      worksheets = this.onFilterByTopic();\n    } else if (filterName.length && filterTopic.length) {\n      const filteredByName = this.onFilterByName();\n      worksheets = this.onFilterByTopic(filteredByName);\n    } else {\n      worksheets = allWorksheets;\n    }\n    if (sort) {\n      return this.onSortWorksheets(worksheets);\n    }\n    return worksheets;\n  }\n\n  checkForFilteredState = () => {\n    const { filterName, filterTopic } = this.state;\n    if (!filterName.length && !filterTopic.length) {\n      this.setState({ worksheetsAreFiltered: false });\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  renderWorksheetView = () => {\n    const { currentView } = this.state;\n    switch (currentView) {\n      case 'list':\n        return <ListView onToggleDetailModalOpen={this.onToggleDetailModalOpen} worksheets={this.getMappableWorksheets()} />\n      case 'full':\n        return <FullView onToggleDetailModalOpen={this.onToggleDetailModalOpen} worksheets={this.getMappableWorksheets()} />\n      default:\n        break;\n    }\n  }\n\n  render() {\n    const { currentView, assignWorksheetDropdownOpen } = this.state;\n    return (\n      <React.Fragment>\n        <div className=\"main-holder grey lighten-5 switcher-section\">\n          <FilterSection\n            currentView={currentView}\n            onChangeView={this.onChangeView}\n            onSetSort={this.onSetSort}\n            onSetFilteredState={this.onSetFilteredState}\n            onUnsetFilteredState={this.onUnsetFilteredState}\n            onSetFilteredTopicState={this.onSetFilteredTopicState}\n            onUnsetFilteredTopicState={this.onUnsetFilteredTopicState}\n          />\n          {this.renderWorksheetView()}\n        </div>\n        <div className=\"add-btn-block\">\n          <a\n            href=\"#\"\n            data-target='dropdown_assign_selected'\n            onClick={this.onToggleAssignWorksheetDropdown}\n            className=\"dropdown-trigger waves-effect waves-teal btn add-btn\"\n          >\n            <i className=\"material-icons\">add</i> Assign Worksheet\n          </a>\n          <ul\n            id='dropdown_assign_selected'\n            className='dropdown-content dropdown-small'\n            style={{ display: assignWorksheetDropdownOpen ? 'block' : '0', opacity: assignWorksheetDropdownOpen ? '1' : '0' }}\n          >\n            <li><a href=\"#\" onClick={() => this.onAssignWorksheet('fromSaved')}>From Saved</a></li>\n            <li><a href=\"#\" onClick={() => this.onAssignWorksheet('createNew')}>Create New</a></li>\n          </ul>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default DetailWorksheetPage;\n\n"]},"metadata":{},"sourceType":"module"}