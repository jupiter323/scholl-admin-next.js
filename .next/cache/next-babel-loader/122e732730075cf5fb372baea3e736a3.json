{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\n/* eslint-disable array-callback-return */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport Portal from '../../../Portal';\nimport ClickOffComponentWrapper from '../../../ClickOffComponentWrapper';\nimport OwnerSection from '../SharedModalComponents/OwnerSection';\nimport LocationContactInfo from '../SharedModalComponents/LocationContactInfo';\nimport LocationEmailSettings from '../SharedModalComponents/LocationEmailSettings';\nimport LocationBranding from '../SharedModalComponents/LocationBranding';\nimport sampleOwners from '../NewLocationModal/utils/sampleOwners';\nimport { nestedEditFieldValidation } from '../../../utils/fieldValidation'; // TODO: Render only one instance of this modal\n\nclass LocationDetailsModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentWillReceiveProps\", nextProps => {\n      if (!this.state.originalLocation || nextProps.location.id !== this.state.originalLocation.id) {\n        const {\n          location: {\n            owner,\n            id,\n            locationContactInfo,\n            locationEmailSettings,\n            locationBranding\n          } = {}\n        } = nextProps;\n        const updatedLocation = {\n          owner,\n          id,\n          locationContactInfo,\n          locationEmailSettings,\n          locationBranding\n        };\n        const {\n          originalLocation: originalLocationState\n        } = this.state;\n        const originalLocation = update(originalLocationState, {\n          $merge: nextProps.location\n        });\n        this.setState({\n          originalLocation,\n          updatedLocation\n        });\n      }\n    });\n\n    _defineProperty(this, \"onOpenUserListModal\", () => this.setState({\n      userListModalOpen: true,\n      changeModalOpen: false\n    }));\n\n    _defineProperty(this, \"onCloseUserListModal\", () => this.setState({\n      userListModalOpen: false\n    }));\n\n    _defineProperty(this, \"onOpenChangeModal\", () => this.setState({\n      changeModalOpen: true\n    }));\n\n    _defineProperty(this, \"onCloseChangeModal\", () => this.setState({\n      changeModalOpen: false\n    }));\n\n    _defineProperty(this, \"onSetValidation\", (validation, cb) => this.setState({\n      validation\n    }, cb));\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      const {\n        updatedLocation\n      } = this.state;\n      const {\n        onSaveLocationChanges,\n        onSaveLocationError,\n        onClose\n      } = this.props; // const valid = true;\n\n      const valid = await nestedEditFieldValidation(this.state, this.state.updatedLocation, this.onSetValidation, this.props.onSetLocationValidation);\n\n      if (!valid) {\n        return onSaveLocationError();\n      }\n\n      onSaveLocationChanges(updatedLocation);\n      return onClose();\n    });\n\n    _defineProperty(this, \"initialLocationMount\", () => this.state.originalLocation.id !== this.props.location.id);\n\n    _defineProperty(this, \"handleDetailsChange\", (event, name, stateKey) => {\n      const {\n        updatedLocation: previousLocationState\n      } = this.state;\n      let value;\n\n      if (event.hex) {\n        value = event.hex;\n      } else if (event.target) {\n        value = event.target.value;\n      } else {\n        value = event;\n      }\n\n      let updatedLocation;\n\n      if (name === 'owner') {\n        updatedLocation = update(previousLocationState, {\n          owner: {\n            $set: event\n          }\n        });\n      } else {\n        updatedLocation = update(previousLocationState, {\n          [stateKey]: {\n            $merge: {\n              [name]: value\n            }\n          }\n        });\n      }\n\n      this.setState({\n        updatedLocation\n      });\n    });\n\n    this.state = {\n      owner: null,\n      userListModalOpen: false,\n      changeModalOpen: false,\n      originalLocation: {\n        id: '',\n        locationContactInfo: {\n          locationName: '',\n          locationNickname: '',\n          locationEmail: '',\n          locationPhoneNumber: '',\n          website: '',\n          locationStreetAddress: '',\n          locationCity: '',\n          locationState: '',\n          locationZip: ''\n        },\n        locationEmailSettings: {\n          automatedEmailOrigin: '',\n          automatedEmailSalutation: ''\n        },\n        locationBranding: {\n          locationUrl: '',\n          headerColor1: '',\n          headerColor2: '',\n          headerLogoBackgroundColor: '',\n          headerLogoBackgroundAlpha: '',\n          horizontalLogoVariation: '',\n          squareLogoVariation: '',\n          backgroundImage: '',\n          backgroundBlur: '',\n          backgroundOverlayAlpha: '',\n          studentWelcomeVideo: '',\n          instructorWelcomeVideo: ''\n        }\n      },\n      updatedLocation: {\n        id: '',\n        locationContactInfo: {\n          locationName: '',\n          locationNickname: '',\n          locationEmail: '',\n          locationPhoneNumber: '',\n          website: '',\n          locationStreetAddress: '',\n          locationCity: '',\n          locationState: '',\n          locationZip: ''\n        },\n        locationEmailSettings: {\n          automatedEmailOrigin: '',\n          automatedEmailSalutation: ''\n        },\n        locationBranding: {\n          locationUrl: '',\n          headerColor1: '',\n          headerColor2: '',\n          headerLogoBackgroundColor: '',\n          headerLogoBackgroundAlpha: '',\n          horizontalLogoVariation: '',\n          squareLogoVariation: '',\n          backgroundImage: '',\n          backgroundBlur: '',\n          backgroundOverlayAlpha: '',\n          studentWelcomeVideo: '',\n          instructorWelcomeVideo: ''\n        }\n      },\n      validation: {\n        locationContactInfo: {\n          locationName: true,\n          locationNickname: true,\n          locationEmail: true\n        },\n        locationEmailSettings: {\n          automatedEmailOrigin: true,\n          automatedEmailSalutation: true\n        },\n        locationBranding: {\n          locationUrl: true,\n          headerColor1: true,\n          headerColor2: true,\n          headerLogoBackgroundColor: true,\n          headerLogoBackgroundAlpha: true,\n          horizontalLogoVariation: true,\n          squareLogoVariation: true,\n          backgroundImage: true,\n          backgroundBlur: true,\n          backgroundOverlayAlpha: true\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    const {\n      location: {\n        owner,\n        id,\n        locationContactInfo,\n        locationEmailSettings,\n        locationBranding\n      } = {}\n    } = this.props;\n    const updatedLocation = {\n      owner,\n      id,\n      locationContactInfo,\n      locationEmailSettings,\n      locationBranding\n    };\n    const {\n      originalLocation: originalLocationState\n    } = this.state;\n    const originalLocation = update(originalLocationState, {\n      $merge: updatedLocation\n    });\n    this.setState({\n      originalLocation,\n      updatedLocation\n    }); // eslint-disable-line\n  } // TODO: This seems to be working well - confirm that only one isntance of this edit modal is opening on the user edit page\n  // This resets the component state to reflect the details of the next user the user clicks on\n\n\n  render() {\n    const {\n      open,\n      onClose,\n      location\n    } = this.props;\n    const {\n      owner,\n      locationContactInfo,\n      locationEmailSettings,\n      locationBranding\n    } = location;\n    const {\n      updatedLocation: {\n        owner: updatedOwner,\n        locationContactInfo: updatedLocationContactInfo,\n        locationEmailSettings: updatedLocationEmailSettings,\n        locationBranding: updatedLocationBranding\n      },\n      validation: {\n        locationContactInfo: locationContactInfoValidation,\n        locationEmailSettings: locationEmailSettingsValidation,\n        locationBranding: locationBrandingValidation\n      },\n      userListModalOpen,\n      changeModalOpen\n    } = this.state;\n    return __jsx(Portal, {\n      selector: \"#modal\"\n    }, open && __jsx(\"form\", {\n      className: \"jsx-3756323712\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"overlay\"\n    }, __jsx(ClickOffComponentWrapper, {\n      nestedModals: userListModalOpen || changeModalOpen,\n      onOuterClick: onClose\n    }, __jsx(\"div\", {\n      id: \"modal_location_create\",\n      className: \"jsx-3756323712\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"card-modal card-main card grey lighten-3\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"card-panel card-panel-title green lighten-1 white-text\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"card-panel-row row\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"col\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-3756323712\" + \" \" + \"h2\"\n    }, __jsx(\"span\", {\n      className: \"jsx-3756323712\" + \" \" + \"heading-holder\"\n    }, __jsx(\"span\", {\n      className: \"jsx-3756323712\" + \" \" + \"heading-block\"\n    }, \"Edit Location\")))), __jsx(\"div\", {\n      style: {\n        textAlign: 'right'\n      },\n      className: \"jsx-3756323712\" + \" \" + \"col\"\n    }, __jsx(\"span\", {\n      className: \"jsx-3756323712\" + \" \" + \"block-icon\"\n    }, __jsx(\"i\", {\n      className: \"jsx-3756323712\" + \" \" + \"icon-location\"\n    }), __jsx(\"span\", {\n      className: \"jsx-3756323712\" + \" \" + \"text-icon\"\n    }, \"Location\"))))), __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"card-content\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"card-body\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"row mb-0\"\n    }, __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"col s12 l6\"\n    }, __jsx(OwnerSection, {\n      owner: this.initialLocationMount() ? owner : updatedOwner,\n      userList: sampleOwners,\n      handleDetailsChange: this.handleDetailsChange,\n      userListModalOpen: userListModalOpen,\n      changeModalOpen: changeModalOpen,\n      onOpenUserListModal: this.onOpenUserListModal,\n      onCloseUserListModal: this.onCloseUserListModal,\n      onOpenChangeModal: this.onOpenChangeModal,\n      onCloseChangeModal: this.onCloseChangeModal\n    }), __jsx(LocationContactInfo, {\n      state: this.initialLocationMount() ? locationContactInfo : updatedLocationContactInfo,\n      handleDetailsChange: this.handleDetailsChange,\n      validation: locationContactInfoValidation,\n      noColumn: true\n    }), __jsx(LocationEmailSettings, {\n      state: this.initialLocationMount() ? locationEmailSettings : updatedLocationEmailSettings,\n      handleDetailsChange: this.handleDetailsChange,\n      validation: locationEmailSettingsValidation,\n      noColumn: true\n    })), __jsx(LocationBranding, {\n      state: this.initialLocationMount() ? locationBranding : updatedLocationBranding,\n      handleDetailsChange: this.handleDetailsChange,\n      validation: locationBrandingValidation\n    }))), __jsx(\"div\", {\n      className: \"jsx-3756323712\" + \" \" + \"modal-footer\"\n    }, __jsx(\"a\", {\n      href: \"#!\",\n      onClick: onClose,\n      className: \"jsx-3756323712\" + \" \" + \"modal-close waves-effect waves-teal btn-flat pink-text text-darken-1\"\n    }, \"Cancel\"), __jsx(\"a\", {\n      href: \"#\",\n      style: {\n        color: 'white'\n      },\n      onClick: this.onSubmit,\n      className: \"jsx-3756323712\" + \" \" + \"btn\"\n    }, \"Save\")))))))), __jsx(_JSXStyle, {\n      id: \"3756323712\"\n    }, \"h4.jsx-3756323712{font-size:2.28rem;line-height:110%;margin:1.52rem 0 .912rem 0;margin-top:0;}p.jsx-3756323712{font-size:16px;color:#343434;}p.passage.jsx-3756323712{font-size:14px;}a.jsx-3756323712{color:#343434;}.overlay.jsx-3756323712{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:1999;}.modal.jsx-3756323712{display:block;background-color:transparent;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}.modal-footer.jsx-3756323712{background-color:white;}.modal-custom.jsx-3756323712{opacity:1;visibility:visible;}.modal-full-size.jsx-3756323712{z-index:999;width:100%;left:0;top:0;right:0;bottom:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL0xvY2F0aW9uL2NvbXBvbmVudHMvTG9jYXRpb25EZXRhaWxzTW9kYWwvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa1JXLEFBR21DLEFBTUgsQUFJQSxBQUdELEFBR0MsQUFTRCxBQVNTLEFBR2IsQUFJRSxVQUhPLEVBSVIsRUE1QmIsQUFZK0IsQ0FuQmYsQUFJaEIsQUFNc0MsR0FoQm5CLEtBa0NuQixBQVFTLE1BbkNULEFBK0JBLENBS1EsS0ExQ3FCLENBMkNuQixPQWxCVSxDQW1CVCxJQTVCSCxLQTZCUixDQTVCVSxPQVNBLENBekJLLEFBaUJKLE9BU0MsRUFSSCxJQWpCVCxHQWtCZSxDQVFKLFNBQytHLEdBUjFILDBHQVNBIiwiZmlsZSI6Ii9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL0xvY2F0aW9uL2NvbXBvbmVudHMvTG9jYXRpb25EZXRhaWxzTW9kYWwvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBhcnJheS1jYWxsYmFjay1yZXR1cm4gKi9cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICdpbW11dGFiaWxpdHktaGVscGVyJztcblxuaW1wb3J0IFBvcnRhbCBmcm9tICcuLi8uLi8uLi9Qb3J0YWwnO1xuaW1wb3J0IENsaWNrT2ZmQ29tcG9uZW50V3JhcHBlciBmcm9tICcuLi8uLi8uLi9DbGlja09mZkNvbXBvbmVudFdyYXBwZXInO1xuXG5pbXBvcnQgT3duZXJTZWN0aW9uIGZyb20gJy4uL1NoYXJlZE1vZGFsQ29tcG9uZW50cy9Pd25lclNlY3Rpb24nO1xuaW1wb3J0IExvY2F0aW9uQ29udGFjdEluZm8gZnJvbSAnLi4vU2hhcmVkTW9kYWxDb21wb25lbnRzL0xvY2F0aW9uQ29udGFjdEluZm8nO1xuaW1wb3J0IExvY2F0aW9uRW1haWxTZXR0aW5ncyBmcm9tICcuLi9TaGFyZWRNb2RhbENvbXBvbmVudHMvTG9jYXRpb25FbWFpbFNldHRpbmdzJztcbmltcG9ydCBMb2NhdGlvbkJyYW5kaW5nIGZyb20gJy4uL1NoYXJlZE1vZGFsQ29tcG9uZW50cy9Mb2NhdGlvbkJyYW5kaW5nJztcblxuaW1wb3J0IHNhbXBsZU93bmVycyBmcm9tICcuLi9OZXdMb2NhdGlvbk1vZGFsL3V0aWxzL3NhbXBsZU93bmVycyc7XG5pbXBvcnQgeyBuZXN0ZWRFZGl0RmllbGRWYWxpZGF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZmllbGRWYWxpZGF0aW9uJztcblxuLy8gVE9ETzogUmVuZGVyIG9ubHkgb25lIGluc3RhbmNlIG9mIHRoaXMgbW9kYWxcbmNsYXNzIExvY2F0aW9uRGV0YWlsc01vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG93bmVyOiBudWxsLFxuICAgICAgdXNlckxpc3RNb2RhbE9wZW46IGZhbHNlLFxuICAgICAgY2hhbmdlTW9kYWxPcGVuOiBmYWxzZSxcbiAgICAgIG9yaWdpbmFsTG9jYXRpb246IHtcbiAgICAgICAgaWQ6ICcnLFxuICAgICAgICBsb2NhdGlvbkNvbnRhY3RJbmZvOiB7XG4gICAgICAgICAgbG9jYXRpb25OYW1lOiAnJyxcbiAgICAgICAgICBsb2NhdGlvbk5pY2tuYW1lOiAnJyxcbiAgICAgICAgICBsb2NhdGlvbkVtYWlsOiAnJyxcbiAgICAgICAgICBsb2NhdGlvblBob25lTnVtYmVyOiAnJyxcbiAgICAgICAgICB3ZWJzaXRlOiAnJyxcbiAgICAgICAgICBsb2NhdGlvblN0cmVldEFkZHJlc3M6ICcnLFxuICAgICAgICAgIGxvY2F0aW9uQ2l0eTogJycsXG4gICAgICAgICAgbG9jYXRpb25TdGF0ZTogJycsXG4gICAgICAgICAgbG9jYXRpb25aaXA6ICcnLFxuICAgICAgICB9LFxuICAgICAgICBsb2NhdGlvbkVtYWlsU2V0dGluZ3M6IHtcbiAgICAgICAgICBhdXRvbWF0ZWRFbWFpbE9yaWdpbjogJycsXG4gICAgICAgICAgYXV0b21hdGVkRW1haWxTYWx1dGF0aW9uOiAnJyxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYXRpb25CcmFuZGluZzoge1xuICAgICAgICAgIGxvY2F0aW9uVXJsOiAnJyxcbiAgICAgICAgICBoZWFkZXJDb2xvcjE6ICcnLFxuICAgICAgICAgIGhlYWRlckNvbG9yMjogJycsXG4gICAgICAgICAgaGVhZGVyTG9nb0JhY2tncm91bmRDb2xvcjogJycsXG4gICAgICAgICAgaGVhZGVyTG9nb0JhY2tncm91bmRBbHBoYTogJycsXG4gICAgICAgICAgaG9yaXpvbnRhbExvZ29WYXJpYXRpb246ICcnLFxuICAgICAgICAgIHNxdWFyZUxvZ29WYXJpYXRpb246ICcnLFxuICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogJycsXG4gICAgICAgICAgYmFja2dyb3VuZEJsdXI6ICcnLFxuICAgICAgICAgIGJhY2tncm91bmRPdmVybGF5QWxwaGE6ICcnLFxuICAgICAgICAgIHN0dWRlbnRXZWxjb21lVmlkZW86ICcnLFxuICAgICAgICAgIGluc3RydWN0b3JXZWxjb21lVmlkZW86ICcnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHVwZGF0ZWRMb2NhdGlvbjoge1xuICAgICAgICBpZDogJycsXG4gICAgICAgIGxvY2F0aW9uQ29udGFjdEluZm86IHtcbiAgICAgICAgICBsb2NhdGlvbk5hbWU6ICcnLFxuICAgICAgICAgIGxvY2F0aW9uTmlja25hbWU6ICcnLFxuICAgICAgICAgIGxvY2F0aW9uRW1haWw6ICcnLFxuICAgICAgICAgIGxvY2F0aW9uUGhvbmVOdW1iZXI6ICcnLFxuICAgICAgICAgIHdlYnNpdGU6ICcnLFxuICAgICAgICAgIGxvY2F0aW9uU3RyZWV0QWRkcmVzczogJycsXG4gICAgICAgICAgbG9jYXRpb25DaXR5OiAnJyxcbiAgICAgICAgICBsb2NhdGlvblN0YXRlOiAnJyxcbiAgICAgICAgICBsb2NhdGlvblppcDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIGxvY2F0aW9uRW1haWxTZXR0aW5nczoge1xuICAgICAgICAgIGF1dG9tYXRlZEVtYWlsT3JpZ2luOiAnJyxcbiAgICAgICAgICBhdXRvbWF0ZWRFbWFpbFNhbHV0YXRpb246ICcnLFxuICAgICAgICB9LFxuICAgICAgICBsb2NhdGlvbkJyYW5kaW5nOiB7XG4gICAgICAgICAgbG9jYXRpb25Vcmw6ICcnLFxuICAgICAgICAgIGhlYWRlckNvbG9yMTogJycsXG4gICAgICAgICAgaGVhZGVyQ29sb3IyOiAnJyxcbiAgICAgICAgICBoZWFkZXJMb2dvQmFja2dyb3VuZENvbG9yOiAnJyxcbiAgICAgICAgICBoZWFkZXJMb2dvQmFja2dyb3VuZEFscGhhOiAnJyxcbiAgICAgICAgICBob3Jpem9udGFsTG9nb1ZhcmlhdGlvbjogJycsXG4gICAgICAgICAgc3F1YXJlTG9nb1ZhcmlhdGlvbjogJycsXG4gICAgICAgICAgYmFja2dyb3VuZEltYWdlOiAnJyxcbiAgICAgICAgICBiYWNrZ3JvdW5kQmx1cjogJycsXG4gICAgICAgICAgYmFja2dyb3VuZE92ZXJsYXlBbHBoYTogJycsXG4gICAgICAgICAgc3R1ZGVudFdlbGNvbWVWaWRlbzogJycsXG4gICAgICAgICAgaW5zdHJ1Y3RvcldlbGNvbWVWaWRlbzogJycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICBsb2NhdGlvbkNvbnRhY3RJbmZvOiB7XG4gICAgICAgICAgbG9jYXRpb25OYW1lOiB0cnVlLFxuICAgICAgICAgIGxvY2F0aW9uTmlja25hbWU6IHRydWUsXG4gICAgICAgICAgbG9jYXRpb25FbWFpbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbG9jYXRpb25FbWFpbFNldHRpbmdzOiB7XG4gICAgICAgICAgYXV0b21hdGVkRW1haWxPcmlnaW46IHRydWUsXG4gICAgICAgICAgYXV0b21hdGVkRW1haWxTYWx1dGF0aW9uOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBsb2NhdGlvbkJyYW5kaW5nOiB7XG4gICAgICAgICAgbG9jYXRpb25Vcmw6IHRydWUsXG4gICAgICAgICAgaGVhZGVyQ29sb3IxOiB0cnVlLFxuICAgICAgICAgIGhlYWRlckNvbG9yMjogdHJ1ZSxcbiAgICAgICAgICBoZWFkZXJMb2dvQmFja2dyb3VuZENvbG9yOiB0cnVlLFxuICAgICAgICAgIGhlYWRlckxvZ29CYWNrZ3JvdW5kQWxwaGE6IHRydWUsXG4gICAgICAgICAgaG9yaXpvbnRhbExvZ29WYXJpYXRpb246IHRydWUsXG4gICAgICAgICAgc3F1YXJlTG9nb1ZhcmlhdGlvbjogdHJ1ZSxcbiAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IHRydWUsXG4gICAgICAgICAgYmFja2dyb3VuZEJsdXI6IHRydWUsXG4gICAgICAgICAgYmFja2dyb3VuZE92ZXJsYXlBbHBoYTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgbG9jYXRpb246IHsgb3duZXIsIGlkLCBsb2NhdGlvbkNvbnRhY3RJbmZvLCBsb2NhdGlvbkVtYWlsU2V0dGluZ3MsIGxvY2F0aW9uQnJhbmRpbmcgfSA9IHt9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHVwZGF0ZWRMb2NhdGlvbiA9IHsgb3duZXIsIGlkLCBsb2NhdGlvbkNvbnRhY3RJbmZvLCBsb2NhdGlvbkVtYWlsU2V0dGluZ3MsIGxvY2F0aW9uQnJhbmRpbmcgfTtcbiAgICBjb25zdCB7IG9yaWdpbmFsTG9jYXRpb246IG9yaWdpbmFsTG9jYXRpb25TdGF0ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gdXBkYXRlKG9yaWdpbmFsTG9jYXRpb25TdGF0ZSwge1xuICAgICAgJG1lcmdlOiB1cGRhdGVkTG9jYXRpb24sXG4gICAgfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IG9yaWdpbmFsTG9jYXRpb24sIHVwZGF0ZWRMb2NhdGlvbiB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB9XG5cbiAgLy8gVE9ETzogVGhpcyBzZWVtcyB0byBiZSB3b3JraW5nIHdlbGwgLSBjb25maXJtIHRoYXQgb25seSBvbmUgaXNudGFuY2Ugb2YgdGhpcyBlZGl0IG1vZGFsIGlzIG9wZW5pbmcgb24gdGhlIHVzZXIgZWRpdCBwYWdlXG4gIC8vIFRoaXMgcmVzZXRzIHRoZSBjb21wb25lbnQgc3RhdGUgdG8gcmVmbGVjdCB0aGUgZGV0YWlscyBvZiB0aGUgbmV4dCB1c2VyIHRoZSB1c2VyIGNsaWNrcyBvblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gKG5leHRQcm9wcykgPT4ge1xuICAgIGlmICgoIXRoaXMuc3RhdGUub3JpZ2luYWxMb2NhdGlvbiB8fCBuZXh0UHJvcHMubG9jYXRpb24uaWQgIT09IHRoaXMuc3RhdGUub3JpZ2luYWxMb2NhdGlvbi5pZCkpIHtcbiAgICAgIGNvbnN0IHsgbG9jYXRpb246IHsgb3duZXIsIGlkLCBsb2NhdGlvbkNvbnRhY3RJbmZvLCBsb2NhdGlvbkVtYWlsU2V0dGluZ3MsIGxvY2F0aW9uQnJhbmRpbmcgfSA9IHt9IH0gPSBuZXh0UHJvcHM7XG4gICAgICBjb25zdCB1cGRhdGVkTG9jYXRpb24gPSB7IG93bmVyLCBpZCwgbG9jYXRpb25Db250YWN0SW5mbywgbG9jYXRpb25FbWFpbFNldHRpbmdzLCBsb2NhdGlvbkJyYW5kaW5nIH07XG4gICAgICBjb25zdCB7IG9yaWdpbmFsTG9jYXRpb246IG9yaWdpbmFsTG9jYXRpb25TdGF0ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSB1cGRhdGUob3JpZ2luYWxMb2NhdGlvblN0YXRlLCB7XG4gICAgICAgICRtZXJnZTogbmV4dFByb3BzLmxvY2F0aW9uLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgb3JpZ2luYWxMb2NhdGlvbiwgdXBkYXRlZExvY2F0aW9uIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVzZXJMaXN0TW9kYWwgaXMgdXNlZCB0byBhc3NpZ24gYW5kIHJlYXNzaWduIHVzZXJzIHRvIGEgbmV3IGxvY2F0aW9uXG4gIG9uT3BlblVzZXJMaXN0TW9kYWwgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgdXNlckxpc3RNb2RhbE9wZW46IHRydWUsIGNoYW5nZU1vZGFsT3BlbjogZmFsc2UgfSk7XG4gIG9uQ2xvc2VVc2VyTGlzdE1vZGFsID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IHVzZXJMaXN0TW9kYWxPcGVuOiBmYWxzZSB9KTtcblxuICAvLyBDaGFuZ2VNb2RhbCBwb3BzIHVwIHdoZW4gdXNlciBjbGlja3Mgb24gc2V0IG93bmVyIGFuZCBhc2tzIGZvciBjb25maXJtYXRpb24gdGhhdCB0aGV5IHdpc2ggdG8gYXNzaWduIGEgbmV3IG93bmVyIHRvIHRoZSBuZXcgbG9jYXRpb25cbiAgb25PcGVuQ2hhbmdlTW9kYWwgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgY2hhbmdlTW9kYWxPcGVuOiB0cnVlIH0pO1xuICBvbkNsb3NlQ2hhbmdlTW9kYWwgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHsgY2hhbmdlTW9kYWxPcGVuOiBmYWxzZSB9KTtcblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHBhc3NlZCBpbnRvIG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24sIGl0IHRha2VzIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24gY2hlY2sgYW5kIGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgLy8gVGhlIHVwZGF0ZWQgY29tcG9uZW50IHZhbGlkYXRpb24gc3RhdGUgaXMgc2V0IGFuZCB0aGVuIHRoZSBjYWxsYmFjayBpcyBkaXNwYXRjaGVkIC0gaW4gdGhpcyBjYXNlLCB0aGUgY2FsbGJhY2sgaGFuZGxlcyB0aGUgdG9hc3Qgd2FybmluZyBhdCB0aGUgY29udGFpbmVyIGxldmVsXG4gIG9uU2V0VmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uLCBjYikgPT4gdGhpcy5zZXRTdGF0ZSh7IHZhbGlkYXRpb24gfSwgY2IpO1xuXG4gIC8vIElmIGFsbCB0aGUgZmllbGRzIGFyZSB2YWxpZCwgd2UgY29uc3RydWN0IGEgcG9zdCBib2R5IGFuZCBjYWxsIG9uU2F2ZUxvY2F0aW9uQ2hhbmdlcyBwYXNzZWQgZG93biBmcm9tIHRoZSBjb250YWluZXIgbGV2ZWxcbiAgb25TdWJtaXQgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsgdXBkYXRlZExvY2F0aW9uIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgb25TYXZlTG9jYXRpb25DaGFuZ2VzLCBvblNhdmVMb2NhdGlvbkVycm9yLCBvbkNsb3NlIH0gPSB0aGlzLnByb3BzO1xuICAgIC8vIGNvbnN0IHZhbGlkID0gdHJ1ZTtcbiAgICBjb25zdCB2YWxpZCA9IGF3YWl0IG5lc3RlZEVkaXRGaWVsZFZhbGlkYXRpb24odGhpcy5zdGF0ZSwgdGhpcy5zdGF0ZS51cGRhdGVkTG9jYXRpb24sIHRoaXMub25TZXRWYWxpZGF0aW9uLCB0aGlzLnByb3BzLm9uU2V0TG9jYXRpb25WYWxpZGF0aW9uKTtcbiAgICBpZiAoIXZhbGlkKSB7XG4gICAgICByZXR1cm4gb25TYXZlTG9jYXRpb25FcnJvcigpO1xuICAgIH1cbiAgICBvblNhdmVMb2NhdGlvbkNoYW5nZXModXBkYXRlZExvY2F0aW9uKTtcbiAgICByZXR1cm4gb25DbG9zZSgpO1xuICB9XG5cbiAgaW5pdGlhbExvY2F0aW9uTW91bnQgPSAoKSA9PiB0aGlzLnN0YXRlLm9yaWdpbmFsTG9jYXRpb24uaWQgIT09IHRoaXMucHJvcHMubG9jYXRpb24uaWQ7XG5cbiAgLy8gV2UgcHVsbCB0aGUgdmFsdWUgYmFzZWQgb24gdGhlIGZpZWxkIHR5cGUgdGhlbiBtZXJnZSB0aGF0IHVwZGF0ZWQga2V5L3ZhbHVlIHBhaXIgd2l0aCB0aGUgbGFzdCB2ZXJzaW9uIG9mIGNvbXBvbmVudCBzdGF0ZVxuICBoYW5kbGVEZXRhaWxzQ2hhbmdlID0gKGV2ZW50LCBuYW1lLCBzdGF0ZUtleSkgPT4ge1xuICAgIGNvbnN0IHsgdXBkYXRlZExvY2F0aW9uOiBwcmV2aW91c0xvY2F0aW9uU3RhdGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IHZhbHVlO1xuICAgIGlmIChldmVudC5oZXgpIHtcbiAgICAgIHZhbHVlID0gZXZlbnQuaGV4O1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0KSB7XG4gICAgICB2YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSBldmVudDtcbiAgICB9XG4gICAgbGV0IHVwZGF0ZWRMb2NhdGlvbjtcbiAgICBpZiAobmFtZSA9PT0gJ293bmVyJykge1xuICAgICAgdXBkYXRlZExvY2F0aW9uID0gdXBkYXRlKHByZXZpb3VzTG9jYXRpb25TdGF0ZSwge1xuICAgICAgICBvd25lcjoge1xuICAgICAgICAgICRzZXQ6IGV2ZW50LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZWRMb2NhdGlvbiA9IHVwZGF0ZShwcmV2aW91c0xvY2F0aW9uU3RhdGUsIHtcbiAgICAgICAgW3N0YXRlS2V5XToge1xuICAgICAgICAgICRtZXJnZTogeyBbbmFtZV06IHZhbHVlIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZWRMb2NhdGlvbiB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG9wZW4sIG9uQ2xvc2UsIGxvY2F0aW9uIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgb3duZXIsIGxvY2F0aW9uQ29udGFjdEluZm8sIGxvY2F0aW9uRW1haWxTZXR0aW5ncywgbG9jYXRpb25CcmFuZGluZyB9ID0gbG9jYXRpb247XG4gICAgY29uc3Qge1xuICAgICAgdXBkYXRlZExvY2F0aW9uOiB7IG93bmVyOiB1cGRhdGVkT3duZXIsIGxvY2F0aW9uQ29udGFjdEluZm86IHVwZGF0ZWRMb2NhdGlvbkNvbnRhY3RJbmZvLCBsb2NhdGlvbkVtYWlsU2V0dGluZ3M6IHVwZGF0ZWRMb2NhdGlvbkVtYWlsU2V0dGluZ3MsIGxvY2F0aW9uQnJhbmRpbmc6IHVwZGF0ZWRMb2NhdGlvbkJyYW5kaW5nIH0sXG4gICAgICB2YWxpZGF0aW9uOiB7IGxvY2F0aW9uQ29udGFjdEluZm86IGxvY2F0aW9uQ29udGFjdEluZm9WYWxpZGF0aW9uLCBsb2NhdGlvbkVtYWlsU2V0dGluZ3M6IGxvY2F0aW9uRW1haWxTZXR0aW5nc1ZhbGlkYXRpb24sIGxvY2F0aW9uQnJhbmRpbmc6IGxvY2F0aW9uQnJhbmRpbmdWYWxpZGF0aW9uIH0sXG4gICAgICB1c2VyTGlzdE1vZGFsT3BlbiwgY2hhbmdlTW9kYWxPcGVuIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8UG9ydGFsIHNlbGVjdG9yPVwiI21vZGFsXCI+XG4gICAgICAgIHtvcGVuICYmIChcbiAgICAgICAgICA8Zm9ybT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmxheVwiPlxuICAgICAgICAgICAgICA8Q2xpY2tPZmZDb21wb25lbnRXcmFwcGVyIG5lc3RlZE1vZGFscz17dXNlckxpc3RNb2RhbE9wZW4gfHwgY2hhbmdlTW9kYWxPcGVufSBvbk91dGVyQ2xpY2s9e29uQ2xvc2V9PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJtb2RhbF9sb2NhdGlvbl9jcmVhdGVcIiBjbGFzc05hbWU9XCJtb2RhbCBtb2RhbC1jdXN0b20gbW9kYWwtY3VzdG9tLWxhcmdlIG1vZGFsLWdyYXlcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tb2RhbCBjYXJkLW1haW4gY2FyZCBncmV5IGxpZ2h0ZW4tM1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtcGFuZWwgY2FyZC1wYW5lbC10aXRsZSBncmVlbiBsaWdodGVuLTEgd2hpdGUtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wYW5lbC1yb3cgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaDJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoZWFkaW5nLWhvbGRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaGVhZGluZy1ibG9ja1wiPkVkaXQgTG9jYXRpb248L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbFwiIHN0eWxlPXt7IHRleHRBbGlnbjogJ3JpZ2h0JyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmxvY2staWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImljb24tbG9jYXRpb25cIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1pY29uXCI+TG9jYXRpb248L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBzMTIgbDZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8T3duZXJTZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lcj17dGhpcy5pbml0aWFsTG9jYXRpb25Nb3VudCgpID8gb3duZXIgOiB1cGRhdGVkT3duZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyTGlzdD17c2FtcGxlT3duZXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckxpc3RNb2RhbE9wZW49e3VzZXJMaXN0TW9kYWxPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTW9kYWxPcGVuPXtjaGFuZ2VNb2RhbE9wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5Vc2VyTGlzdE1vZGFsPXt0aGlzLm9uT3BlblVzZXJMaXN0TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlVXNlckxpc3RNb2RhbD17dGhpcy5vbkNsb3NlVXNlckxpc3RNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlbkNoYW5nZU1vZGFsPXt0aGlzLm9uT3BlbkNoYW5nZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZUNoYW5nZU1vZGFsPXt0aGlzLm9uQ2xvc2VDaGFuZ2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMb2NhdGlvbkNvbnRhY3RJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17dGhpcy5pbml0aWFsTG9jYXRpb25Nb3VudCgpID8gbG9jYXRpb25Db250YWN0SW5mbyA6IHVwZGF0ZWRMb2NhdGlvbkNvbnRhY3RJbmZvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRGV0YWlsc0NoYW5nZT17dGhpcy5oYW5kbGVEZXRhaWxzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbj17bG9jYXRpb25Db250YWN0SW5mb1ZhbGlkYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0NvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExvY2F0aW9uRW1haWxTZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU9e3RoaXMuaW5pdGlhbExvY2F0aW9uTW91bnQoKSA/IGxvY2F0aW9uRW1haWxTZXR0aW5ncyA6IHVwZGF0ZWRMb2NhdGlvbkVtYWlsU2V0dGluZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEZXRhaWxzQ2hhbmdlPXt0aGlzLmhhbmRsZURldGFpbHNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uPXtsb2NhdGlvbkVtYWlsU2V0dGluZ3NWYWxpZGF0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9Db2x1bW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPExvY2F0aW9uQnJhbmRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT17dGhpcy5pbml0aWFsTG9jYXRpb25Nb3VudCgpID8gbG9jYXRpb25CcmFuZGluZyA6IHVwZGF0ZWRMb2NhdGlvbkJyYW5kaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURldGFpbHNDaGFuZ2U9e3RoaXMuaGFuZGxlRGV0YWlsc0NoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uPXtsb2NhdGlvbkJyYW5kaW5nVmFsaWRhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiIyFcIiBjbGFzc05hbWU9XCJtb2RhbC1jbG9zZSB3YXZlcy1lZmZlY3Qgd2F2ZXMtdGVhbCBidG4tZmxhdCBwaW5rLXRleHQgdGV4dC1kYXJrZW4tMVwiIG9uQ2xpY2s9e29uQ2xvc2V9PkNhbmNlbDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwiYnRuXCIgc3R5bGU9e3sgY29sb3I6ICd3aGl0ZScgfX0gb25DbGljaz17dGhpcy5vblN1Ym1pdH0+U2F2ZTwvYT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9DbGlja09mZkNvbXBvbmVudFdyYXBwZXI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICl9XG5cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICB7YFxuICAgICAgICAgICAgICBoNCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAyLjI4cmVtO1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxMTAlO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMS41MnJlbSAwIC45MTJyZW0gMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzM0MzQzNDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwLnBhc3NhZ2Uge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzM0MzQzNDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAub3ZlcmxheSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICAgICAgei1pbmRleDogMTk5OTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAubW9kYWwge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICB0b3A6IDEwJTtcbiAgICAgICAgICAgICAgICByaWdodDogMTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDEwJTtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDI0cHggMzhweCAzcHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCA5cHggNDZweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEyKSwgMCAxMXB4IDE1cHggLTdweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLm1vZGFsLWZvb3RlciB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLm1vZGFsLWN1c3RvbSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5tb2RhbC1mdWxsLXNpemUge1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgICAgICByaWdodDogMDtcbiAgICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L1BvcnRhbD5cbiAgICApO1xuICB9XG59XG5cbkxvY2F0aW9uRGV0YWlsc01vZGFsLnByb3BUeXBlcyA9IHtcbiAgb3BlbjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgbG9jYXRpb246IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgb25DbG9zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgb25TZXRMb2NhdGlvblZhbGlkYXRpb246IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBMb2NhdGlvbkRldGFpbHNNb2RhbDtcbiJdfQ== */\\n/*@ sourceURL=/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Location/components/LocationDetailsModal/index.js */\"));\n  }\n\n}\n\nLocationDetailsModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  location: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSetLocationValidation: PropTypes.func.isRequired\n};\nexport default LocationDetailsModal;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Location/components/LocationDetailsModal/index.js"],"names":["React","PropTypes","update","Portal","ClickOffComponentWrapper","OwnerSection","LocationContactInfo","LocationEmailSettings","LocationBranding","sampleOwners","nestedEditFieldValidation","LocationDetailsModal","Component","constructor","props","nextProps","state","originalLocation","location","id","owner","locationContactInfo","locationEmailSettings","locationBranding","updatedLocation","originalLocationState","$merge","setState","userListModalOpen","changeModalOpen","validation","cb","event","preventDefault","onSaveLocationChanges","onSaveLocationError","onClose","valid","onSetValidation","onSetLocationValidation","name","stateKey","previousLocationState","value","hex","target","$set","locationName","locationNickname","locationEmail","locationPhoneNumber","website","locationStreetAddress","locationCity","locationState","locationZip","automatedEmailOrigin","automatedEmailSalutation","locationUrl","headerColor1","headerColor2","headerLogoBackgroundColor","headerLogoBackgroundAlpha","horizontalLogoVariation","squareLogoVariation","backgroundImage","backgroundBlur","backgroundOverlayAlpha","studentWelcomeVideo","instructorWelcomeVideo","componentDidMount","render","open","updatedOwner","updatedLocationContactInfo","updatedLocationEmailSettings","updatedLocationBranding","locationContactInfoValidation","locationEmailSettingsValidation","locationBrandingValidation","textAlign","initialLocationMount","handleDetailsChange","onOpenUserListModal","onCloseUserListModal","onOpenChangeModal","onCloseChangeModal","color","onSubmit","propTypes","bool","isRequired","object","func"],"mappings":"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","sourcesContent":["/* eslint-disable array-callback-return */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\n\nimport Portal from '../../../Portal';\nimport ClickOffComponentWrapper from '../../../ClickOffComponentWrapper';\n\nimport OwnerSection from '../SharedModalComponents/OwnerSection';\nimport LocationContactInfo from '../SharedModalComponents/LocationContactInfo';\nimport LocationEmailSettings from '../SharedModalComponents/LocationEmailSettings';\nimport LocationBranding from '../SharedModalComponents/LocationBranding';\n\nimport sampleOwners from '../NewLocationModal/utils/sampleOwners';\nimport { nestedEditFieldValidation } from '../../../utils/fieldValidation';\n\n// TODO: Render only one instance of this modal\nclass LocationDetailsModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      owner: null,\n      userListModalOpen: false,\n      changeModalOpen: false,\n      originalLocation: {\n        id: '',\n        locationContactInfo: {\n          locationName: '',\n          locationNickname: '',\n          locationEmail: '',\n          locationPhoneNumber: '',\n          website: '',\n          locationStreetAddress: '',\n          locationCity: '',\n          locationState: '',\n          locationZip: '',\n        },\n        locationEmailSettings: {\n          automatedEmailOrigin: '',\n          automatedEmailSalutation: '',\n        },\n        locationBranding: {\n          locationUrl: '',\n          headerColor1: '',\n          headerColor2: '',\n          headerLogoBackgroundColor: '',\n          headerLogoBackgroundAlpha: '',\n          horizontalLogoVariation: '',\n          squareLogoVariation: '',\n          backgroundImage: '',\n          backgroundBlur: '',\n          backgroundOverlayAlpha: '',\n          studentWelcomeVideo: '',\n          instructorWelcomeVideo: '',\n        },\n      },\n      updatedLocation: {\n        id: '',\n        locationContactInfo: {\n          locationName: '',\n          locationNickname: '',\n          locationEmail: '',\n          locationPhoneNumber: '',\n          website: '',\n          locationStreetAddress: '',\n          locationCity: '',\n          locationState: '',\n          locationZip: '',\n        },\n        locationEmailSettings: {\n          automatedEmailOrigin: '',\n          automatedEmailSalutation: '',\n        },\n        locationBranding: {\n          locationUrl: '',\n          headerColor1: '',\n          headerColor2: '',\n          headerLogoBackgroundColor: '',\n          headerLogoBackgroundAlpha: '',\n          horizontalLogoVariation: '',\n          squareLogoVariation: '',\n          backgroundImage: '',\n          backgroundBlur: '',\n          backgroundOverlayAlpha: '',\n          studentWelcomeVideo: '',\n          instructorWelcomeVideo: '',\n        },\n      },\n      validation: {\n        locationContactInfo: {\n          locationName: true,\n          locationNickname: true,\n          locationEmail: true,\n        },\n        locationEmailSettings: {\n          automatedEmailOrigin: true,\n          automatedEmailSalutation: true,\n        },\n        locationBranding: {\n          locationUrl: true,\n          headerColor1: true,\n          headerColor2: true,\n          headerLogoBackgroundColor: true,\n          headerLogoBackgroundAlpha: true,\n          horizontalLogoVariation: true,\n          squareLogoVariation: true,\n          backgroundImage: true,\n          backgroundBlur: true,\n          backgroundOverlayAlpha: true,\n        },\n      },\n    };\n  }\n\n  componentDidMount() {\n    const { location: { owner, id, locationContactInfo, locationEmailSettings, locationBranding } = {} } = this.props;\n    const updatedLocation = { owner, id, locationContactInfo, locationEmailSettings, locationBranding };\n    const { originalLocation: originalLocationState } = this.state;\n    const originalLocation = update(originalLocationState, {\n      $merge: updatedLocation,\n    });\n    this.setState({ originalLocation, updatedLocation }); // eslint-disable-line\n  }\n\n  // TODO: This seems to be working well - confirm that only one isntance of this edit modal is opening on the user edit page\n  // This resets the component state to reflect the details of the next user the user clicks on\n  componentWillReceiveProps = (nextProps) => {\n    if ((!this.state.originalLocation || nextProps.location.id !== this.state.originalLocation.id)) {\n      const { location: { owner, id, locationContactInfo, locationEmailSettings, locationBranding } = {} } = nextProps;\n      const updatedLocation = { owner, id, locationContactInfo, locationEmailSettings, locationBranding };\n      const { originalLocation: originalLocationState } = this.state;\n      const originalLocation = update(originalLocationState, {\n        $merge: nextProps.location,\n      });\n      this.setState({ originalLocation, updatedLocation });\n    }\n  }\n\n  // UserListModal is used to assign and reassign users to a new location\n  onOpenUserListModal = () => this.setState({ userListModalOpen: true, changeModalOpen: false });\n  onCloseUserListModal = () => this.setState({ userListModalOpen: false });\n\n  // ChangeModal pops up when user clicks on set owner and asks for confirmation that they wish to assign a new owner to the new location\n  onOpenChangeModal = () => this.setState({ changeModalOpen: true });\n  onCloseChangeModal = () => this.setState({ changeModalOpen: false });\n\n  // This function is passed into nestedEditFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n  onSetValidation = (validation, cb) => this.setState({ validation }, cb);\n\n  // If all the fields are valid, we construct a post body and call onSaveLocationChanges passed down from the container level\n  onSubmit = async (event) => {\n    event.preventDefault();\n    const { updatedLocation } = this.state;\n    const { onSaveLocationChanges, onSaveLocationError, onClose } = this.props;\n    // const valid = true;\n    const valid = await nestedEditFieldValidation(this.state, this.state.updatedLocation, this.onSetValidation, this.props.onSetLocationValidation);\n    if (!valid) {\n      return onSaveLocationError();\n    }\n    onSaveLocationChanges(updatedLocation);\n    return onClose();\n  }\n\n  initialLocationMount = () => this.state.originalLocation.id !== this.props.location.id;\n\n  // We pull the value based on the field type then merge that updated key/value pair with the last version of component state\n  handleDetailsChange = (event, name, stateKey) => {\n    const { updatedLocation: previousLocationState } = this.state;\n    let value;\n    if (event.hex) {\n      value = event.hex;\n    } else if (event.target) {\n      value = event.target.value;\n    } else {\n      value = event;\n    }\n    let updatedLocation;\n    if (name === 'owner') {\n      updatedLocation = update(previousLocationState, {\n        owner: {\n          $set: event,\n        },\n      });\n    } else {\n      updatedLocation = update(previousLocationState, {\n        [stateKey]: {\n          $merge: { [name]: value },\n        },\n      });\n    }\n    this.setState({ updatedLocation });\n  }\n\n  render() {\n    const { open, onClose, location } = this.props;\n    const { owner, locationContactInfo, locationEmailSettings, locationBranding } = location;\n    const {\n      updatedLocation: { owner: updatedOwner, locationContactInfo: updatedLocationContactInfo, locationEmailSettings: updatedLocationEmailSettings, locationBranding: updatedLocationBranding },\n      validation: { locationContactInfo: locationContactInfoValidation, locationEmailSettings: locationEmailSettingsValidation, locationBranding: locationBrandingValidation },\n      userListModalOpen, changeModalOpen } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <form>\n            <div className=\"overlay\">\n              <ClickOffComponentWrapper nestedModals={userListModalOpen || changeModalOpen} onOuterClick={onClose}>\n                <div id=\"modal_location_create\" className=\"modal modal-custom modal-custom-large modal-gray\">\n                  <div className=\"card-modal card-main card grey lighten-3\">\n                    <div className=\"card-panel card-panel-title green lighten-1 white-text\">\n                      <div className=\"card-panel-row row\">\n                        <div className=\"col\">\n                          <h3 className=\"h2\">\n                            <span className=\"heading-holder\">\n                              <span className=\"heading-block\">Edit Location</span>\n                            </span>\n                          </h3>\n                        </div>\n                        <div className=\"col\" style={{ textAlign: 'right' }}>\n                          <span className=\"block-icon\">\n                            <i className=\"icon-location\"></i>\n                            <span className=\"text-icon\">Location</span>\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"card-content\">\n                      <div className=\"card-body\">\n                        <div className=\"row mb-0\">\n                          <div className=\"col s12 l6\">\n                            <OwnerSection\n                              owner={this.initialLocationMount() ? owner : updatedOwner}\n                              userList={sampleOwners}\n                              handleDetailsChange={this.handleDetailsChange}\n                              userListModalOpen={userListModalOpen}\n                              changeModalOpen={changeModalOpen}\n                              onOpenUserListModal={this.onOpenUserListModal}\n                              onCloseUserListModal={this.onCloseUserListModal}\n                              onOpenChangeModal={this.onOpenChangeModal}\n                              onCloseChangeModal={this.onCloseChangeModal}\n                            />\n                            <LocationContactInfo\n                              state={this.initialLocationMount() ? locationContactInfo : updatedLocationContactInfo}\n                              handleDetailsChange={this.handleDetailsChange}\n                              validation={locationContactInfoValidation}\n                              noColumn\n                            />\n                            <LocationEmailSettings\n                              state={this.initialLocationMount() ? locationEmailSettings : updatedLocationEmailSettings}\n                              handleDetailsChange={this.handleDetailsChange}\n                              validation={locationEmailSettingsValidation}\n                              noColumn\n                            />\n                          </div>\n                          <LocationBranding\n                            state={this.initialLocationMount() ? locationBranding : updatedLocationBranding}\n                            handleDetailsChange={this.handleDetailsChange}\n                            validation={locationBrandingValidation}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"modal-footer\">\n                        <a href=\"#!\" className=\"modal-close waves-effect waves-teal btn-flat pink-text text-darken-1\" onClick={onClose}>Cancel</a>\n                        <a href=\"#\" className=\"btn\" style={{ color: 'white' }} onClick={this.onSubmit}>Save</a>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </ClickOffComponentWrapper>\n            </div>\n          </form>\n        )}\n\n        <style jsx>\n          {`\n              h4 {\n                font-size: 2.28rem;\n                line-height: 110%;\n                margin: 1.52rem 0 .912rem 0;\n                margin-top: 0;\n              }\n              p {\n                font-size: 16px;\n                color: #343434;\n              }\n              p.passage {\n                font-size: 14px;\n              }\n              a {\n                color: #343434;\n              }\n              .overlay {\n                position: fixed;\n                background-color: rgba(0, 0, 0, 0.7);\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: 1999;\n              }\n              .modal {\n                display: block;\n                background-color: transparent;\n                position: absolute;\n                top: 10%;\n                right: 10%;\n                left: 10%;\n                box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12), 0 11px 15px -7px rgba(0, 0, 0, 0.2);\n              }\n              .modal-footer {\n                background-color: white;\n              }\n              .modal-custom {\n                opacity: 1;\n                visibility: visible;\n              }\n              .modal-full-size {\n                z-index: 999;\n                width: 100%;\n                left: 0;\n                top: 0;\n                right: 0;\n                bottom: 0;\n              }\n            `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nLocationDetailsModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  location: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onSetLocationValidation: PropTypes.func.isRequired,\n};\n\nexport default LocationDetailsModal;\n"]},"metadata":{},"sourceType":"module"}