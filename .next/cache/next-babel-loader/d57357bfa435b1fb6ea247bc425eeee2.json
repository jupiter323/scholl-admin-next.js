{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport update from 'immutability-helper';\nimport Portal from '../../../Portal';\nimport ClickOffComponentWrapper from '../../../ClickOffComponentWrapper';\nimport OwnerContactInfo from './components/OwnerContactInfo';\nimport LocationContactInfo from '../SharedModalComponents/LocationContactInfo';\nimport LocationEmailSettings from '../SharedModalComponents/LocationEmailSettings';\nimport LocationBranding from '../SharedModalComponents/LocationBranding';\nimport { nestedCreateFieldValidation } from '../../../utils/fieldValidation';\nimport initialState from '../../utils/initialState';\n\nvar NewLocationModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewLocationModal, _React$Component);\n\n  function NewLocationModal(props) {\n    var _this;\n\n    _classCallCheck(this, NewLocationModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewLocationModal).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetValidation\", function (validation, cb) {\n      return _this.setState({\n        validation: validation\n      }, cb);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var _this$state, owner, locationContactInfo, locationEmailSettings, locationBranding, _this$props, onSaveNewLocation, onSaveLocationError, onAddNewLocation, _this$props$fromInstr, fromInstructorPage, valid, postBody;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _this$state = _this.state, owner = _this$state.owner, locationContactInfo = _this$state.locationContactInfo, locationEmailSettings = _this$state.locationEmailSettings, locationBranding = _this$state.locationBranding;\n                _this$props = _this.props, onSaveNewLocation = _this$props.onSaveNewLocation, onSaveLocationError = _this$props.onSaveLocationError, onAddNewLocation = _this$props.onAddNewLocation, _this$props$fromInstr = _this$props.fromInstructorPage, fromInstructorPage = _this$props$fromInstr === void 0 ? false : _this$props$fromInstr; // NOTE: Swap out what instance of valid is active if you want to test saving a new location without worrying about validation\n                // const valid = true;\n\n                _context.next = 5;\n                return nestedCreateFieldValidation(_this.state, _this.onSetValidation, function (validation) {\n                  return console.warn('validation', validation);\n                });\n\n              case 5:\n                valid = _context.sent;\n\n                if (!valid) {\n                  // return onSaveLocationError();\n                  console.warn('not valid');\n                }\n\n                postBody = {\n                  locationContactInfo: locationContactInfo,\n                  locationEmailSettings: locationEmailSettings,\n                  locationBranding: locationBranding,\n                  owner: owner\n                };\n\n                if (fromInstructorPage) {\n                  onSaveNewLocation(postBody);\n                } else {\n                  onAddNewLocation(postBody);\n                }\n\n                console.warn('stubbed out save function');\n\n                _this.onCloseModal();\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onResetLocation\", function () {\n      return _this.setState(initialState);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseModal\", function () {\n      var onClose = _this.props.onClose;\n      onClose();\n\n      _this.onResetLocation();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDetailsChange\", function (event, name, section) {\n      var value;\n\n      if (event.hex) {\n        value = event.hex;\n      } else {\n        value = event.target ? event.target.value : event;\n      }\n\n      var updatedState = update(_this.state, _defineProperty({}, section, {\n        $merge: _defineProperty({}, name, value)\n      }));\n\n      _this.setState(updatedState);\n    });\n\n    _this.state = {\n      ownerContactInfo: {\n        firstName: '',\n        lastName: '',\n        email: '',\n        gender: '',\n        phone: '',\n        streetAddress: '',\n        city: '',\n        state: '',\n        zip: ''\n      },\n      locationEmailSettings: {\n        automatedEmailOriginAddress: '',\n        automatedEmailSalutation: ''\n      },\n      locationContactInfo: {\n        locationName: '',\n        locationNickname: '',\n        locationEmail: '',\n        locationPhoneNumber: '',\n        website: '',\n        locationStreetAddress: '',\n        locationCity: '',\n        locationState: '',\n        locationZip: ''\n      },\n      locationBranding: {\n        locationUrl: '',\n        headerColor1: '',\n        headerColor2: '',\n        headerLogoBackgroundColor: '',\n        headerLogoBackgroundAlpha: '',\n        horizontalLogoVariation: '',\n        squareLogoVariation: '',\n        backgroundImage: '',\n        backgroundBlur: '',\n        backgroundOverlayAlpha: '',\n        studentWelcomeVideo: '',\n        instructorWelcomeVideo: ''\n      },\n      validation: {\n        ownerContactInfo: {\n          firstName: true,\n          lastName: true,\n          email: true,\n          gender: true\n        },\n        locationEmailSettings: {\n          automatedEmailOriginAddress: true,\n          automatedEmailSalutation: true\n        },\n        locationContactInfo: {\n          locationName: true,\n          locationNickname: true,\n          locationEmail: true\n        },\n        locationBranding: {\n          locationUrl: true,\n          headerColor1: true,\n          headerColor2: true,\n          headerLogoBackgroundColor: true,\n          headerLogoBackgroundAlpha: true,\n          horizontalLogoVariation: true,\n          squareLogoVariation: true,\n          backgroundImage: true,\n          backgroundBlur: true,\n          backgroundOverlayAlpha: true\n        }\n      }\n    };\n    return _this;\n  } // This function is passed into nestedCreateFieldValidation, it takes the result of the validation check and a callback function\n  // The updated component validation state is set and then the callback is dispatched - in this case, the callback handles the toast warning at the container level\n\n\n  _createClass(NewLocationModal, [{\n    key: \"render\",\n    value: function render() {\n      var open = this.props.open;\n      var _this$state2 = this.state,\n          ownerContactInfo = _this$state2.ownerContactInfo,\n          locationEmailSettings = _this$state2.locationEmailSettings,\n          locationContactInfo = _this$state2.locationContactInfo,\n          locationBranding = _this$state2.locationBranding;\n      return React.createElement(Portal, {\n        selector: \"#modal\"\n      }, open && React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"overlay\"\n      }, React.createElement(ClickOffComponentWrapper, {\n        onOuterClick: this.onCloseModal\n      }, React.createElement(\"div\", {\n        id: \"modal_user_create\",\n        className: \"jsx-2979935167\" + \" \" + \"modal modal-custom modal-custom-large modal-gray\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"card-modal card-main card grey lighten-3\"\n      }, React.createElement(\"div\", {\n        style: {\n          backgroundColor: '#31837a',\n          color: '#fff'\n        },\n        className: \"jsx-2979935167\" + \" \" + \"card-panel card-panel-title\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"card-panel-row row\"\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'block'\n        },\n        className: \"jsx-2979935167\" + \" \" + \"col\"\n      }, React.createElement(\"h3\", {\n        className: \"jsx-2979935167\" + \" \" + \"h2\"\n      }, React.createElement(\"span\", {\n        className: \"jsx-2979935167\" + \" \" + \"heading-holder\"\n      }, React.createElement(\"span\", {\n        className: \"jsx-2979935167\" + \" \" + \"heading-block\"\n      }, \"Create New Owner\")))), React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"col\"\n      }, React.createElement(\"span\", {\n        className: \"jsx-2979935167\" + \" \" + \"block-icon\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-2979935167\" + \" \" + \"icon-owner\"\n      }), React.createElement(\"span\", {\n        className: \"jsx-2979935167\" + \" \" + \"text-icon\"\n      }, \"Owner\"))))), React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"card-content\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"card-body\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"row mb-0\"\n      }, React.createElement(OwnerContactInfo, {\n        state: ownerContactInfo,\n        handleDetailsChange: this.handleDetailsChange\n      }), React.createElement(LocationContactInfo, {\n        state: locationContactInfo,\n        handleDetailsChange: this.handleDetailsChange\n      })), React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"row mb-0\"\n      }, React.createElement(LocationEmailSettings, {\n        state: locationEmailSettings,\n        handleDetailsChange: this.handleDetailsChange\n      }), React.createElement(LocationBranding, {\n        state: locationBranding,\n        handleDetailsChange: this.handleDetailsChange\n      }))), React.createElement(\"div\", {\n        className: \"jsx-2979935167\" + \" \" + \"modal-footer\"\n      }, React.createElement(\"a\", {\n        href: \"#!\",\n        onClick: this.onCloseModal,\n        className: \"jsx-2979935167\" + \" \" + \"modal-close waves-effect waves-teal btn-flat pink-text text-darken-1\"\n      }, \"Cancel\"), React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.onSubmit,\n        className: \"jsx-2979935167\" + \" \" + \"btn\"\n      }, \"Save\"))))))), React.createElement(_JSXStyle, {\n        id: \"2979935167\"\n      }, [\".overlay.jsx-2979935167{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:999;}\", \".card-modal.jsx-2979935167{margin:0;border-radius:6px;}\", \".modal.jsx-2979935167{display:block;background-color:white;position:absolute;top:10%;right:10%;left:10%;box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);}\", \".modal-custom.jsx-2979935167{opacity:1;visibility:visible;}\", \".modal-footer.jsx-2979935167{background-color:white;}\"]));\n    }\n  }]);\n\n  return NewLocationModal;\n}(React.Component);\n\nexport default NewLocationModal;","map":null,"metadata":{},"sourceType":"module"}