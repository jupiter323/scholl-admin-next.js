{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/LessonDetailAnswerSheet/components/QuestionModal/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"../../../../common/Portal\";\nimport ClickOffComponentWrapper from \"../../../../common/ClickOffComponentWrapper\";\nimport { addStudentLessonProblemFlagApi, addVideoWatchedTime } from \"../../../index/api\";\nimport { makeSelectActiveLesson } from \"../../../index/selectors\";\nimport RadialBar from \"../../../../common/RadialBar\";\nimport { ConvertSecondsToMinutesSeconds } from '../../../../utils/ConvertSecondsToMinutesSeconds';\nimport VideoPlayer from '../VideoPlayer';\nimport EditProblemRow from '../EditProblemRow';\n\nclass QuestionModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentWillReceiveProps\", nextProps => {\n      const {\n        question: {\n          id,\n          video_watched_seconds\n        }\n      } = nextProps;\n      const {\n        originalTestProblemId\n      } = this.state;\n\n      if (id !== originalTestProblemId && this.props.question.flag_status) {\n        const {\n          question: {\n            flag_status\n          }\n        } = this.props;\n        this.setState({\n          status: flag_status,\n          originalTestProblemId: id\n        });\n      }\n\n      if (video_watched_seconds) {\n        this.setState({\n          videoWatchedTime: video_watched_seconds\n        });\n      }\n    });\n\n    _defineProperty(this, \"onHandleQuestionFlagStatus\", async (_e, status) => {\n      const {\n        activeLesson: {\n          id: lessonId\n        },\n        onChangeFlagState\n      } = this.props;\n      this.setState({\n        status\n      });\n      onChangeFlagState(status);\n      const {\n        question: {\n          problem: {\n            id: problemId\n          }\n        }\n      } = this.props;\n      const postBody = {\n        problem_id: problemId,\n        student_lesson_id: lessonId,\n        flag_status: status\n      };\n      await addStudentLessonProblemFlagApi(postBody);\n    });\n\n    _defineProperty(this, \"recordVideoWatchedTime\", () => {\n      this.setState({\n        videoWatchedTime: this.state.videoWatchedTime + 1\n      });\n    });\n\n    _defineProperty(this, \"onHandleWatchedVideo\", status => {\n      if (status === 'STARTED') {\n        const intervalId = setInterval(this.recordVideoWatchedTime, 1000);\n        this.setState({\n          watchedVideo: true,\n          intervalId\n        });\n      } else {\n        clearInterval(this.state.intervalId);\n      }\n    });\n\n    _defineProperty(this, \"onCloseQuestionModal\", async () => {\n      const {\n        onCloseQuestionModal,\n        question: {\n          problem: {\n            id\n          }\n        },\n        activeLesson: {\n          id: lessonId\n        }\n      } = this.props;\n\n      if (this.state.watchedVideo) {\n        clearInterval(this.state.intervalId);\n        const {\n          videoWatchedTime\n        } = this.state;\n        const postBody = {\n          problem_id: id,\n          student_lesson_id: lessonId,\n          watched_seconds: videoWatchedTime\n        };\n        await addVideoWatchedTime(postBody);\n      }\n\n      onCloseQuestionModal();\n    });\n\n    this.state = {\n      status: 'UN_FLAGGED',\n      originalTestProblemId: '',\n      videoWatchedTime: 0,\n      intervalId: null,\n      watchedVideo: false\n    };\n  }\n\n  render() {\n    const {\n      open,\n      question: {\n        problem: {\n          reference_number,\n          video\n        }\n      }\n    } = this.props;\n    const {\n      videoWatchedTime\n    } = this.state;\n    return __jsx(Portal, {\n      selector: \"#modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, open && __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, __jsx(ClickOffComponentWrapper, {\n      onOuterClick: this.onCloseQuestionModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      id: \"modal_video001\",\n      className: \"jsx-3449628841\" + \" \" + \"modal modal-answer-single\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"modal-header row mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"col s10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      className: \"jsx-3449628841\" + \" \" + \"subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Reading\"), __jsx(\"span\", {\n      className: \"jsx-3449628841\" + \" \" + \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Problem \", reference_number)), __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"col s2 right-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      href: \"#!\",\n      onClick: this.onCloseQuestionModal,\n      className: \"jsx-3449628841\" + \" \" + \"close modal-close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"jsx-3449628841\" + \" \" + \"icon-close-thin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })))), __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"modal-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, video && __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"card-panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"  \", __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"panel-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"embed-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, __jsx(VideoPlayer, {\n      url: video ? video.url : '',\n      onHandleWatchedVideo: this.onHandleWatchedVideo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })))), __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"card-panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"panel-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, __jsx(\"strong\", {\n      className: \"jsx-3449628841\" + \" \" + \"subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Review With Student\"), __jsx(\"form\", {\n      action: \"#\",\n      className: \"jsx-3449628841\" + \" \" + \"answer-form review-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, __jsx(\"ul\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, __jsx(\"li\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      name: \"review_radio\",\n      type: \"radio\",\n      checked: this.state.status === \"UN_FLAGGED\",\n      onClick: e => this.onHandleQuestionFlagStatus(e, \"UN_FLAGGED\"),\n      className: \"jsx-3449628841\" + \" \" + \"with-gap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), __jsx(\"span\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Nope. Got it.\"))), __jsx(\"li\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      name: \"review_radio\",\n      type: \"radio\",\n      checked: this.state.status === \"FLAGGED\",\n      onClick: e => this.onHandleQuestionFlagStatus(e, \"FLAGGED\"),\n      className: \"jsx-3449628841\" + \" \" + \"with-gap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), __jsx(\"span\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"jsx-3449628841\" + \" \" + \"icon-flag red-text text-darken-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), \"Flag for Review\"))), __jsx(\"li\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      name: \"review_radio\",\n      type: \"radio\",\n      checked: this.state.status === \"REVIEWED\",\n      onClick: e => this.onHandleQuestionFlagStatus(e, \"REVIEWED\"),\n      className: \"jsx-3449628841\" + \" \" + \"with-gap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), __jsx(\"span\", {\n      className: \"jsx-3449628841\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"jsx-3449628841\" + \" \" + \"icon-flag gray-text text-darken-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), \"Mark Reviewed\")))))), __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"col panel-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"chart-block chart-block-test\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, __jsx(RadialBar, {\n      svgWidth: 150,\n      svgHeight: 150,\n      strokeWidth: 10,\n      maxValue: video ? video.duration : 0,\n      currentValue: 20,\n      strokeColor: \"#00BBF7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"chart-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      style: {\n        fontSize: '32px',\n        color: 'rgb(0, 187, 247)'\n      },\n      className: \"jsx-3449628841\" + \" \" + \"value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, ConvertSecondsToMinutesSeconds(videoWatchedTime)), __jsx(\"span\", {\n      style: {\n        fontSize: '14px'\n      },\n      className: \"jsx-3449628841\" + \" \" + \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \"out of\"), __jsx(\"span\", {\n      style: {\n        fontSize: '32px'\n      },\n      className: \"jsx-3449628841\" + \" \" + \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, ConvertSecondsToMinutesSeconds(video ? video.duration : 0)))))), __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"card-panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-3449628841\" + \" \" + \"panel-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, __jsx(\"strong\", {\n      className: \"jsx-3449628841\" + \" \" + \"subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"Edit Student's Answer\"), __jsx(EditProblemRow, {\n      activeLesson: this.props.activeLesson,\n      question: this.props.question,\n      updateProblemList: this.props.updateProblemList,\n      problemType: this.props.problemType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }))))))), __jsx(_JSXStyle, {\n      id: \"3449628841\",\n      __self: this\n    }, \".overlay.jsx-3449628841{position:fixed;background-color:rgba(0,0,0,0.7);top:0;right:0;bottom:0;left:0;z-index:1999;}#modal_video001.jsx-3449628841{z-index:2003;opacity:1;-webkit-transform:scaleX(1) scaleY(1);-ms-transform:scaleX(1) scaleY(1);transform:scaleX(1) scaleY(1);}.modal.jsx-3449628841{display:block;background-color:white;position:fixed;top:10%;left:10%;box-shadow:none;}.modal-answer-single.jsx-3449628841{opacity:1;visibility:visible;display:block !important;top:0 !important;left:auto;right:0;height:100vh;max-weight:none;margin:0 0 0 auto;border-radius:0;width:100%;-webkit-transform-origin:100% 0;-ms-transform-origin:100% 0;transform-origin:100% 0;}.modal-footer.jsx-3449628841{background-color:white;}.modal-header.jsx-3449628841{background:#ec693d linear-gradient(to right,#ec693d 0%,#649aab 61%,#30add6 87%,#18b5e9 100%);color:#fff;padding:7px 10px 5px;min-height:50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93b2xmL0RvY3VtZW50cy9jbGVhcmNob2ljZS9hZG1pbi9mZWF0dXJlLXZpZXctdXBkYXRlZC1jb3Vyc2UvY2xlYXItY2hvaWNlLWFkbWluL2NvbXBvbmVudHMvU3R1ZGVudC9MZXNzb25EZXRhaWxBbnN3ZXJTaGVldC9jb21wb25lbnRzL1F1ZXN0aW9uTW9kYWwvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa1FXLEFBRzhCLEFBU0YsQUFLQyxBQVFKLEFBY2EsQUFJd0QsVUFqQjVELEdBYlQsQ0FLYSxDQWRhLFFBVU4sQUEwQmhDLE1BYjJCLFFBUlYsV0FkVCxJQWVFLEVBZEEsQUFzQlMsTUFQUixFQWRBLE9BZU8sRUFkVCxBQXFCRyxPQXBCRyxHQXFCTCxJQVBWLElBUWUsRUFyQmYsRUFrQ2EsU0FaSyxFQWFLLGNBWkgsT0FsQnBCLEFBK0JrQixXQVpBLEtBYUgsV0FaRixXQUNhLG9EQVkxQixnQ0FYQSIsImZpbGUiOiIvVXNlcnMvd29sZi9Eb2N1bWVudHMvY2xlYXJjaG9pY2UvYWRtaW4vZmVhdHVyZS12aWV3LXVwZGF0ZWQtY291cnNlL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL1N0dWRlbnQvTGVzc29uRGV0YWlsQW5zd2VyU2hlZXQvY29tcG9uZW50cy9RdWVzdGlvbk1vZGFsL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yIH0gZnJvbSBcInJlc2VsZWN0XCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XG5pbXBvcnQgUG9ydGFsIGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vUG9ydGFsXCI7XG5pbXBvcnQgQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyIGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyXCI7XG5pbXBvcnQgeyBhZGRTdHVkZW50TGVzc29uUHJvYmxlbUZsYWdBcGksIGFkZFZpZGVvV2F0Y2hlZFRpbWUgfSBmcm9tIFwiLi4vLi4vLi4vaW5kZXgvYXBpXCI7XG5pbXBvcnQgeyBtYWtlU2VsZWN0QWN0aXZlTGVzc29uIH0gZnJvbSBcIi4uLy4uLy4uL2luZGV4L3NlbGVjdG9yc1wiO1xuaW1wb3J0IFJhZGlhbEJhciBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uL1JhZGlhbEJhclwiO1xuaW1wb3J0IHsgQ29udmVydFNlY29uZHNUb01pbnV0ZXNTZWNvbmRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvQ29udmVydFNlY29uZHNUb01pbnV0ZXNTZWNvbmRzJztcbmltcG9ydCBWaWRlb1BsYXllciBmcm9tICcuLi9WaWRlb1BsYXllcic7XG5pbXBvcnQgRWRpdFByb2JsZW1Sb3cgZnJvbSAnLi4vRWRpdFByb2JsZW1Sb3cnO1xuY2xhc3MgUXVlc3Rpb25Nb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzdGF0dXM6ICdVTl9GTEFHR0VEJyxcbiAgICAgIG9yaWdpbmFsVGVzdFByb2JsZW1JZDogJycsXG4gICAgICB2aWRlb1dhdGNoZWRUaW1lOiAwLFxuICAgICAgaW50ZXJ2YWxJZDogbnVsbCxcbiAgICAgIHdhdGNoZWRWaWRlbzogZmFsc2UsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSAobmV4dFByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBxdWVzdGlvbjogeyBpZCwgdmlkZW9fd2F0Y2hlZF9zZWNvbmRzIH0gfSA9IG5leHRQcm9wcztcbiAgICBjb25zdCB7IG9yaWdpbmFsVGVzdFByb2JsZW1JZCB9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAoaWQgIT09IG9yaWdpbmFsVGVzdFByb2JsZW1JZCAmJiB0aGlzLnByb3BzLnF1ZXN0aW9uLmZsYWdfc3RhdHVzKSB7XG4gICAgICBjb25zdCB7IHF1ZXN0aW9uOiB7IGZsYWdfc3RhdHVzIH0gfSA9IHRoaXMucHJvcHM7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3RhdHVzOiBmbGFnX3N0YXR1cyxcbiAgICAgICAgb3JpZ2luYWxUZXN0UHJvYmxlbUlkOiBpZCxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodmlkZW9fd2F0Y2hlZF9zZWNvbmRzKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdmlkZW9XYXRjaGVkVGltZTogdmlkZW9fd2F0Y2hlZF9zZWNvbmRzLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgb25IYW5kbGVRdWVzdGlvbkZsYWdTdGF0dXMgPSBhc3luYyAoX2UsIHN0YXR1cykgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGFjdGl2ZUxlc3NvbjogeyBpZDogbGVzc29uSWQgfSxcbiAgICAgIG9uQ2hhbmdlRmxhZ1N0YXRlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc3RhdHVzLFxuICAgIH0pO1xuICAgIG9uQ2hhbmdlRmxhZ1N0YXRlKHN0YXR1cyk7XG4gICAgY29uc3QgeyBxdWVzdGlvbjogeyBwcm9ibGVtOiB7IGlkOiBwcm9ibGVtSWQgfSB9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHBvc3RCb2R5ID0geyBwcm9ibGVtX2lkOiBwcm9ibGVtSWQsIHN0dWRlbnRfbGVzc29uX2lkOiBsZXNzb25JZCwgZmxhZ19zdGF0dXM6IHN0YXR1cyB9O1xuICAgIGF3YWl0IGFkZFN0dWRlbnRMZXNzb25Qcm9ibGVtRmxhZ0FwaShwb3N0Qm9keSk7XG4gIH07XG5cbiAgcmVjb3JkVmlkZW9XYXRjaGVkVGltZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZpZGVvV2F0Y2hlZFRpbWU6IHRoaXMuc3RhdGUudmlkZW9XYXRjaGVkVGltZSArIDEsXG4gICAgfSk7XG4gIH1cblxuICBvbkhhbmRsZVdhdGNoZWRWaWRlbyA9IChzdGF0dXMpID0+IHtcbiAgICBpZiAoc3RhdHVzID09PSAnU1RBUlRFRCcpIHtcbiAgICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh0aGlzLnJlY29yZFZpZGVvV2F0Y2hlZFRpbWUsIDEwMDApO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHdhdGNoZWRWaWRlbzogdHJ1ZSxcbiAgICAgICAgaW50ZXJ2YWxJZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3RhdGUuaW50ZXJ2YWxJZCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZVF1ZXN0aW9uTW9kYWwgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBvbkNsb3NlUXVlc3Rpb25Nb2RhbCwgcXVlc3Rpb246IHsgcHJvYmxlbTogeyBpZCB9IH0sIGFjdGl2ZUxlc3NvbjogeyBpZDogbGVzc29uSWQgfSB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAodGhpcy5zdGF0ZS53YXRjaGVkVmlkZW8pIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdGF0ZS5pbnRlcnZhbElkKTtcbiAgICAgIGNvbnN0IHsgdmlkZW9XYXRjaGVkVGltZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIGNvbnN0IHBvc3RCb2R5ID0ge1xuICAgICAgICBwcm9ibGVtX2lkOiBpZCxcbiAgICAgICAgc3R1ZGVudF9sZXNzb25faWQ6IGxlc3NvbklkLFxuICAgICAgICB3YXRjaGVkX3NlY29uZHM6IHZpZGVvV2F0Y2hlZFRpbWUsXG4gICAgICB9O1xuICAgICAgYXdhaXQgYWRkVmlkZW9XYXRjaGVkVGltZShwb3N0Qm9keSk7XG4gICAgfVxuICAgIG9uQ2xvc2VRdWVzdGlvbk1vZGFsKCk7XG4gIH1cblxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG9wZW4sIHF1ZXN0aW9uOiB7IHByb2JsZW06IHsgcmVmZXJlbmNlX251bWJlciwgdmlkZW8gfSB9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgdmlkZW9XYXRjaGVkVGltZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgPFBvcnRhbCBzZWxlY3Rvcj1cIiNtb2RhbFwiPlxuICAgICAgICB7b3BlbiAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvdmVybGF5XCI+XG4gICAgICAgICAgICA8Q2xpY2tPZmZDb21wb25lbnRXcmFwcGVyIG9uT3V0ZXJDbGljaz17dGhpcy5vbkNsb3NlUXVlc3Rpb25Nb2RhbH0+XG4gICAgICAgICAgICAgIDxkaXYgaWQ9XCJtb2RhbF92aWRlbzAwMVwiIGNsYXNzTmFtZT1cIm1vZGFsIG1vZGFsLWFuc3dlci1zaW5nbGVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLWhlYWRlciByb3cgbWItMFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wgczEwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN1YnRpdGxlXCI+UmVhZGluZzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGl0bGVcIj5Qcm9ibGVtIHtyZWZlcmVuY2VfbnVtYmVyfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wgczIgcmlnaHQtYWxpZ25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiMhXCIgY2xhc3NOYW1lPVwiY2xvc2UgbW9kYWwtY2xvc2VcIiBvbkNsaWNrPXt0aGlzLm9uQ2xvc2VRdWVzdGlvbk1vZGFsfT5cbiAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJpY29uLWNsb3NlLXRoaW5cIj48L2k+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAge3ZpZGVvICYmXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wYW5lbFwiPiAgPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZW1iZWQtcmVzcG9uc2l2ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFZpZGVvUGxheWVyIHVybD17dmlkZW8gPyB2aWRlby51cmwgOiAnJ30gb25IYW5kbGVXYXRjaGVkVmlkZW89e3RoaXMub25IYW5kbGVXYXRjaGVkVmlkZW99IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFuZWwtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nIGNsYXNzTmFtZT1cInN1YnRpdGxlXCI+UmV2aWV3IFdpdGggU3R1ZGVudDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGFjdGlvbj1cIiNcIiBjbGFzc05hbWU9XCJhbnN3ZXItZm9ybSByZXZpZXctZm9ybVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIndpdGgtZ2FwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInJldmlld19yYWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuc3RhdHVzID09PSBcIlVOX0ZMQUdHRURcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZSA9PiB0aGlzLm9uSGFuZGxlUXVlc3Rpb25GbGFnU3RhdHVzKGUsIFwiVU5fRkxBR0dFRFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5Ob3BlLiBHb3QgaXQuPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2l0aC1nYXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwicmV2aWV3X3JhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5zdGF0dXMgPT09IFwiRkxBR0dFRFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtlID0+IHRoaXMub25IYW5kbGVRdWVzdGlvbkZsYWdTdGF0dXMoZSwgXCJGTEFHR0VEXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJpY29uLWZsYWcgcmVkLXRleHQgdGV4dC1kYXJrZW4tM1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZsYWcgZm9yIFJldmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwid2l0aC1nYXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwicmV2aWV3X3JhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5zdGF0dXMgPT09IFwiUkVWSUVXRURcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZSA9PiB0aGlzLm9uSGFuZGxlUXVlc3Rpb25GbGFnU3RhdHVzKGUsIFwiUkVWSUVXRURcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImljb24tZmxhZyBncmF5LXRleHQgdGV4dC1kYXJrZW4tM1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hcmsgUmV2aWV3ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJwYW5lbC1ibG9ja1wiIHN0eWxlPXt7IHdpZHRoOiAnNjAlJywgZmxvYXQ6ICdsZWZ0JyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwiaW5mb3JtZXJzLWxpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJpbmZvcm1lci1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5mb3JtZXItYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIxMCVcIiwgYmFja2dyb3VuZENvbG9yOiBcIiNlNWU1ZTVcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGIgY2xhc3NOYW1lPVwiaW5mb3JtZXItY2lyY2xlXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcIiNlNWU1ZTVcIiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YiBjbGFzc05hbWU9XCJpbmZvcm1lci12YWx1ZVwiPjEwJTwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwiaW5mb3JtZXItYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImluZm9ybWVyLWJveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IFwiMTYlXCIsIGJhY2tncm91bmRDb2xvcjogXCIjZGIxZDQxXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmZvcm1lci1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBcIiNkYjFkNDFcIiwgY29sb3I6IFwiI2ZmZlwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxiIGNsYXNzTmFtZT1cImluZm9ybWVyLXZhbHVlXCI+MTYlPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJpbmZvcm1lci1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5mb3JtZXItYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIzNyVcIiwgYmFja2dyb3VuZENvbG9yOiBcIiNkM2VmZGVcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImluZm9ybWVyLWNpcmNsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzMyOTU1Y1wiLCBjb2xvcjogXCIjZmZmXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGIgY2xhc3NOYW1lPVwiaW5mb3JtZXItdmFsdWVcIj4zNyU8L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImluZm9ybWVyLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbmZvcm1lci1ib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBcIjglXCIsIGJhY2tncm91bmRDb2xvcjogXCIjZTVlNWU1XCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiIGNsYXNzTmFtZT1cImluZm9ybWVyLWNpcmNsZVwiIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogXCIjZTVlNWU1XCIgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGIgY2xhc3NOYW1lPVwiaW5mb3JtZXItdmFsdWVcIj44JTwvYj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbCBwYW5lbC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hhcnQtYmxvY2sgY2hhcnQtYmxvY2stdGVzdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJhZGlhbEJhclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdmdXaWR0aD17MTUwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdmdIZWlnaHQ9ezE1MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezEwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZT17dmlkZW8gPyB2aWRlby5kdXJhdGlvbiA6IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZT17MjB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yPVwiIzAwQkJGN1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGFydC10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInZhbHVlXCIgc3R5bGU9e3sgZm9udFNpemU6ICczMnB4JywgY29sb3I6ICdyZ2IoMCwgMTg3LCAyNDcpJyB9fT57Q29udmVydFNlY29uZHNUb01pbnV0ZXNTZWNvbmRzKHZpZGVvV2F0Y2hlZFRpbWUpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGl0bGVcIiBzdHlsZT17eyBmb250U2l6ZTogJzE0cHgnIH19Pm91dCBvZjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZGVzY3JpcHRpb25cIiBzdHlsZT17eyBmb250U2l6ZTogJzMycHgnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtDb252ZXJ0U2Vjb25kc1RvTWludXRlc1NlY29uZHModmlkZW8gPyB2aWRlby5kdXJhdGlvbiA6IDApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wYW5lbFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzc05hbWU9XCJzdWJ0aXRsZVwiPkVkaXQgU3R1ZGVudCdzIEFuc3dlcjwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgIDxFZGl0UHJvYmxlbVJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlTGVzc29uPXt0aGlzLnByb3BzLmFjdGl2ZUxlc3Nvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uPXt0aGlzLnByb3BzLnF1ZXN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJvYmxlbUxpc3Q9e3RoaXMucHJvcHMudXBkYXRlUHJvYmxlbUxpc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ibGVtVHlwZT17dGhpcy5wcm9wcy5wcm9ibGVtVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2xpY2tPZmZDb21wb25lbnRXcmFwcGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8c3R5bGUganN4PlxuICAgICAgICAgIHtgXG4gICAgICAgICAgICAub3ZlcmxheSB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpO1xuICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgICAgICBib3R0b206IDA7XG4gICAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICAgIHotaW5kZXg6IDE5OTk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAjbW9kYWxfdmlkZW8wMDEge1xuICAgICAgICAgICAgICB6LWluZGV4OiAyMDAzO1xuICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlWCgxKSBzY2FsZVkoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubW9kYWwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgICAgdG9wOiAxMCU7XG4gICAgICAgICAgICAgIGxlZnQ6IDEwJTtcbiAgICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5tb2RhbC1hbnN3ZXItc2luZ2xlIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgdG9wOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgIGxlZnQ6IGF1dG87XG4gICAgICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICAgICAgICBtYXgtd2VpZ2h0OiBub25lO1xuICAgICAgICAgICAgICBtYXJnaW46IDAgMCAwIGF1dG87XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAxMDAlIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubW9kYWwtZm9vdGVyIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubW9kYWwtaGVhZGVyIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2VjNjkzZFxuICAgICAgICAgICAgICAgIGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2VjNjkzZCAwJSwgIzY0OWFhYiA2MSUsICMzMGFkZDYgODclLCAjMThiNWU5IDEwMCUpO1xuICAgICAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICAgICAgcGFkZGluZzogN3B4IDEwcHggNXB4O1xuICAgICAgICAgICAgICBtaW4taGVpZ2h0OiA1MHB4O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICA8L1BvcnRhbD5cbiAgICApO1xuICB9XG59XG5cblF1ZXN0aW9uTW9kYWwucHJvcFR5cGVzID0ge1xuICBvcGVuOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBvbkNsb3NlUXVlc3Rpb25Nb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgcXVlc3Rpb246IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbn07XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3Rvcih7XG4gIGFjdGl2ZUxlc3NvbjogbWFrZVNlbGVjdEFjdGl2ZUxlc3NvbigpLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBudWxsKShRdWVzdGlvbk1vZGFsKTtcbiJdfQ== */\\n/*@ sourceURL=/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/LessonDetailAnswerSheet/components/QuestionModal/index.js */\"));\n  }\n\n}\n\nQuestionModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onCloseQuestionModal: PropTypes.func.isRequired,\n  question: PropTypes.object.isRequired\n};\nconst mapStateToProps = createStructuredSelector({\n  activeLesson: makeSelectActiveLesson()\n});\nexport default connect(mapStateToProps, null)(QuestionModal);","map":{"version":3,"sources":["/Users/wolf/Documents/clearchoice/admin/feature-view-updated-course/clear-choice-admin/components/Student/LessonDetailAnswerSheet/components/QuestionModal/index.js"],"names":["React","connect","createStructuredSelector","PropTypes","Portal","ClickOffComponentWrapper","addStudentLessonProblemFlagApi","addVideoWatchedTime","makeSelectActiveLesson","RadialBar","ConvertSecondsToMinutesSeconds","VideoPlayer","EditProblemRow","QuestionModal","Component","constructor","props","nextProps","question","id","video_watched_seconds","originalTestProblemId","state","flag_status","setState","status","videoWatchedTime","_e","activeLesson","lessonId","onChangeFlagState","problem","problemId","postBody","problem_id","student_lesson_id","intervalId","setInterval","recordVideoWatchedTime","watchedVideo","clearInterval","onCloseQuestionModal","watched_seconds","render","open","reference_number","video","url","onHandleWatchedVideo","e","onHandleQuestionFlagStatus","duration","fontSize","color","updateProblemList","problemType","propTypes","bool","isRequired","func","object","mapStateToProps"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,OAAOC,wBAAP,MAAqC,6CAArC;AACA,SAASC,8BAAT,EAAyCC,mBAAzC,QAAoE,oBAApE;AACA,SAASC,sBAAT,QAAuC,0BAAvC;AACA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,SAASC,8BAAT,QAA+C,kDAA/C;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;;AACA,MAAMC,aAAN,SAA4Bb,KAAK,CAACc,SAAlC,CAA4C;AAC1CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,uDAWUC,SAAD,IAAe;AACzC,YAAM;AAAEC,QAAAA,QAAQ,EAAE;AAAEC,UAAAA,EAAF;AAAMC,UAAAA;AAAN;AAAZ,UAA8CH,SAApD;AACA,YAAM;AAAEI,QAAAA;AAAF,UAA4B,KAAKC,KAAvC;;AACA,UAAIH,EAAE,KAAKE,qBAAP,IAAgC,KAAKL,KAAL,CAAWE,QAAX,CAAoBK,WAAxD,EAAqE;AACnE,cAAM;AAAEL,UAAAA,QAAQ,EAAE;AAAEK,YAAAA;AAAF;AAAZ,YAAgC,KAAKP,KAA3C;AACA,aAAKQ,QAAL,CAAc;AACZC,UAAAA,MAAM,EAAEF,WADI;AAEZF,UAAAA,qBAAqB,EAAEF;AAFX,SAAd;AAID;;AACD,UAAIC,qBAAJ,EAA2B;AACzB,aAAKI,QAAL,CAAc;AACZE,UAAAA,gBAAgB,EAAEN;AADN,SAAd;AAGD;AACF,KA1BkB;;AAAA,wDA4BU,OAAOO,EAAP,EAAWF,MAAX,KAAsB;AACjD,YAAM;AACJG,QAAAA,YAAY,EAAE;AAAET,UAAAA,EAAE,EAAEU;AAAN,SADV;AAEJC,QAAAA;AAFI,UAGF,KAAKd,KAHT;AAIA,WAAKQ,QAAL,CAAc;AACZC,QAAAA;AADY,OAAd;AAGAK,MAAAA,iBAAiB,CAACL,MAAD,CAAjB;AACA,YAAM;AAAEP,QAAAA,QAAQ,EAAE;AAAEa,UAAAA,OAAO,EAAE;AAAEZ,YAAAA,EAAE,EAAEa;AAAN;AAAX;AAAZ,UAA+C,KAAKhB,KAA1D;AACA,YAAMiB,QAAQ,GAAG;AAAEC,QAAAA,UAAU,EAAEF,SAAd;AAAyBG,QAAAA,iBAAiB,EAAEN,QAA5C;AAAsDN,QAAAA,WAAW,EAAEE;AAAnE,OAAjB;AACA,YAAMnB,8BAA8B,CAAC2B,QAAD,CAApC;AACD,KAxCkB;;AAAA,oDA0CM,MAAM;AAC7B,WAAKT,QAAL,CAAc;AACZE,QAAAA,gBAAgB,EAAE,KAAKJ,KAAL,CAAWI,gBAAX,GAA8B;AADpC,OAAd;AAGD,KA9CkB;;AAAA,kDAgDKD,MAAD,IAAY;AACjC,UAAIA,MAAM,KAAK,SAAf,EAA0B;AACxB,cAAMW,UAAU,GAAGC,WAAW,CAAC,KAAKC,sBAAN,EAA8B,IAA9B,CAA9B;AACA,aAAKd,QAAL,CAAc;AACZe,UAAAA,YAAY,EAAE,IADF;AAEZH,UAAAA;AAFY,SAAd;AAID,OAND,MAMO;AACLI,QAAAA,aAAa,CAAC,KAAKlB,KAAL,CAAWc,UAAZ,CAAb;AACD;AACF,KA1DkB;;AAAA,kDA4DI,YAAY;AACjC,YAAM;AAAEK,QAAAA,oBAAF;AAAwBvB,QAAAA,QAAQ,EAAE;AAAEa,UAAAA,OAAO,EAAE;AAAEZ,YAAAA;AAAF;AAAX,SAAlC;AAAuDS,QAAAA,YAAY,EAAE;AAAET,UAAAA,EAAE,EAAEU;AAAN;AAArE,UAA0F,KAAKb,KAArG;;AACA,UAAI,KAAKM,KAAL,CAAWiB,YAAf,EAA6B;AAC3BC,QAAAA,aAAa,CAAC,KAAKlB,KAAL,CAAWc,UAAZ,CAAb;AACA,cAAM;AAAEV,UAAAA;AAAF,YAAuB,KAAKJ,KAAlC;AACA,cAAMW,QAAQ,GAAG;AACfC,UAAAA,UAAU,EAAEf,EADG;AAEfgB,UAAAA,iBAAiB,EAAEN,QAFJ;AAGfa,UAAAA,eAAe,EAAEhB;AAHF,SAAjB;AAKA,cAAMnB,mBAAmB,CAAC0B,QAAD,CAAzB;AACD;;AACDQ,MAAAA,oBAAoB;AACrB,KAzEkB;;AAEjB,SAAKnB,KAAL,GAAa;AACXG,MAAAA,MAAM,EAAE,YADG;AAEXJ,MAAAA,qBAAqB,EAAE,EAFZ;AAGXK,MAAAA,gBAAgB,EAAE,CAHP;AAIXU,MAAAA,UAAU,EAAE,IAJD;AAKXG,MAAAA,YAAY,EAAE;AALH,KAAb;AAOD;;AAmEDI,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,IAAF;AAAQ1B,MAAAA,QAAQ,EAAE;AAAEa,QAAAA,OAAO,EAAE;AAAEc,UAAAA,gBAAF;AAAoBC,UAAAA;AAApB;AAAX;AAAlB,QAA+D,KAAK9B,KAA1E;AACA,UAAM;AAAEU,MAAAA;AAAF,QAAuB,KAAKJ,KAAlC;AACA,WACE,MAAC,MAAD;AAAQ,MAAA,QAAQ,EAAC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGsB,IAAI,IACH;AAAA,0CAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,wBAAD;AAA0B,MAAA,YAAY,EAAE,KAAKH,oBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAA,0CAAmC,2BAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAe,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAgB,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA,0CAAgB,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAiCI,gBAAjC,CAFF,CADF,EAKE;AAAA,0CAAe,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,IAAI,EAAC,IAAR;AAA2C,MAAA,OAAO,EAAE,KAAKJ,oBAAzD;AAAA,0CAAuB,mBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAa,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CALF,CADF,EAYE;AAAA,0CAAe,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGK,KAAK,IACJ;AAAA,0CAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA8B;AAAA,0CAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAC5B;AAAA,0CAAe,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,WAAD;AAAa,MAAA,GAAG,EAAEA,KAAK,GAAGA,KAAK,CAACC,GAAT,GAAe,EAAtC;AAA0C,MAAA,oBAAoB,EAAE,KAAKC,oBAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAD4B,CAA9B,CAFJ,EAQE;AAAA,0CAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAkB,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEE;AAAM,MAAA,MAAM,EAAC,GAAb;AAAA,0CAA2B,yBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWG,MAAX,KAAsB,YAJjC;AAKE,MAAA,OAAO,EAAEwB,CAAC,IAAI,KAAKC,0BAAL,CAAgCD,CAAhC,EAAmC,YAAnC,CALhB;AAAA,0CACY,UADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBARF,CADF,CADF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,OAAO,EAAE,KAAK3B,KAAL,CAAWG,MAAX,KAAsB,SAJjC;AAKE,MAAA,OAAO,EAAEwB,CAAC,IAAI,KAAKC,0BAAL,CAAgCD,CAAhC,EAAmC,SAAnC,CALhB;AAAA,0CACY,UADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAa,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,oBARF,CADF,CAbF,EA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAEE,MAAA,IAAI,EAAC,cAFP;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,OAAO,EAAE,KAAK3B,KAAL,CAAWG,MAAX,KAAsB,UAJjC;AAKE,MAAA,OAAO,EAAEwB,CAAC,IAAI,KAAKC,0BAAL,CAAgCD,CAAhC,EAAmC,UAAnC,CALhB;AAAA,0CACY,UADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAa,mCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,kBARF,CADF,CA5BF,CADF,CAFF,CADF,EAwGE;AAAA,0CAAe,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAe,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,SAAD;AACE,MAAA,QAAQ,EAAE,GADZ;AAEE,MAAA,SAAS,EAAE,GAFb;AAGE,MAAA,WAAW,EAAE,EAHf;AAIE,MAAA,QAAQ,EAAEH,KAAK,GAAGA,KAAK,CAACK,QAAT,GAAoB,CAJrC;AAKE,MAAA,YAAY,EAAE,EALhB;AAME,MAAA,WAAW,EAAC,SANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EASE;AAAA,0CAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAwB,MAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAE,MAAZ;AAAoBC,QAAAA,KAAK,EAAE;AAA3B,OAA/B;AAAA,0CAAgB,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiF3C,8BAA8B,CAACgB,gBAAD,CAA/G,CADF,EAEE;AAAwB,MAAA,KAAK,EAAE;AAAE0B,QAAAA,QAAQ,EAAE;AAAZ,OAA/B;AAAA,0CAAgB,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGE;AAA8B,MAAA,KAAK,EAAE;AAAEA,QAAAA,QAAQ,EAAE;AAAZ,OAArC;AAAA,0CAAgB,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG1C,8BAA8B,CAACoC,KAAK,GAAGA,KAAK,CAACK,QAAT,GAAoB,CAA1B,CADjC,CAHF,CATF,CADF,CAxGF,CARF,EAoIE;AAAA,0CAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAe,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAkB,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,EAEE,MAAC,cAAD;AACE,MAAA,YAAY,EAAE,KAAKnC,KAAL,CAAWY,YAD3B;AAEE,MAAA,QAAQ,EAAE,KAAKZ,KAAL,CAAWE,QAFvB;AAGE,MAAA,iBAAiB,EAAE,KAAKF,KAAL,CAAWsC,iBAHhC;AAIE,MAAA,WAAW,EAAE,KAAKtC,KAAL,CAAWuC,WAJ1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,CApIF,CAZF,CADF,CADF,CAFJ;AAAA;AAAA;AAAA,6ymBADF;AA0ND;;AA1SyC;;AA6S5C1C,aAAa,CAAC2C,SAAd,GAA0B;AACxBZ,EAAAA,IAAI,EAAEzC,SAAS,CAACsD,IAAV,CAAeC,UADG;AAExBjB,EAAAA,oBAAoB,EAAEtC,SAAS,CAACwD,IAAV,CAAeD,UAFb;AAGxBxC,EAAAA,QAAQ,EAAEf,SAAS,CAACyD,MAAV,CAAiBF;AAHH,CAA1B;AAMA,MAAMG,eAAe,GAAG3D,wBAAwB,CAAC;AAC/C0B,EAAAA,YAAY,EAAEpB,sBAAsB;AADW,CAAD,CAAhD;AAIA,eAAeP,OAAO,CAAC4D,eAAD,EAAkB,IAAlB,CAAP,CAA+BhD,aAA/B,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"../../../../common/Portal\";\nimport ClickOffComponentWrapper from \"../../../../common/ClickOffComponentWrapper\";\nimport { addStudentLessonProblemFlagApi, addVideoWatchedTime } from \"../../../index/api\";\nimport { makeSelectActiveLesson } from \"../../../index/selectors\";\nimport RadialBar from \"../../../../common/RadialBar\";\nimport { ConvertSecondsToMinutesSeconds } from '../../../../utils/ConvertSecondsToMinutesSeconds';\nimport VideoPlayer from '../VideoPlayer';\nimport EditProblemRow from '../EditProblemRow';\nclass QuestionModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: 'UN_FLAGGED',\n      originalTestProblemId: '',\n      videoWatchedTime: 0,\n      intervalId: null,\n      watchedVideo: false,\n    };\n  }\n\n  componentWillReceiveProps = (nextProps) => {\n    const { question: { id, video_watched_seconds } } = nextProps;\n    const { originalTestProblemId } = this.state;\n    if (id !== originalTestProblemId && this.props.question.flag_status) {\n      const { question: { flag_status } } = this.props;\n      this.setState({\n        status: flag_status,\n        originalTestProblemId: id,\n      });\n    }\n    if (video_watched_seconds) {\n      this.setState({\n        videoWatchedTime: video_watched_seconds,\n      });\n    }\n  }\n\n  onHandleQuestionFlagStatus = async (_e, status) => {\n    const {\n      activeLesson: { id: lessonId },\n      onChangeFlagState,\n    } = this.props;\n    this.setState({\n      status,\n    });\n    onChangeFlagState(status);\n    const { question: { problem: { id: problemId } } } = this.props;\n    const postBody = { problem_id: problemId, student_lesson_id: lessonId, flag_status: status };\n    await addStudentLessonProblemFlagApi(postBody);\n  };\n\n  recordVideoWatchedTime = () => {\n    this.setState({\n      videoWatchedTime: this.state.videoWatchedTime + 1,\n    });\n  }\n\n  onHandleWatchedVideo = (status) => {\n    if (status === 'STARTED') {\n      const intervalId = setInterval(this.recordVideoWatchedTime, 1000);\n      this.setState({\n        watchedVideo: true,\n        intervalId,\n      });\n    } else {\n      clearInterval(this.state.intervalId);\n    }\n  }\n\n  onCloseQuestionModal = async () => {\n    const { onCloseQuestionModal, question: { problem: { id } }, activeLesson: { id: lessonId } } = this.props;\n    if (this.state.watchedVideo) {\n      clearInterval(this.state.intervalId);\n      const { videoWatchedTime } = this.state;\n      const postBody = {\n        problem_id: id,\n        student_lesson_id: lessonId,\n        watched_seconds: videoWatchedTime,\n      };\n      await addVideoWatchedTime(postBody);\n    }\n    onCloseQuestionModal();\n  }\n\n\n  render() {\n    const { open, question: { problem: { reference_number, video } } } = this.props;\n    const { videoWatchedTime } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <div className=\"overlay\">\n            <ClickOffComponentWrapper onOuterClick={this.onCloseQuestionModal}>\n              <div id=\"modal_video001\" className=\"modal modal-answer-single\">\n                <div className=\"modal-header row mb-0\">\n                  <div className=\"col s10\">\n                    <span className=\"subtitle\">Reading</span>\n                    <span className=\"title\">Problem {reference_number}</span>\n                  </div>\n                  <div className=\"col s2 right-align\">\n                    <a href=\"#!\" className=\"close modal-close\" onClick={this.onCloseQuestionModal}>\n                      <i className=\"icon-close-thin\"></i>\n                    </a>\n                  </div>\n                </div>\n                <div className=\"modal-content\">\n                  {video &&\n                    <div className=\"card-panel\">  <div className=\"panel-block\">\n                      <div className=\"embed-responsive\">\n                        <VideoPlayer url={video ? video.url : ''} onHandleWatchedVideo={this.onHandleWatchedVideo} />\n                      </div>\n                    </div></div>\n                  }\n                  <div className=\"card-panel\">\n                    <div className=\"panel-block\">\n                      <strong className=\"subtitle\">Review With Student</strong>\n                      <form action=\"#\" className=\"answer-form review-form\">\n                        <ul>\n                          <li>\n                            <label>\n                              <input\n                                className=\"with-gap\"\n                                name=\"review_radio\"\n                                type=\"radio\"\n                                checked={this.state.status === \"UN_FLAGGED\"}\n                                onClick={e => this.onHandleQuestionFlagStatus(e, \"UN_FLAGGED\")}\n                              />\n                              <span>Nope. Got it.</span>\n                            </label>\n                          </li>\n                          <li>\n                            <label>\n                              <input\n                                className=\"with-gap\"\n                                name=\"review_radio\"\n                                type=\"radio\"\n                                checked={this.state.status === \"FLAGGED\"}\n                                onClick={e => this.onHandleQuestionFlagStatus(e, \"FLAGGED\")}\n                              />\n                              <span>\n                                <i className=\"icon-flag red-text text-darken-3\" />\n                                Flag for Review\n                              </span>\n                            </label>\n                          </li>\n                          <li>\n                            <label>\n                              <input\n                                className=\"with-gap\"\n                                name=\"review_radio\"\n                                type=\"radio\"\n                                checked={this.state.status === \"REVIEWED\"}\n                                onClick={e => this.onHandleQuestionFlagStatus(e, \"REVIEWED\")}\n                              />\n                              <span>\n                                <i className=\"icon-flag gray-text text-darken-3\" />\n                                Mark Reviewed\n                              </span>\n                            </label>\n                          </li>\n                        </ul>\n                      </form>\n                    </div>\n                    {/* <div className=\"panel-block\" style={{ width: '60%', float: 'left' }}>\n                      <ul className=\"informers-list\">\n                        <li className=\"informer-block\">\n                          <div\n                            className=\"informer-box\"\n                            style={{ width: \"10%\", backgroundColor: \"#e5e5e5\" }}\n                          >\n                            <b className=\"informer-circle\" style={{ backgroundColor: \"#e5e5e5\" }}>\n                              A\n                            </b>\n                          </div>\n                          <b className=\"informer-value\">10%</b>\n                        </li>\n                        <li className=\"informer-block\">\n                          <div\n                            className=\"informer-box\"\n                            style={{ width: \"16%\", backgroundColor: \"#db1d41\" }}\n                          >\n                            <b\n                              className=\"informer-circle\"\n                              style={{ backgroundColor: \"#db1d41\", color: \"#fff\" }}\n                            >\n                              B\n                            </b>\n                          </div>\n                          <b className=\"informer-value\">16%</b>\n                        </li>\n                        <li className=\"informer-block\">\n                          <div\n                            className=\"informer-box\"\n                            style={{ width: \"37%\", backgroundColor: \"#d3efde\" }}\n                          >\n                            <b\n                              className=\"informer-circle\"\n                              style={{ backgroundColor: \"#32955c\", color: \"#fff\" }}\n                            >\n                              C\n                            </b>\n                          </div>\n                          <b className=\"informer-value\">37%</b>\n                        </li>\n                        <li className=\"informer-block\">\n                          <div\n                            className=\"informer-box\"\n                            style={{ width: \"8%\", backgroundColor: \"#e5e5e5\" }}\n                          >\n                            <b className=\"informer-circle\" style={{ backgroundColor: \"#e5e5e5\" }}>\n                              D\n                            </b>\n                          </div>\n                          <b className=\"informer-value\">8%</b>\n                        </li>\n                      </ul>\n                    </div> */}\n                    <div className=\"col panel-block\">\n                      <div className=\"chart-block chart-block-test\">\n                        <RadialBar\n                          svgWidth={150}\n                          svgHeight={150}\n                          strokeWidth={10}\n                          maxValue={video ? video.duration : 0}\n                          currentValue={20}\n                          strokeColor=\"#00BBF7\"\n                        />\n                        <div className=\"chart-text\">\n                          <span className=\"value\" style={{ fontSize: '32px', color: 'rgb(0, 187, 247)' }}>{ConvertSecondsToMinutesSeconds(videoWatchedTime)}</span>\n                          <span className=\"title\" style={{ fontSize: '14px' }}>out of</span>\n                          <span className=\"description\" style={{ fontSize: '32px' }}>\n                            {ConvertSecondsToMinutesSeconds(video ? video.duration : 0)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"card-panel\">\n                    <div className=\"panel-block\">\n                      <strong className=\"subtitle\">Edit Student's Answer</strong>\n                      <EditProblemRow\n                        activeLesson={this.props.activeLesson}\n                        question={this.props.question}\n                        updateProblemList={this.props.updateProblemList}\n                        problemType={this.props.problemType}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ClickOffComponentWrapper>\n          </div>\n        )}\n        <style jsx>\n          {`\n            .overlay {\n              position: fixed;\n              background-color: rgba(0, 0, 0, 0.7);\n              top: 0;\n              right: 0;\n              bottom: 0;\n              left: 0;\n              z-index: 1999;\n            }\n            #modal_video001 {\n              z-index: 2003;\n              opacity: 1;\n              transform: scaleX(1) scaleY(1);\n            }\n            .modal {\n              display: block;\n              background-color: white;\n              position: fixed;\n              top: 10%;\n              left: 10%;\n              box-shadow: none;\n            }\n            .modal-answer-single {\n              opacity: 1;\n              visibility: visible;\n              display: block !important;\n              top: 0 !important;\n              left: auto;\n              right: 0;\n              height: 100vh;\n              max-weight: none;\n              margin: 0 0 0 auto;\n              border-radius: 0;\n              width: 100%;\n              transform-origin: 100% 0;\n            }\n            .modal-footer {\n              background-color: white;\n            }\n            .modal-header {\n              background: #ec693d\n                linear-gradient(to right, #ec693d 0%, #649aab 61%, #30add6 87%, #18b5e9 100%);\n              color: #fff;\n              padding: 7px 10px 5px;\n              min-height: 50px;\n              display: flex;\n            }\n          `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nQuestionModal.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onCloseQuestionModal: PropTypes.func.isRequired,\n  question: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = createStructuredSelector({\n  activeLesson: makeSelectActiveLesson(),\n});\n\nexport default connect(mapStateToProps, null)(QuestionModal);\n"]},"metadata":{},"sourceType":"module"}