{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\n\n/* eslint-disable array-callback-return */\n\n/* eslint-disable consistent-return */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\nimport Portal from '../../../../Portal';\nimport FilterSection from './components/FilterSection';\nimport TableHeader from './components/TableHeader';\nimport sampleProblems from '../../../utils/sampleProblems';\nimport samplePassages from '../../../utils/samplePassages';\nimport { topicMap, workbookMap, subjectMap, difficultyMap, typeMap } from '../../../utils/worksheetFilterMap';\nimport { subjectAscending, subjectDescending } from '../../../../utils/sortFunctions';\n\nvar ProblemBank =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ProblemBank, _React$Component);\n\n  function ProblemBank(props) {\n    var _this;\n\n    _classCallCheck(this, ProblemBank);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProblemBank).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleAddProblemDropdown\", function () {\n      return _this.setState(function (_ref) {\n        var addProblemsDropdownOpen = _ref.addProblemsDropdownOpen;\n        return {\n          addProblemsDropdownOpen: !addProblemsDropdownOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeOpenSection\", function (openSection) {\n      return _this.setState({\n        openSection: openSection\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredTopicState\", function (topicFilter) {\n      return _this.setState({\n        topicFilter: topicFilter\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClearFilters\", function () {\n      return _this.setState({\n        subjectFilters: [],\n        difficultyFilters: [],\n        typeFilters: [],\n        workbookFilters: [],\n        topicFilter: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetAscendingSort\", function () {\n      return _this.setState({\n        sort: 'ascending'\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetDescendingSort\", function () {\n      return _this.setState({\n        sort: 'descending'\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortBySubject\", function (problemsOrPassages) {\n      var sort = _this.state.sort;\n\n      if (sort === 'ascending') {\n        return problemsOrPassages.sort(subjectAscending);\n      }\n\n      return problemsOrPassages.sort(subjectDescending);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterPassages\", function (passages, filterType, filter) {\n      switch (filterType) {\n        case 'difficulty':\n        case 'type':\n          return passages.reduce(function (finalArr, passage) {\n            passage.problems.map(function (problem) {\n              if (filter.indexOf(problem[filterType]) !== -1 && finalArr.indexOf(passage) === -1) {\n                finalArr.push(passage);\n              }\n            });\n            return finalArr;\n          }, []);\n\n        case 'topic':\n          return passages.reduce(function (finalArr, passage) {\n            passage.problems.map(function (problem) {\n              if (problem.topics.indexOf(filter) !== -1 && finalArr.indexOf(passage) === -1) {\n                finalArr.push(passage);\n              }\n            });\n            return finalArr;\n          }, []);\n\n        case 'workbook':\n          return passages.reduce(function (finalArr, passage) {\n            passage.problems.map(function (problem) {\n              if (filter.indexOf(workbookMap[problem.inWorkbook]) !== -1 && finalArr.indexOf(passage) === -1) {\n                finalArr.push(passage);\n              }\n            });\n            return finalArr;\n          }, []);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterProblemsOrPassages\", function (type) {\n      var _this$state = _this.state,\n          subjectFilters = _this$state.subjectFilters,\n          difficultyFilters = _this$state.difficultyFilters,\n          typeFilters = _this$state.typeFilters,\n          workbookFilters = _this$state.workbookFilters,\n          topicFilter = _this$state.topicFilter,\n          allProblems = _this$state.problems,\n          allPassages = _this$state.passages;\n      var problemsOrPassages;\n\n      if (type === 'problems') {\n        problemsOrPassages = allProblems;\n      } else {\n        problemsOrPassages = allPassages;\n      }\n\n      if (subjectFilters.length) {\n        problemsOrPassages = problemsOrPassages.filter(function (problemOrPassage) {\n          return subjectFilters.indexOf(problemOrPassage.subject) !== -1;\n        });\n      }\n\n      if (difficultyFilters.length) {\n        if (type === 'problems') {\n          problemsOrPassages = problemsOrPassages.filter(function (problem) {\n            return difficultyFilters.indexOf(problem.difficulty) !== -1;\n          });\n        } else {\n          problemsOrPassages = _this.onFilterPassages(problemsOrPassages, 'difficulty', difficultyFilters);\n        }\n      }\n\n      if (typeFilters.length) {\n        if (type === 'problems') {\n          problemsOrPassages = problemsOrPassages.filter(function (problem) {\n            return typeFilters.indexOf(problem.type) !== -1;\n          });\n        } else {\n          problemsOrPassages = _this.onFilterPassages(problemsOrPassages, 'type', typeFilters);\n        }\n      }\n\n      if (workbookFilters.length) {\n        if (type === 'problems') {\n          problemsOrPassages = problemsOrPassages.filter(function (problem) {\n            return workbookFilters.indexOf(workbookMap[problem.inWorkbook]) !== -1;\n          });\n        } else {\n          problemsOrPassages = _this.onFilterPassages(problemsOrPassages, 'workbook', workbookFilters);\n        }\n      }\n\n      if (topicFilter.length) {\n        if (type === 'problems') {\n          problemsOrPassages = problemsOrPassages.filter(function (problem) {\n            return problem.topics.indexOf(topicFilter) !== -1;\n          });\n        } else {\n          problemsOrPassages = _this.onFilterPassages(problemsOrPassages, 'topic', topicFilter);\n        }\n      }\n\n      return problemsOrPassages;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddSelectedProblems\", function (addTime) {\n      var _this$state2 = _this.state,\n          selectedProblems = _this$state2.selectedProblems,\n          selectedPassages = _this$state2.selectedPassages;\n      var addSelectedProblems = _this.props.addSelectedProblems;\n      addSelectedProblems(selectedProblems, selectedPassages, addTime);\n\n      _this.setState({\n        selectedPassages: [],\n        selectedProblems: [],\n        addProblemsDropdownOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableProblemsOrPassages\", function (type) {\n      var _this$state3 = _this.state,\n          subjectFilters = _this$state3.subjectFilters,\n          difficultyFilters = _this$state3.difficultyFilters,\n          typeFilters = _this$state3.typeFilters,\n          workbookFilters = _this$state3.workbookFilters,\n          topicFilter = _this$state3.topicFilter,\n          sort = _this$state3.sort,\n          allProblems = _this$state3.problems,\n          allPassages = _this$state3.passages;\n      var problemsOrPassages;\n\n      if (type === 'problems') {\n        problemsOrPassages = allProblems;\n      } else {\n        problemsOrPassages = allPassages;\n      }\n\n      if (topicFilter.length || subjectFilters.length || difficultyFilters.length || typeFilters.length || workbookFilters.length) {\n        problemsOrPassages = _this.onFilterProblemsOrPassages(type);\n      }\n\n      if (sort) {\n        return _this.onSortBySubject(problemsOrPassages);\n      }\n\n      return problemsOrPassages;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"determineSort\", function () {\n      var sort = _this.state.sort;\n\n      if (sort === '' || sort === 'descending') {\n        return _this.onSetAscendingSort();\n      }\n\n      return _this.onSetDescendingSort();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterClick\", function (filterType, filter) {\n      var _this$state4 = _this.state,\n          currentSubjectFilters = _this$state4.subjectFilters,\n          currentDifficultyFilters = _this$state4.difficultyFilters,\n          currentTypeFilters = _this$state4.typeFilters,\n          currentWorkbookFilters = _this$state4.workbookFilters;\n      var modifiedFilterCurrentState;\n      var modifiedFilterName;\n      var modifiedFilterUpdatedState;\n\n      switch (filterType) {\n        case 'subject':\n          modifiedFilterCurrentState = currentSubjectFilters;\n          modifiedFilterName = 'subjectFilters';\n          break;\n\n        case 'difficulty':\n          modifiedFilterCurrentState = currentDifficultyFilters;\n          modifiedFilterName = 'difficultyFilters';\n          break;\n\n        case 'type':\n          modifiedFilterCurrentState = currentTypeFilters;\n          modifiedFilterName = 'typeFilters';\n          break;\n\n        case 'workbook':\n          modifiedFilterCurrentState = currentWorkbookFilters;\n          modifiedFilterName = 'workbookFilters';\n          break;\n\n        default:\n          break;\n      }\n\n      if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $push: [filter]\n        });\n      } else {\n        var filterIndex = modifiedFilterCurrentState.indexOf(filter);\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, modifiedFilterName, modifiedFilterUpdatedState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleSelectAllProblemsOrPassages\", function () {\n      var _this$state5 = _this.state,\n          type = _this$state5.openSection,\n          problems = _this$state5.problems,\n          passages = _this$state5.passages,\n          currentSelectedProblems = _this$state5.selectedProblems,\n          currentSelectedPassages = _this$state5.selectedPassages;\n      var clickedTypeCurrentState;\n      var clickedTypeName;\n      var clickedAllOfType;\n\n      if (type === 'problems') {\n        clickedTypeCurrentState = currentSelectedProblems;\n        clickedTypeName = 'selectedProblems';\n        clickedAllOfType = problems;\n      } else {\n        clickedTypeCurrentState = currentSelectedPassages;\n        clickedTypeName = 'selectedPassages';\n        clickedAllOfType = passages;\n      }\n\n      if (clickedTypeCurrentState.length === 0) {\n        _this.setState(_defineProperty({}, clickedTypeName, clickedAllOfType));\n      } else {\n        _this.setState(_defineProperty({}, clickedTypeName, []));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleProblemOrPassageClick\", function (type, value) {\n      var _this$state6 = _this.state,\n          currentSelectedProblems = _this$state6.selectedProblems,\n          currentSelectedPassages = _this$state6.selectedPassages;\n      var clickedTypeCurrentState;\n      var clickedTypeName;\n\n      if (type === 'problem') {\n        clickedTypeCurrentState = currentSelectedProblems;\n        clickedTypeName = 'selectedProblems';\n      } else {\n        clickedTypeCurrentState = currentSelectedPassages;\n        clickedTypeName = 'selectedPassages';\n      }\n\n      var clickedTypeUpdatedState;\n\n      if (clickedTypeCurrentState.map(function (selectedElement) {\n        return selectedElement.id;\n      }).indexOf(value.id) === -1) {\n        clickedTypeUpdatedState = update(clickedTypeCurrentState, {\n          $push: [value]\n        });\n      } else {\n        var selectedIndex = clickedTypeCurrentState.map(function (selectedElement) {\n          return selectedElement.id;\n        }).indexOf(value.id);\n        clickedTypeUpdatedState = update(clickedTypeCurrentState, {\n          $splice: [[selectedIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, clickedTypeName, clickedTypeUpdatedState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapProblems\", function () {\n      return _this.getMappableProblemsOrPassages('problems').map(function (problem) {\n        var selectedProblems = _this.state.selectedProblems;\n        var selected = selectedProblems.map(function (selectedProblem) {\n          return selectedProblem.id;\n        }).indexOf(problem.id) !== -1;\n        return React.createElement(\"div\", {\n          className: selected ? \"card list-table-row list-row-added\" : \"card list-table-row\"\n        }, React.createElement(\"div\", {\n          className: \"list-table-cell checkbox-cell\"\n        }, React.createElement(\"label\", null, React.createElement(\"input\", {\n          type: \"checkbox\",\n          className: \"filled-in\",\n          name: \"check_01\",\n          checked: selectedProblems.map(function (selectedProblem) {\n            return selectedProblem.id;\n          }).indexOf(problem.id) !== -1,\n          onChange: function onChange() {\n            return _this.handleProblemOrPassageClick('problem', problem);\n          }\n        }), React.createElement(\"span\", null, \"\\xA0\"))), React.createElement(\"div\", {\n          className: \"list-table-cell subject-cell\"\n        }, React.createElement(\"span\", null, subjectMap[problem.subject])), React.createElement(\"div\", {\n          className: \"list-table-cell info-cell\"\n        }, React.createElement(\"span\", null, difficultyMap[problem.difficulty])), React.createElement(\"div\", {\n          className: \"list-table-cell type-cell\"\n        }, React.createElement(\"span\", null, typeMap[problem.type])), React.createElement(\"div\", {\n          className: \"list-table-cell in-cell\"\n        }, problem.inWorkbook ? 'Yes' : 'No'), React.createElement(\"div\", {\n          className: \"list-table-cell topic-cell\"\n        }, problem.topics.map(function (topic) {\n          return React.createElement(\"span\", {\n            className: \"chip\",\n            id: topic\n          }, topicMap[topic]);\n        })), React.createElement(\"div\", {\n          className: \"list-table-cell view-cell\"\n        }, React.createElement(\"a\", {\n          href: \"#\"\n        }, React.createElement(\"i\", {\n          className: \"icon-eye\"\n        }))), React.createElement(\"div\", {\n          className: \"list-table-cell drop-cell\"\n        }, React.createElement(\"a\", {\n          href: \"#\"\n        }, React.createElement(\"i\", {\n          className: \"icon-plus-circle\"\n        }))));\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapPassages\", function () {\n      return _this.getMappableProblemsOrPassages('passages').map(function (passage) {\n        var selectedPassages = _this.state.selectedPassages;\n        var selected = selectedPassages.map(function (selectedPassage) {\n          return selectedPassage.id;\n        }).indexOf(passage.id) !== -1;\n        return React.createElement(\"div\", {\n          className: \"list-view-section\"\n        }, React.createElement(\"div\", {\n          className: selected ? \"list-table detail-table list-table-added\" : \"list-table detail-table\"\n        }, React.createElement(TableHeader, {\n          sortBySubject: _this.determineSort\n        }), React.createElement(\"div\", {\n          className: \"list-table-body\"\n        }, React.createElement(\"div\", {\n          className: \"combined-holder\"\n        }, React.createElement(\"div\", {\n          className: \"combined-header\"\n        }, React.createElement(\"div\", {\n          className: \"list-table-row\"\n        }, React.createElement(\"div\", {\n          className: \"list-table-cell checkbox-cell\"\n        }, React.createElement(\"div\", {\n          className: \"checkbox-block\"\n        }, React.createElement(\"label\", null, React.createElement(\"input\", {\n          type: \"checkbox\",\n          className: \"filled-in\",\n          checked: selectedPassages.map(function (selectedPassage) {\n            return selectedPassage.id;\n          }).indexOf(passage.id) !== -1,\n          onChange: function onChange() {\n            return _this.handleProblemOrPassageClick('passage', passage);\n          }\n        }), React.createElement(\"span\", null, \"\\xA0\")))), React.createElement(\"div\", {\n          className: \"list-table-cell subject-cell\"\n        }, React.createElement(\"div\", {\n          className: \"filter-name\"\n        }, subjectMap[passage.subject])), React.createElement(\"div\", {\n          className: \"list-table-cell combined-title-cell\"\n        }, React.createElement(\"div\", {\n          className: \"combined-title\"\n        }, passage.title)), React.createElement(\"div\", {\n          className: \"list-table-cell view-cell\"\n        }, React.createElement(\"a\", {\n          href: \"#\"\n        }, React.createElement(\"i\", {\n          className: \"custom-icon-triangle-right\"\n        }))), React.createElement(\"div\", {\n          className: \"list-table-cell drop-cell\"\n        }, React.createElement(\"a\", {\n          href: \"#\"\n        }, React.createElement(\"i\", {\n          className: \"icon-plus-circle\"\n        }))))), React.createElement(\"div\", {\n          className: \"collection\"\n        }, passage.problems.map(function (problem) {\n          return React.createElement(\"div\", {\n            className: \"collection-item list-table-row\",\n            id: problem.id\n          }, React.createElement(\"div\", {\n            className: \"list-table-cell checkbox-cell\"\n          }, React.createElement(\"span\", null, \"\\xA0\")), React.createElement(\"div\", {\n            className: \"list-table-cell subject-cell\"\n          }, React.createElement(\"span\", null, subjectMap[problem.subject])), React.createElement(\"div\", {\n            className: \"list-table-cell info-cell\"\n          }, React.createElement(\"span\", null, difficultyMap[problem.difficulty])), React.createElement(\"div\", {\n            className: \"list-table-cell type-cell\"\n          }, React.createElement(\"span\", null, typeMap[problem.type])), React.createElement(\"div\", {\n            className: \"list-table-cell in-cell\"\n          }, problem.inWorkbook ? 'Yes' : 'No'), React.createElement(\"div\", {\n            className: \"list-table-cell topic-cell\"\n          }, problem.topics.map(function (topic) {\n            return React.createElement(\"span\", {\n              className: \"chip\",\n              id: topic\n            }, topicMap[topic]);\n          })), React.createElement(\"div\", {\n            className: \"list-table-cell view-cell\"\n          }, React.createElement(\"a\", {\n            href: \"#\"\n          }, React.createElement(\"i\", {\n            className: \"icon-eye\"\n          }))), React.createElement(\"div\", {\n            className: \"list-table-cell drop-cell\"\n          }, React.createElement(\"span\", null, \"\\xA0\")));\n        }))))));\n      });\n    });\n\n    _this.state = {\n      addProblemsDropdownOpen: false,\n      openSection: 'problems',\n      topicFilter: '',\n      subjectFilters: [],\n      difficultyFilters: [],\n      typeFilters: [],\n      workbookFilters: [],\n      sort: '',\n      selectedProblems: [],\n      selectedPassages: [],\n      problems: sampleProblems,\n      passages: samplePassages\n    };\n    return _this;\n  }\n\n  _createClass(ProblemBank, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          open = _this$props.open,\n          onClose = _this$props.onClose;\n      var _this$state7 = this.state,\n          openSection = _this$state7.openSection,\n          subjectFilters = _this$state7.subjectFilters,\n          difficultyFilters = _this$state7.difficultyFilters,\n          typeFilters = _this$state7.typeFilters,\n          workbookFilters = _this$state7.workbookFilters,\n          addProblemsDropdownOpen = _this$state7.addProblemsDropdownOpen;\n      return React.createElement(Portal, {\n        selector: \"#modal\"\n      }, open && React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"wrapper\"\n      }, React.createElement(\"div\", {\n        id: \"modal_add_problem\",\n        style: {\n          zIndex: '1003'\n        },\n        className: \"jsx-837324748\" + \" \" + \"modal-page modal modal-custom\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"card-modal grey lighten-3\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"header-modal-box card-panel light-blue lighten-1 white-text\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"header-flex-row row mb-0\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"col s12 m4 l5\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"header-holder\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"header-col\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"icon-col\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-837324748\" + \" \" + \"icon-search\"\n      }))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"header-col\"\n      }, React.createElement(\"nav\", {\n        className: \"jsx-837324748\" + \" \" + \"breadcrumb-header\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"nav-wrapper \"\n      }, React.createElement(\"a\", {\n        href: \"#!\",\n        className: \"jsx-837324748\" + \" \" + \"breadcrumb modal-close\"\n      }, \"< Custom Worksheet\"))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"card-panel-text\"\n      }, React.createElement(\"h1\", {\n        className: \"jsx-837324748\" + \" \" + \"text-large\"\n      }, \"Problem Bank\"))))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"card-panel-description col s8 m3 l2\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"card-panel-text\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"col-row\"\n      }, React.createElement(\"span\", {\n        className: \"jsx-837324748\" + \" \" + \"value\"\n      }, \"24\"), React.createElement(\"span\", {\n        className: \"jsx-837324748\" + \" \" + \"value-text\"\n      }, \"worksheet \", React.createElement(\"br\", {\n        className: \"jsx-837324748\"\n      }), \"problems\")))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"col s2 m1 right-align position-mobile-right\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"close-block\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: onClose,\n        className: \"jsx-837324748\" + \" \" + \"modal-close close\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-837324748\" + \" \" + \"icon-close-thin\"\n      }))))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"tabs-switcher-holder card-panel-row\"\n      }, React.createElement(\"ul\", {\n        className: \"jsx-837324748\" + \" \" + \"tabs\"\n      }, React.createElement(\"li\", {\n        style: {\n          borderBottom: openSection === 'problems' ? '2px solid white' : ''\n        },\n        className: \"jsx-837324748\" + \" \" + \"tab col s3\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onChangeOpenSection('problems');\n        },\n        className: \"jsx-837324748\" + \" \" + ((openSection === 'problems' ? 'active' : '') || \"\")\n      }, React.createElement(\"b\", {\n        className: \"jsx-837324748\"\n      }, \"Problems\"))), React.createElement(\"li\", {\n        style: {\n          borderBottom: openSection === 'passages' ? '2px solid white' : ''\n        },\n        className: \"jsx-837324748\" + \" \" + \"tab col s3\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onChangeOpenSection('passages');\n        },\n        className: \"jsx-837324748\" + \" \" + ((openSection === 'passages' ? 'active' : '') || \"\")\n      }, React.createElement(\"b\", {\n        className: \"jsx-837324748\"\n      }, \"Passages\")))))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"tabs-content\"\n      }, React.createElement(FilterSection, {\n        onSetFilteredTopicState: this.onSetFilteredTopicState,\n        onClearFilters: this.onClearFilters,\n        sortBySubject: this.determineSort,\n        toggleSelectAllProblemsOrPassages: this.toggleSelectAllProblemsOrPassages,\n        handleFilterClick: this.handleFilterClick,\n        subjectFilters: subjectFilters,\n        difficultyFilters: difficultyFilters,\n        typeFilters: typeFilters,\n        workbookFilters: workbookFilters\n      }), openSection === 'problems' ? React.createElement(\"div\", {\n        id: \"tab_problems\",\n        className: \"jsx-837324748\" + \" \" + \"tab-content active\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"content-section content-section-80\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"container-lg\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"result-row center-align\"\n      }, React.createElement(\"b\", {\n        className: \"jsx-837324748\" + \" \" + \"result\"\n      }, \"- \", this.getMappableProblemsOrPassages('problems').length, \" matches -\")), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"list-view-section\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"list-table detail-table\"\n      }, React.createElement(TableHeader, {\n        sortBySubject: this.determineSort\n      }), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"list-table-body\"\n      }, this.mapProblems())))))) : React.createElement(\"div\", {\n        id: \"tab_passages\",\n        className: \"jsx-837324748\" + \" \" + \"tab-content active\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"content-section content-section-80\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"container-lg\"\n      }, React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"result-row center-align\"\n      }, React.createElement(\"b\", {\n        className: \"jsx-837324748\" + \" \" + \"result\"\n      }, \"- \", this.getMappableProblemsOrPassages('passages').length, \" matches -\")), this.mapPassages()))), React.createElement(\"div\", {\n        className: \"jsx-837324748\" + \" \" + \"add-btn-block\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        \"data-target\": \"dropdown_assign_selected_passeges\",\n        onClick: this.onToggleAddProblemDropdown,\n        className: \"jsx-837324748\" + \" \" + \"dropdown-trigger waves-effect waves-teal btn add-btn\"\n      }, React.createElement(\"i\", {\n        className: \"jsx-837324748\" + \" \" + \"material-icons\"\n      }, \"add\"), \"Add Selected Problems\"), React.createElement(\"ul\", {\n        id: \"dropdown_assign_selected_passeges\",\n        style: {\n          display: addProblemsDropdownOpen ? 'block' : '0',\n          opacity: addProblemsDropdownOpen ? '1' : '0'\n        },\n        className: \"jsx-837324748\" + \" \" + 'dropdown-content'\n      }, React.createElement(\"li\", {\n        className: \"jsx-837324748\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onAddSelectedProblems('today');\n        },\n        className: \"jsx-837324748\"\n      }, \"For Today\")), React.createElement(\"li\", {\n        className: \"jsx-837324748\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onAddSelectedProblems('tomorrow');\n        },\n        className: \"jsx-837324748\"\n      }, \"For Tomorrow\")), React.createElement(\"li\", {\n        className: \"jsx-837324748\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onAddSelectedProblems('nextSession');\n        },\n        className: \"jsx-837324748\"\n      }, \"For Next Session\")), React.createElement(\"li\", {\n        className: \"jsx-837324748\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: function onClick() {\n          return _this2.onAddSelectedProblems('date');\n        },\n        className: \"jsx-837324748\"\n      }, \"For Date...\")))))))), React.createElement(_JSXStyle, {\n        id: \"837324748\"\n      }, \".card-modal.jsx-837324748{margin:0;border-radius:6px;}.wrapper.jsx-837324748{min-height:0px;}.modal-custom.jsx-837324748{opacity:1;visibility:visible;}.modal-footer.jsx-837324748{background-color:white;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0hERC9TaXRlcy9jbGVhcmNob2ljZXRlc3RwcmVwL2NsZWFyLWNob2ljZS1hZG1pbi9jb21wb25lbnRzL1dvcmtzaGVldC9EZXRhaWxQYWdlL2NvbXBvbmVudHMvUHJvYmxlbUJhbmsvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa2ZXLEFBRzBCLEFBSU0sQUFHTCxBQUlhLFNBVkwsQ0FPQyxLQUhyQixRQU9BLElBVkEsRUFPQSIsImZpbGUiOiIvVm9sdW1lcy9IREQvU2l0ZXMvY2xlYXJjaG9pY2V0ZXN0cHJlcC9jbGVhci1jaG9pY2UtYWRtaW4vY29tcG9uZW50cy9Xb3Jrc2hlZXQvRGV0YWlsUGFnZS9jb21wb25lbnRzL1Byb2JsZW1CYW5rL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgYXJyYXktY2FsbGJhY2stcmV0dXJuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBjb25zaXN0ZW50LXJldHVybiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgdXBkYXRlIGZyb20gJ2ltbXV0YWJpbGl0eS1oZWxwZXInO1xuXG5pbXBvcnQgUG9ydGFsIGZyb20gJy4uLy4uLy4uLy4uL1BvcnRhbCc7XG5pbXBvcnQgRmlsdGVyU2VjdGlvbiBmcm9tICcuL2NvbXBvbmVudHMvRmlsdGVyU2VjdGlvbic7XG5pbXBvcnQgVGFibGVIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL1RhYmxlSGVhZGVyJztcblxuaW1wb3J0IHNhbXBsZVByb2JsZW1zIGZyb20gJy4uLy4uLy4uL3V0aWxzL3NhbXBsZVByb2JsZW1zJztcbmltcG9ydCBzYW1wbGVQYXNzYWdlcyBmcm9tICcuLi8uLi8uLi91dGlscy9zYW1wbGVQYXNzYWdlcyc7XG5pbXBvcnQgeyB0b3BpY01hcCwgd29ya2Jvb2tNYXAsIHN1YmplY3RNYXAsIGRpZmZpY3VsdHlNYXAsIHR5cGVNYXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy93b3Jrc2hlZXRGaWx0ZXJNYXAnO1xuaW1wb3J0IHsgc3ViamVjdEFzY2VuZGluZywgc3ViamVjdERlc2NlbmRpbmcgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9zb3J0RnVuY3Rpb25zJztcblxuY2xhc3MgUHJvYmxlbUJhbmsgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYWRkUHJvYmxlbXNEcm9wZG93bk9wZW46IGZhbHNlLFxuICAgICAgb3BlblNlY3Rpb246ICdwcm9ibGVtcycsXG4gICAgICB0b3BpY0ZpbHRlcjogJycsXG4gICAgICBzdWJqZWN0RmlsdGVyczogW10sXG4gICAgICBkaWZmaWN1bHR5RmlsdGVyczogW10sXG4gICAgICB0eXBlRmlsdGVyczogW10sXG4gICAgICB3b3JrYm9va0ZpbHRlcnM6IFtdLFxuICAgICAgc29ydDogJycsXG4gICAgICBzZWxlY3RlZFByb2JsZW1zOiBbXSxcbiAgICAgIHNlbGVjdGVkUGFzc2FnZXM6IFtdLFxuICAgICAgcHJvYmxlbXM6IHNhbXBsZVByb2JsZW1zLFxuICAgICAgcGFzc2FnZXM6IHNhbXBsZVBhc3NhZ2VzLFxuICAgIH1cbiAgfVxuXG4gIG9uVG9nZ2xlQWRkUHJvYmxlbURyb3Bkb3duID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSgoeyBhZGRQcm9ibGVtc0Ryb3Bkb3duT3BlbiB9KSA9PiAoeyBhZGRQcm9ibGVtc0Ryb3Bkb3duT3BlbjogIWFkZFByb2JsZW1zRHJvcGRvd25PcGVuIH0pKVxuXG4gIG9uQ2hhbmdlT3BlblNlY3Rpb24gPSAob3BlblNlY3Rpb24pID0+IHRoaXMuc2V0U3RhdGUoeyBvcGVuU2VjdGlvbiB9KVxuICBvblNldEZpbHRlcmVkVG9waWNTdGF0ZSA9ICh0b3BpY0ZpbHRlcikgPT4gdGhpcy5zZXRTdGF0ZSh7IHRvcGljRmlsdGVyIH0pXG4gIG9uQ2xlYXJGaWx0ZXJzID0gKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IHN1YmplY3RGaWx0ZXJzOiBbXSwgZGlmZmljdWx0eUZpbHRlcnM6IFtdLCB0eXBlRmlsdGVyczogW10sIHdvcmtib29rRmlsdGVyczogW10sIHRvcGljRmlsdGVyOiAnJyB9KVxuXG4gIG9uU2V0QXNjZW5kaW5nU29ydCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBzb3J0OiAnYXNjZW5kaW5nJyB9KTtcbiAgb25TZXREZXNjZW5kaW5nU29ydCA9ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBzb3J0OiAnZGVzY2VuZGluZycgfSk7XG5cbiAgb25Tb3J0QnlTdWJqZWN0ID0gKHByb2JsZW1zT3JQYXNzYWdlcykgPT4ge1xuICAgIGNvbnN0IHsgc29ydCB9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAoc29ydCA9PT0gJ2FzY2VuZGluZycpIHtcbiAgICAgIHJldHVybiBwcm9ibGVtc09yUGFzc2FnZXMuc29ydChzdWJqZWN0QXNjZW5kaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2JsZW1zT3JQYXNzYWdlcy5zb3J0KHN1YmplY3REZXNjZW5kaW5nKTtcbiAgfVxuICAvLyBEaWZmaWN1bHR5IGFuZCB0eXBlIGZpbHRlcnMgYXJlIHNpbWlsYXIgZW5vdWdoIHRvIHJldXNlIHRoZSBzYW1lIHJlZHVjZSBmdW5jdGlvbiwgdG9waWMgYW5kIHdvcmtib29rIGFyZSB1bmlxdWUgZW5vdWdoIHRvIGdldCByZXBldGl0aXZlIGZvciB0aGUgc2FrZSBvZiByZWFkYWJpbGl0eVxuICBvbkZpbHRlclBhc3NhZ2VzID0gKHBhc3NhZ2VzLCBmaWx0ZXJUeXBlLCBmaWx0ZXIpID0+IHtcbiAgICBzd2l0Y2ggKGZpbHRlclR5cGUpIHtcbiAgICAgIGNhc2UgJ2RpZmZpY3VsdHknOlxuICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgIHJldHVybiBwYXNzYWdlcy5yZWR1Y2UoKGZpbmFsQXJyLCBwYXNzYWdlKSA9PiB7XG4gICAgICAgICAgcGFzc2FnZS5wcm9ibGVtcy5tYXAocHJvYmxlbSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyLmluZGV4T2YocHJvYmxlbVtmaWx0ZXJUeXBlXSkgIT09IC0xICYmIGZpbmFsQXJyLmluZGV4T2YocGFzc2FnZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgIGZpbmFsQXJyLnB1c2gocGFzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGZpbmFsQXJyO1xuICAgICAgICB9LCBbXSk7XG4gICAgICBjYXNlICd0b3BpYyc6XG4gICAgICAgIHJldHVybiBwYXNzYWdlcy5yZWR1Y2UoKGZpbmFsQXJyLCBwYXNzYWdlKSA9PiB7XG4gICAgICAgICAgcGFzc2FnZS5wcm9ibGVtcy5tYXAocHJvYmxlbSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvYmxlbS50b3BpY3MuaW5kZXhPZihmaWx0ZXIpICE9PSAtMSAmJiBmaW5hbEFyci5pbmRleE9mKHBhc3NhZ2UpID09PSAtMSkge1xuICAgICAgICAgICAgICBmaW5hbEFyci5wdXNoKHBhc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBmaW5hbEFycjtcbiAgICAgICAgfSwgW10pO1xuICAgICAgY2FzZSAnd29ya2Jvb2snOlxuICAgICAgICByZXR1cm4gcGFzc2FnZXMucmVkdWNlKChmaW5hbEFyciwgcGFzc2FnZSkgPT4ge1xuICAgICAgICAgIHBhc3NhZ2UucHJvYmxlbXMubWFwKHByb2JsZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGZpbHRlci5pbmRleE9mKHdvcmtib29rTWFwW3Byb2JsZW0uaW5Xb3JrYm9va10pICE9PSAtMSAmJiBmaW5hbEFyci5pbmRleE9mKHBhc3NhZ2UpID09PSAtMSkge1xuICAgICAgICAgICAgICBmaW5hbEFyci5wdXNoKHBhc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBmaW5hbEFycjtcbiAgICAgICAgfSwgW10pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gUHJvYmxlbXMgZ2V0IGZpbHRlcmVkIHdpdGggYmFzaWMgZmlsdGVyIGZ1bmN0aW9ucywgcGFzc2FnZXMgZ2V0IHBhc3NlZCBpbnRvIG9uRmlsdGVyUGFzc2FnZXMgc2luY2UgYSBmZXcgb2YgdGhlIGZpbHRlcnMgYXJlIGJhc2VkIG9uIHRoZSBwcm9ibGVtcyBuZXN0ZWQgaW4gZWFjaCBwYXNzYWdlXG4gIG9uRmlsdGVyUHJvYmxlbXNPclBhc3NhZ2VzID0gKHR5cGUpID0+IHtcbiAgICBjb25zdCB7IHN1YmplY3RGaWx0ZXJzLCBkaWZmaWN1bHR5RmlsdGVycywgdHlwZUZpbHRlcnMsIHdvcmtib29rRmlsdGVycywgdG9waWNGaWx0ZXIsIHByb2JsZW1zOiBhbGxQcm9ibGVtcywgcGFzc2FnZXM6IGFsbFBhc3NhZ2VzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBwcm9ibGVtc09yUGFzc2FnZXM7XG4gICAgaWYgKHR5cGUgPT09ICdwcm9ibGVtcycpIHtcbiAgICAgIHByb2JsZW1zT3JQYXNzYWdlcyA9IGFsbFByb2JsZW1zO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9ibGVtc09yUGFzc2FnZXMgPSBhbGxQYXNzYWdlcztcbiAgICB9XG4gICAgaWYgKHN1YmplY3RGaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgcHJvYmxlbXNPclBhc3NhZ2VzID0gcHJvYmxlbXNPclBhc3NhZ2VzLmZpbHRlcihwcm9ibGVtT3JQYXNzYWdlID0+IHN1YmplY3RGaWx0ZXJzLmluZGV4T2YocHJvYmxlbU9yUGFzc2FnZS5zdWJqZWN0KSAhPT0gLTEpO1xuICAgIH1cbiAgICBpZiAoZGlmZmljdWx0eUZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICBpZiAodHlwZSA9PT0gJ3Byb2JsZW1zJykge1xuICAgICAgICBwcm9ibGVtc09yUGFzc2FnZXMgPSBwcm9ibGVtc09yUGFzc2FnZXMuZmlsdGVyKHByb2JsZW0gPT4gZGlmZmljdWx0eUZpbHRlcnMuaW5kZXhPZihwcm9ibGVtLmRpZmZpY3VsdHkpICE9PSAtMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9ibGVtc09yUGFzc2FnZXMgPSB0aGlzLm9uRmlsdGVyUGFzc2FnZXMocHJvYmxlbXNPclBhc3NhZ2VzLCAnZGlmZmljdWx0eScsIGRpZmZpY3VsdHlGaWx0ZXJzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVGaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgaWYgKHR5cGUgPT09ICdwcm9ibGVtcycpIHtcbiAgICAgICAgcHJvYmxlbXNPclBhc3NhZ2VzID0gcHJvYmxlbXNPclBhc3NhZ2VzLmZpbHRlcihwcm9ibGVtID0+IHR5cGVGaWx0ZXJzLmluZGV4T2YocHJvYmxlbS50eXBlKSAhPT0gLTEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvYmxlbXNPclBhc3NhZ2VzID0gdGhpcy5vbkZpbHRlclBhc3NhZ2VzKHByb2JsZW1zT3JQYXNzYWdlcywgJ3R5cGUnLCB0eXBlRmlsdGVycyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh3b3JrYm9va0ZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICBpZiAodHlwZSA9PT0gJ3Byb2JsZW1zJykge1xuICAgICAgICBwcm9ibGVtc09yUGFzc2FnZXMgPSBwcm9ibGVtc09yUGFzc2FnZXMuZmlsdGVyKHByb2JsZW0gPT4gd29ya2Jvb2tGaWx0ZXJzLmluZGV4T2Yod29ya2Jvb2tNYXBbcHJvYmxlbS5pbldvcmtib29rXSkgIT09IC0xKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2JsZW1zT3JQYXNzYWdlcyA9IHRoaXMub25GaWx0ZXJQYXNzYWdlcyhwcm9ibGVtc09yUGFzc2FnZXMsICd3b3JrYm9vaycsIHdvcmtib29rRmlsdGVycyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0b3BpY0ZpbHRlci5sZW5ndGgpIHtcbiAgICAgIGlmICh0eXBlID09PSAncHJvYmxlbXMnKSB7XG4gICAgICAgIHByb2JsZW1zT3JQYXNzYWdlcyA9IHByb2JsZW1zT3JQYXNzYWdlcy5maWx0ZXIocHJvYmxlbSA9PiBwcm9ibGVtLnRvcGljcy5pbmRleE9mKHRvcGljRmlsdGVyKSAhPT0gLTEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvYmxlbXNPclBhc3NhZ2VzID0gdGhpcy5vbkZpbHRlclBhc3NhZ2VzKHByb2JsZW1zT3JQYXNzYWdlcywgJ3RvcGljJywgdG9waWNGaWx0ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJvYmxlbXNPclBhc3NhZ2VzO1xuICB9XG5cbiAgb25BZGRTZWxlY3RlZFByb2JsZW1zID0gKGFkZFRpbWUpID0+IHtcbiAgICBjb25zdCB7IHNlbGVjdGVkUHJvYmxlbXMsIHNlbGVjdGVkUGFzc2FnZXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBhZGRTZWxlY3RlZFByb2JsZW1zIH0gPSB0aGlzLnByb3BzO1xuICAgIGFkZFNlbGVjdGVkUHJvYmxlbXMoc2VsZWN0ZWRQcm9ibGVtcywgc2VsZWN0ZWRQYXNzYWdlcywgYWRkVGltZSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkUGFzc2FnZXM6IFtdLCBzZWxlY3RlZFByb2JsZW1zOiBbXSwgYWRkUHJvYmxlbXNEcm9wZG93bk9wZW46IGZhbHNlIH0pO1xuICAgfVxuXG4gIGdldE1hcHBhYmxlUHJvYmxlbXNPclBhc3NhZ2VzID0gKHR5cGUpID0+IHtcbiAgICBjb25zdCB7IHN1YmplY3RGaWx0ZXJzLCBkaWZmaWN1bHR5RmlsdGVycywgdHlwZUZpbHRlcnMsIHdvcmtib29rRmlsdGVycywgdG9waWNGaWx0ZXIsIHNvcnQsIHByb2JsZW1zOiBhbGxQcm9ibGVtcywgcGFzc2FnZXM6IGFsbFBhc3NhZ2VzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBwcm9ibGVtc09yUGFzc2FnZXM7XG4gICAgaWYgKHR5cGUgPT09ICdwcm9ibGVtcycpIHtcbiAgICAgIHByb2JsZW1zT3JQYXNzYWdlcyA9IGFsbFByb2JsZW1zO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9ibGVtc09yUGFzc2FnZXMgPSBhbGxQYXNzYWdlcztcbiAgICB9XG4gICAgaWYgKHRvcGljRmlsdGVyLmxlbmd0aCB8fCBzdWJqZWN0RmlsdGVycy5sZW5ndGggfHwgZGlmZmljdWx0eUZpbHRlcnMubGVuZ3RoIHx8IHR5cGVGaWx0ZXJzLmxlbmd0aCB8fCB3b3JrYm9va0ZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICBwcm9ibGVtc09yUGFzc2FnZXMgPSB0aGlzLm9uRmlsdGVyUHJvYmxlbXNPclBhc3NhZ2VzKHR5cGUpO1xuICAgIH1cbiAgICBpZiAoc29ydCkge1xuICAgICAgcmV0dXJuIHRoaXMub25Tb3J0QnlTdWJqZWN0KHByb2JsZW1zT3JQYXNzYWdlcyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9ibGVtc09yUGFzc2FnZXM7XG4gIH1cblxuICBkZXRlcm1pbmVTb3J0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgc29ydCB9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAoc29ydCA9PT0gJycgfHwgc29ydCA9PT0gJ2Rlc2NlbmRpbmcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5vblNldEFzY2VuZGluZ1NvcnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub25TZXREZXNjZW5kaW5nU29ydCgpO1xuICB9XG5cbiAgaGFuZGxlRmlsdGVyQ2xpY2sgPSAoZmlsdGVyVHlwZSwgZmlsdGVyKSA9PiB7XG4gICAgY29uc3QgeyBzdWJqZWN0RmlsdGVyczogY3VycmVudFN1YmplY3RGaWx0ZXJzLCBkaWZmaWN1bHR5RmlsdGVyczogY3VycmVudERpZmZpY3VsdHlGaWx0ZXJzLFxuICAgICAgdHlwZUZpbHRlcnM6IGN1cnJlbnRUeXBlRmlsdGVycywgd29ya2Jvb2tGaWx0ZXJzOiBjdXJyZW50V29ya2Jvb2tGaWx0ZXJzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBtb2RpZmllZEZpbHRlckN1cnJlbnRTdGF0ZTtcbiAgICBsZXQgbW9kaWZpZWRGaWx0ZXJOYW1lO1xuICAgIGxldCBtb2RpZmllZEZpbHRlclVwZGF0ZWRTdGF0ZTtcbiAgICBzd2l0Y2ggKGZpbHRlclR5cGUpIHtcbiAgICAgIGNhc2UgJ3N1YmplY3QnOlxuICAgICAgICBtb2RpZmllZEZpbHRlckN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdWJqZWN0RmlsdGVycztcbiAgICAgICAgbW9kaWZpZWRGaWx0ZXJOYW1lID0gJ3N1YmplY3RGaWx0ZXJzJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkaWZmaWN1bHR5JzpcbiAgICAgICAgbW9kaWZpZWRGaWx0ZXJDdXJyZW50U3RhdGUgPSBjdXJyZW50RGlmZmljdWx0eUZpbHRlcnM7XG4gICAgICAgIG1vZGlmaWVkRmlsdGVyTmFtZSA9ICdkaWZmaWN1bHR5RmlsdGVycyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgIG1vZGlmaWVkRmlsdGVyQ3VycmVudFN0YXRlID0gY3VycmVudFR5cGVGaWx0ZXJzO1xuICAgICAgICBtb2RpZmllZEZpbHRlck5hbWUgPSAndHlwZUZpbHRlcnMnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dvcmtib29rJzpcbiAgICAgICAgbW9kaWZpZWRGaWx0ZXJDdXJyZW50U3RhdGUgPSBjdXJyZW50V29ya2Jvb2tGaWx0ZXJzO1xuICAgICAgICBtb2RpZmllZEZpbHRlck5hbWUgPSAnd29ya2Jvb2tGaWx0ZXJzJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKG1vZGlmaWVkRmlsdGVyQ3VycmVudFN0YXRlLmluZGV4T2YoZmlsdGVyKSA9PT0gLTEpIHtcbiAgICAgIG1vZGlmaWVkRmlsdGVyVXBkYXRlZFN0YXRlID0gdXBkYXRlKG1vZGlmaWVkRmlsdGVyQ3VycmVudFN0YXRlLCB7XG4gICAgICAgICRwdXNoOiBbZmlsdGVyXSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmaWx0ZXJJbmRleCA9IG1vZGlmaWVkRmlsdGVyQ3VycmVudFN0YXRlLmluZGV4T2YoZmlsdGVyKTtcbiAgICAgIG1vZGlmaWVkRmlsdGVyVXBkYXRlZFN0YXRlID0gdXBkYXRlKG1vZGlmaWVkRmlsdGVyQ3VycmVudFN0YXRlLCB7XG4gICAgICAgICRzcGxpY2U6IFtbIGZpbHRlckluZGV4LCAxIF1dLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyBbbW9kaWZpZWRGaWx0ZXJOYW1lXTogbW9kaWZpZWRGaWx0ZXJVcGRhdGVkU3RhdGUgfSk7XG4gIH1cblxuICB0b2dnbGVTZWxlY3RBbGxQcm9ibGVtc09yUGFzc2FnZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBvcGVuU2VjdGlvbjogdHlwZSwgcHJvYmxlbXMsIHBhc3NhZ2VzLCBzZWxlY3RlZFByb2JsZW1zOiBjdXJyZW50U2VsZWN0ZWRQcm9ibGVtcywgc2VsZWN0ZWRQYXNzYWdlczogY3VycmVudFNlbGVjdGVkUGFzc2FnZXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IGNsaWNrZWRUeXBlQ3VycmVudFN0YXRlO1xuICAgIGxldCBjbGlja2VkVHlwZU5hbWU7XG4gICAgbGV0IGNsaWNrZWRBbGxPZlR5cGU7XG4gICAgaWYgKHR5cGUgPT09ICdwcm9ibGVtcycpIHtcbiAgICAgIGNsaWNrZWRUeXBlQ3VycmVudFN0YXRlID0gY3VycmVudFNlbGVjdGVkUHJvYmxlbXM7XG4gICAgICBjbGlja2VkVHlwZU5hbWUgPSAnc2VsZWN0ZWRQcm9ibGVtcyc7XG4gICAgICBjbGlja2VkQWxsT2ZUeXBlID0gcHJvYmxlbXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsaWNrZWRUeXBlQ3VycmVudFN0YXRlID0gY3VycmVudFNlbGVjdGVkUGFzc2FnZXM7XG4gICAgICBjbGlja2VkVHlwZU5hbWUgPSAnc2VsZWN0ZWRQYXNzYWdlcyc7XG4gICAgICBjbGlja2VkQWxsT2ZUeXBlID0gcGFzc2FnZXM7XG4gICAgfVxuICAgIGlmIChjbGlja2VkVHlwZUN1cnJlbnRTdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBbY2xpY2tlZFR5cGVOYW1lXTogY2xpY2tlZEFsbE9mVHlwZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IFtjbGlja2VkVHlwZU5hbWVdOiBbXSB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBDb25kaXRpb25hbGx5IHVwZGF0ZXMgdGhlIHNlbGVjdGVkIHByb2JsZW0gb3IgcGFzc2FnZXMgYXJyYXkgZGVwZW5kaW5nIG9uIHRoZSBpbmNvbWluZyB0eXBlIG5hbWVcbiAgaGFuZGxlUHJvYmxlbU9yUGFzc2FnZUNsaWNrID0gKHR5cGUsIHZhbHVlKSA9PiB7XG4gICAgY29uc3QgeyBzZWxlY3RlZFByb2JsZW1zOiBjdXJyZW50U2VsZWN0ZWRQcm9ibGVtcywgc2VsZWN0ZWRQYXNzYWdlczogY3VycmVudFNlbGVjdGVkUGFzc2FnZXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IGNsaWNrZWRUeXBlQ3VycmVudFN0YXRlO1xuICAgIGxldCBjbGlja2VkVHlwZU5hbWU7XG4gICAgaWYgKHR5cGUgPT09ICdwcm9ibGVtJykge1xuICAgICAgY2xpY2tlZFR5cGVDdXJyZW50U3RhdGUgPSBjdXJyZW50U2VsZWN0ZWRQcm9ibGVtcztcbiAgICAgIGNsaWNrZWRUeXBlTmFtZSA9ICdzZWxlY3RlZFByb2JsZW1zJztcbiAgICB9IGVsc2Uge1xuICAgICAgY2xpY2tlZFR5cGVDdXJyZW50U3RhdGUgPSBjdXJyZW50U2VsZWN0ZWRQYXNzYWdlcztcbiAgICAgIGNsaWNrZWRUeXBlTmFtZSA9ICdzZWxlY3RlZFBhc3NhZ2VzJztcbiAgICB9XG4gICAgbGV0IGNsaWNrZWRUeXBlVXBkYXRlZFN0YXRlO1xuICAgIGlmIChjbGlja2VkVHlwZUN1cnJlbnRTdGF0ZS5tYXAoc2VsZWN0ZWRFbGVtZW50ID0+IHNlbGVjdGVkRWxlbWVudC5pZCkuaW5kZXhPZih2YWx1ZS5pZCkgPT09IC0xKSB7XG4gICAgICBjbGlja2VkVHlwZVVwZGF0ZWRTdGF0ZSA9IHVwZGF0ZShjbGlja2VkVHlwZUN1cnJlbnRTdGF0ZSwge1xuICAgICAgICAkcHVzaDogW3ZhbHVlXSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZWxlY3RlZEluZGV4ID0gY2xpY2tlZFR5cGVDdXJyZW50U3RhdGUubWFwKHNlbGVjdGVkRWxlbWVudCA9PiBzZWxlY3RlZEVsZW1lbnQuaWQpLmluZGV4T2YodmFsdWUuaWQpO1xuICAgICAgY2xpY2tlZFR5cGVVcGRhdGVkU3RhdGUgPSB1cGRhdGUoY2xpY2tlZFR5cGVDdXJyZW50U3RhdGUsIHtcbiAgICAgICAgJHNwbGljZTogW1sgc2VsZWN0ZWRJbmRleCwgMSBdXSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHsgW2NsaWNrZWRUeXBlTmFtZV06IGNsaWNrZWRUeXBlVXBkYXRlZFN0YXRlIH0pO1xuICB9XG5cbiAgbWFwUHJvYmxlbXMgPSAoKSA9PiB0aGlzLmdldE1hcHBhYmxlUHJvYmxlbXNPclBhc3NhZ2VzKCdwcm9ibGVtcycpLm1hcChwcm9ibGVtID0+IHtcbiAgICBjb25zdCB7IHNlbGVjdGVkUHJvYmxlbXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBzZWxlY3RlZFByb2JsZW1zLm1hcChzZWxlY3RlZFByb2JsZW0gPT4gc2VsZWN0ZWRQcm9ibGVtLmlkKS5pbmRleE9mKHByb2JsZW0uaWQpICE9PSAtMTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3NlbGVjdGVkID8gXCJjYXJkIGxpc3QtdGFibGUtcm93IGxpc3Qtcm93LWFkZGVkXCIgOiBcImNhcmQgbGlzdC10YWJsZS1yb3dcIn0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIGNoZWNrYm94LWNlbGxcIj5cbiAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmlsbGVkLWluXCJcbiAgICAgICAgICAgICAgbmFtZT1cImNoZWNrXzAxXCJcbiAgICAgICAgICAgICAgY2hlY2tlZD17c2VsZWN0ZWRQcm9ibGVtcy5tYXAoc2VsZWN0ZWRQcm9ibGVtID0+IHNlbGVjdGVkUHJvYmxlbS5pZCkuaW5kZXhPZihwcm9ibGVtLmlkKSAhPT0gLTF9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLmhhbmRsZVByb2JsZW1PclBhc3NhZ2VDbGljaygncHJvYmxlbScsIHByb2JsZW0pfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxzcGFuPiZuYnNwOzwvc3Bhbj5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgc3ViamVjdC1jZWxsXCI+XG4gICAgICAgICAgPHNwYW4+e3N1YmplY3RNYXBbcHJvYmxlbS5zdWJqZWN0XX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtdGFibGUtY2VsbCBpbmZvLWNlbGxcIj5cbiAgICAgICAgICA8c3Bhbj57ZGlmZmljdWx0eU1hcFtwcm9ibGVtLmRpZmZpY3VsdHldfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIHR5cGUtY2VsbFwiPlxuICAgICAgICAgIDxzcGFuPnt0eXBlTWFwW3Byb2JsZW0udHlwZV19PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgaW4tY2VsbFwiPntwcm9ibGVtLmluV29ya2Jvb2sgPyAnWWVzJyA6ICdObyd9PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIHRvcGljLWNlbGxcIj5cbiAgICAgICAgICB7cHJvYmxlbS50b3BpY3MubWFwKHRvcGljID0+IDxzcGFuIGNsYXNzTmFtZT1cImNoaXBcIiBpZD17dG9waWN9Pnt0b3BpY01hcFt0b3BpY119PC9zcGFuPil9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtdGFibGUtY2VsbCB2aWV3LWNlbGxcIj5cbiAgICAgICAgICA8YSBocmVmPVwiI1wiPjxpIGNsYXNzTmFtZT1cImljb24tZXllXCI+PC9pPjwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIGRyb3AtY2VsbFwiPlxuICAgICAgICAgIDxhIGhyZWY9XCIjXCI+PGkgY2xhc3NOYW1lPVwiaWNvbi1wbHVzLWNpcmNsZVwiPjwvaT48L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9KVxuXG4gIG1hcFBhc3NhZ2VzID0gKCkgPT4gdGhpcy5nZXRNYXBwYWJsZVByb2JsZW1zT3JQYXNzYWdlcygncGFzc2FnZXMnKS5tYXAocGFzc2FnZSA9PiB7XG4gICAgY29uc3QgeyBzZWxlY3RlZFBhc3NhZ2VzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHNlbGVjdGVkID0gc2VsZWN0ZWRQYXNzYWdlcy5tYXAoc2VsZWN0ZWRQYXNzYWdlID0+IHNlbGVjdGVkUGFzc2FnZS5pZCkuaW5kZXhPZihwYXNzYWdlLmlkKSAhPT0gLTE7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC12aWV3LXNlY3Rpb25cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3NlbGVjdGVkID8gXCJsaXN0LXRhYmxlIGRldGFpbC10YWJsZSBsaXN0LXRhYmxlLWFkZGVkXCIgOiBcImxpc3QtdGFibGUgZGV0YWlsLXRhYmxlXCJ9PlxuICAgICAgICAgIDxUYWJsZUhlYWRlciBzb3J0QnlTdWJqZWN0PXt0aGlzLmRldGVybWluZVNvcnR9IC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWJvZHlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tYmluZWQtaG9sZGVyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tYmluZWQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgY2hlY2tib3gtY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZWNrYm94LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpbGxlZC1pblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NlbGVjdGVkUGFzc2FnZXMubWFwKHNlbGVjdGVkUGFzc2FnZSA9PiBzZWxlY3RlZFBhc3NhZ2UuaWQpLmluZGV4T2YocGFzc2FnZS5pZCkgIT09IC0xfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5oYW5kbGVQcm9ibGVtT3JQYXNzYWdlQ2xpY2soJ3Bhc3NhZ2UnLCBwYXNzYWdlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4mbmJzcDs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIHN1YmplY3QtY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlci1uYW1lXCI+e3N1YmplY3RNYXBbcGFzc2FnZS5zdWJqZWN0XX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgY29tYmluZWQtdGl0bGUtY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbWJpbmVkLXRpdGxlXCI+e3Bhc3NhZ2UudGl0bGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIHZpZXctY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiPjxpIGNsYXNzTmFtZT1cImN1c3RvbS1pY29uLXRyaWFuZ2xlLXJpZ2h0XCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgZHJvcC1jZWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCI+PGkgY2xhc3NOYW1lPVwiaWNvbi1wbHVzLWNpcmNsZVwiPjwvaT48L2E+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sbGVjdGlvblwiPlxuICAgICAgICAgICAgICAgIHtwYXNzYWdlLnByb2JsZW1zLm1hcChwcm9ibGVtID0+IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sbGVjdGlvbi1pdGVtIGxpc3QtdGFibGUtcm93XCIgaWQ9e3Byb2JsZW0uaWR9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtdGFibGUtY2VsbCBjaGVja2JveC1jZWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Jm5ic3A7PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgc3ViamVjdC1jZWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3N1YmplY3RNYXBbcHJvYmxlbS5zdWJqZWN0XX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtdGFibGUtY2VsbCBpbmZvLWNlbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57ZGlmZmljdWx0eU1hcFtwcm9ibGVtLmRpZmZpY3VsdHldfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIHR5cGUtY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPnt0eXBlTWFwW3Byb2JsZW0udHlwZV19PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlLWNlbGwgaW4tY2VsbFwiPntwcm9ibGVtLmluV29ya2Jvb2sgPyAnWWVzJyA6ICdObyd9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIHRvcGljLWNlbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7cHJvYmxlbS50b3BpY3MubWFwKHRvcGljID0+IDxzcGFuIGNsYXNzTmFtZT1cImNoaXBcIiBpZD17dG9waWN9Pnt0b3BpY01hcFt0b3BpY119PC9zcGFuPil9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtdGFibGUtY2VsbCB2aWV3LWNlbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiPjxpIGNsYXNzTmFtZT1cImljb24tZXllXCI+PC9pPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC10YWJsZS1jZWxsIGRyb3AtY2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiZuYnNwOzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH0pXG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgb3Blbiwgb25DbG9zZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IG9wZW5TZWN0aW9uLCBzdWJqZWN0RmlsdGVycywgZGlmZmljdWx0eUZpbHRlcnMsIHR5cGVGaWx0ZXJzLCB3b3JrYm9va0ZpbHRlcnMsIGFkZFByb2JsZW1zRHJvcGRvd25PcGVuIH0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiAoXG4gICAgICA8UG9ydGFsIHNlbGVjdG9yPVwiI21vZGFsXCI+XG4gICAgICAgIHtvcGVuICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtb2RhbF9hZGRfcHJvYmxlbVwiIGNsYXNzTmFtZT1cIm1vZGFsLXBhZ2UgbW9kYWwgbW9kYWwtY3VzdG9tXCIgc3R5bGU9e3sgekluZGV4OiAnMTAwMycgfX0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1tb2RhbCBncmV5IGxpZ2h0ZW4tM1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLW1vZGFsLWJveCBjYXJkLXBhbmVsIGxpZ2h0LWJsdWUgbGlnaHRlbi0xIHdoaXRlLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLWZsZXgtcm93IHJvdyBtYi0wXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sIHMxMiBtNCBsNVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLWhvbGRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaWNvbi1jb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJpY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyLWNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bmF2IGNsYXNzTmFtZT1cImJyZWFkY3J1bWItaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYXYtd3JhcHBlciBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjIVwiIGNsYXNzTmFtZT1cImJyZWFkY3J1bWIgbW9kYWwtY2xvc2VcIj4mbHQ7IEN1c3RvbSBXb3Jrc2hlZXQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmF2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtcGFuZWwtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LWxhcmdlXCI+UHJvYmxlbSBCYW5rPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1wYW5lbC1kZXNjcmlwdGlvbiBjb2wgczggbTMgbDJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtcGFuZWwtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogVE9ETzogRmlndXJlIG91dCB3aGF0IHRoaXMgbnVtYmVyIGlzIHN1cHBvc2VkIHRvIHJlZmxlY3QgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInZhbHVlXCI+MjQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInZhbHVlLXRleHRcIj53b3Jrc2hlZXQgPGJyIC8+cHJvYmxlbXM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sIHMyIG0xIHJpZ2h0LWFsaWduIHBvc2l0aW9uLW1vYmlsZS1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2xvc2UtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwibW9kYWwtY2xvc2UgY2xvc2VcIiBvbkNsaWNrPXtvbkNsb3NlfT48aSBjbGFzc05hbWU9XCJpY29uLWNsb3NlLXRoaW5cIj48L2k+PC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YWJzLXN3aXRjaGVyLWhvbGRlciBjYXJkLXBhbmVsLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPVwidGFic1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGFiIGNvbCBzM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBib3JkZXJCb3R0b206IG9wZW5TZWN0aW9uID09PSAncHJvYmxlbXMnID8gJzJweCBzb2xpZCB3aGl0ZScgOiAnJyB9fVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT17b3BlblNlY3Rpb24gPT09ICdwcm9ibGVtcycgPyAnYWN0aXZlJyA6ICcnfSBocmVmPVwiI1wiIG9uQ2xpY2s9eygpID0+IHRoaXMub25DaGFuZ2VPcGVuU2VjdGlvbigncHJvYmxlbXMnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxiPlByb2JsZW1zPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0YWIgY29sIHMzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGJvcmRlckJvdHRvbTogb3BlblNlY3Rpb24gPT09ICdwYXNzYWdlcycgPyAnMnB4IHNvbGlkIHdoaXRlJyA6ICcnIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPXtvcGVuU2VjdGlvbiA9PT0gJ3Bhc3NhZ2VzJyA/ICdhY3RpdmUnIDogJyd9IGhyZWY9XCIjXCIgb25DbGljaz17KCkgPT4gdGhpcy5vbkNoYW5nZU9wZW5TZWN0aW9uKCdwYXNzYWdlcycpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGI+UGFzc2FnZXM8L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFicy1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICA8RmlsdGVyU2VjdGlvblxuICAgICAgICAgICAgICAgICAgICBvblNldEZpbHRlcmVkVG9waWNTdGF0ZT17dGhpcy5vblNldEZpbHRlcmVkVG9waWNTdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGVhckZpbHRlcnM9e3RoaXMub25DbGVhckZpbHRlcnN9XG4gICAgICAgICAgICAgICAgICAgIHNvcnRCeVN1YmplY3Q9e3RoaXMuZGV0ZXJtaW5lU29ydH1cbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2VsZWN0QWxsUHJvYmxlbXNPclBhc3NhZ2VzPXt0aGlzLnRvZ2dsZVNlbGVjdEFsbFByb2JsZW1zT3JQYXNzYWdlc31cbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRmlsdGVyQ2xpY2s9e3RoaXMuaGFuZGxlRmlsdGVyQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgIHN1YmplY3RGaWx0ZXJzPXtzdWJqZWN0RmlsdGVyc31cbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUZpbHRlcnM9e2RpZmZpY3VsdHlGaWx0ZXJzfVxuICAgICAgICAgICAgICAgICAgICB0eXBlRmlsdGVycz17dHlwZUZpbHRlcnN9XG4gICAgICAgICAgICAgICAgICAgIHdvcmtib29rRmlsdGVycz17d29ya2Jvb2tGaWx0ZXJzfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxDaG9vc2U+XG4gICAgICAgICAgICAgICAgICAgIDxXaGVuIGNvbmRpdGlvbj17b3BlblNlY3Rpb24gPT09ICdwcm9ibGVtcyd9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0YWJfcHJvYmxlbXNcIiBjbGFzc05hbWU9XCJ0YWItY29udGVudCBhY3RpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC1zZWN0aW9uIGNvbnRlbnQtc2VjdGlvbi04MFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1sZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVzdWx0LXJvdyBjZW50ZXItYWxpZ25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiIGNsYXNzTmFtZT1cInJlc3VsdFwiPi0ge3RoaXMuZ2V0TWFwcGFibGVQcm9ibGVtc09yUGFzc2FnZXMoJ3Byb2JsZW1zJykubGVuZ3RofSBtYXRjaGVzIC08L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXZpZXctc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LXRhYmxlIGRldGFpbC10YWJsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVIZWFkZXIgc29ydEJ5U3ViamVjdD17dGhpcy5kZXRlcm1pbmVTb3J0fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpc3QtdGFibGUtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLm1hcFByb2JsZW1zKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvV2hlbj5cbiAgICAgICAgICAgICAgICAgICAgPE90aGVyd2lzZT5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidGFiX3Bhc3NhZ2VzXCIgY2xhc3NOYW1lPVwidGFiLWNvbnRlbnQgYWN0aXZlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnQtc2VjdGlvbiBjb250ZW50LXNlY3Rpb24tODBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItbGdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlc3VsdC1yb3cgY2VudGVyLWFsaWduXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YiBjbGFzc05hbWU9XCJyZXN1bHRcIj4tIHt0aGlzLmdldE1hcHBhYmxlUHJvYmxlbXNPclBhc3NhZ2VzKCdwYXNzYWdlcycpLmxlbmd0aH0gbWF0Y2hlcyAtPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLm1hcFBhc3NhZ2VzKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvT3RoZXJ3aXNlPlxuICAgICAgICAgICAgICAgICAgPC9DaG9vc2U+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFkZC1idG4tYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZHJvcGRvd24tdHJpZ2dlciB3YXZlcy1lZmZlY3Qgd2F2ZXMtdGVhbCBidG4gYWRkLWJ0blwiXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10YXJnZXQ9J2Ryb3Bkb3duX2Fzc2lnbl9zZWxlY3RlZF9wYXNzZWdlcydcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uVG9nZ2xlQWRkUHJvYmxlbURyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwibWF0ZXJpYWwtaWNvbnNcIj5hZGQ8L2k+XG4gICAgICAgICAgICAgICAgICAgICAgQWRkIFNlbGVjdGVkIFByb2JsZW1zXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPHVsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9J2Ryb3Bkb3duX2Fzc2lnbl9zZWxlY3RlZF9wYXNzZWdlcydcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Ryb3Bkb3duLWNvbnRlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogYWRkUHJvYmxlbXNEcm9wZG93bk9wZW4gPyAnYmxvY2snIDogJzAnLCBvcGFjaXR5OiBhZGRQcm9ibGVtc0Ryb3Bkb3duT3BlbiA/ICcxJyA6ICcwJyB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9XCIjXCIgb25DbGljaz17KCkgPT4gdGhpcy5vbkFkZFNlbGVjdGVkUHJvYmxlbXMoJ3RvZGF5Jyl9PkZvciBUb2RheTwvYT48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiI1wiIG9uQ2xpY2s9eygpID0+IHRoaXMub25BZGRTZWxlY3RlZFByb2JsZW1zKCd0b21vcnJvdycpfT5Gb3IgVG9tb3Jyb3c8L2E+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICA8bGk+PGEgaHJlZj1cIiNcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLm9uQWRkU2VsZWN0ZWRQcm9ibGVtcygnbmV4dFNlc3Npb24nKX0+Rm9yIE5leHQgU2Vzc2lvbjwvYT48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiI1wiIG9uQ2xpY2s9eygpID0+IHRoaXMub25BZGRTZWxlY3RlZFByb2JsZW1zKCdkYXRlJyl9PkZvciBEYXRlLi4uPC9hPjwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAgICB7YFxuICAgICAgICAgICAgICAuY2FyZC1tb2RhbCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAud3JhcHBlciB7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMHB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC5tb2RhbC1jdXN0b20ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAubW9kYWwtZm9vdGVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgIDwvUG9ydGFsPlxuICAgICk7XG4gIH1cbn1cblxuUHJvYmxlbUJhbmsucHJvcFR5cGVzID0ge1xuICBvcGVuOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICBvbkNsb3NlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBhZGRTZWxlY3RlZFByb2JsZW1zOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxufVxuXG5leHBvcnQgZGVmYXVsdCBQcm9ibGVtQmFuaztcbiJdfQ== */\\n/*@ sourceURL=/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Worksheet/DetailPage/components/ProblemBank/index.js */\"));\n    }\n  }]);\n\n  return ProblemBank;\n}(React.Component);\n\nProblemBank.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  addSelectedProblems: PropTypes.func.isRequired\n};\nexport default ProblemBank;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/components/Worksheet/DetailPage/components/ProblemBank/index.js"],"names":["React","PropTypes","update","Portal","FilterSection","TableHeader","sampleProblems","samplePassages","topicMap","workbookMap","subjectMap","difficultyMap","typeMap","subjectAscending","subjectDescending","ProblemBank","props","setState","addProblemsDropdownOpen","openSection","topicFilter","subjectFilters","difficultyFilters","typeFilters","workbookFilters","sort","problemsOrPassages","state","passages","filterType","filter","reduce","finalArr","passage","problems","map","problem","indexOf","push","topics","inWorkbook","type","allProblems","allPassages","length","problemOrPassage","subject","difficulty","onFilterPassages","addTime","selectedProblems","selectedPassages","addSelectedProblems","onFilterProblemsOrPassages","onSortBySubject","onSetAscendingSort","onSetDescendingSort","currentSubjectFilters","currentDifficultyFilters","currentTypeFilters","currentWorkbookFilters","modifiedFilterCurrentState","modifiedFilterName","modifiedFilterUpdatedState","$push","filterIndex","$splice","currentSelectedProblems","currentSelectedPassages","clickedTypeCurrentState","clickedTypeName","clickedAllOfType","value","clickedTypeUpdatedState","selectedElement","id","selectedIndex","getMappableProblemsOrPassages","selected","selectedProblem","handleProblemOrPassageClick","topic","selectedPassage","determineSort","title","open","onClose","zIndex","borderBottom","onChangeOpenSection","onSetFilteredTopicState","onClearFilters","toggleSelectAllProblemsOrPassages","handleFilterClick","mapProblems","mapPassages","onToggleAddProblemDropdown","display","opacity","onAddSelectedProblems","Component","propTypes","bool","isRequired","func"],"mappings":"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","sourcesContent":["/* eslint-disable array-callback-return */\n/* eslint-disable consistent-return */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport update from 'immutability-helper';\n\nimport Portal from '../../../../Portal';\nimport FilterSection from './components/FilterSection';\nimport TableHeader from './components/TableHeader';\n\nimport sampleProblems from '../../../utils/sampleProblems';\nimport samplePassages from '../../../utils/samplePassages';\nimport { topicMap, workbookMap, subjectMap, difficultyMap, typeMap } from '../../../utils/worksheetFilterMap';\nimport { subjectAscending, subjectDescending } from '../../../../utils/sortFunctions';\n\nclass ProblemBank extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addProblemsDropdownOpen: false,\n      openSection: 'problems',\n      topicFilter: '',\n      subjectFilters: [],\n      difficultyFilters: [],\n      typeFilters: [],\n      workbookFilters: [],\n      sort: '',\n      selectedProblems: [],\n      selectedPassages: [],\n      problems: sampleProblems,\n      passages: samplePassages,\n    }\n  }\n\n  onToggleAddProblemDropdown = () => this.setState(({ addProblemsDropdownOpen }) => ({ addProblemsDropdownOpen: !addProblemsDropdownOpen }))\n\n  onChangeOpenSection = (openSection) => this.setState({ openSection })\n  onSetFilteredTopicState = (topicFilter) => this.setState({ topicFilter })\n  onClearFilters = () => this.setState({ subjectFilters: [], difficultyFilters: [], typeFilters: [], workbookFilters: [], topicFilter: '' })\n\n  onSetAscendingSort = () => this.setState({ sort: 'ascending' });\n  onSetDescendingSort = () => this.setState({ sort: 'descending' });\n\n  onSortBySubject = (problemsOrPassages) => {\n    const { sort } = this.state;\n    if (sort === 'ascending') {\n      return problemsOrPassages.sort(subjectAscending);\n    }\n    return problemsOrPassages.sort(subjectDescending);\n  }\n  // Difficulty and type filters are similar enough to reuse the same reduce function, topic and workbook are unique enough to get repetitive for the sake of readability\n  onFilterPassages = (passages, filterType, filter) => {\n    switch (filterType) {\n      case 'difficulty':\n      case 'type':\n        return passages.reduce((finalArr, passage) => {\n          passage.problems.map(problem => {\n            if (filter.indexOf(problem[filterType]) !== -1 && finalArr.indexOf(passage) === -1) {\n              finalArr.push(passage);\n            }\n          });\n          return finalArr;\n        }, []);\n      case 'topic':\n        return passages.reduce((finalArr, passage) => {\n          passage.problems.map(problem => {\n            if (problem.topics.indexOf(filter) !== -1 && finalArr.indexOf(passage) === -1) {\n              finalArr.push(passage);\n            }\n          });\n          return finalArr;\n        }, []);\n      case 'workbook':\n        return passages.reduce((finalArr, passage) => {\n          passage.problems.map(problem => {\n            if (filter.indexOf(workbookMap[problem.inWorkbook]) !== -1 && finalArr.indexOf(passage) === -1) {\n              finalArr.push(passage);\n            }\n          });\n          return finalArr;\n        }, []);\n      default:\n        break;\n    }\n  }\n\n  // Problems get filtered with basic filter functions, passages get passed into onFilterPassages since a few of the filters are based on the problems nested in each passage\n  onFilterProblemsOrPassages = (type) => {\n    const { subjectFilters, difficultyFilters, typeFilters, workbookFilters, topicFilter, problems: allProblems, passages: allPassages } = this.state;\n    let problemsOrPassages;\n    if (type === 'problems') {\n      problemsOrPassages = allProblems;\n    } else {\n      problemsOrPassages = allPassages;\n    }\n    if (subjectFilters.length) {\n      problemsOrPassages = problemsOrPassages.filter(problemOrPassage => subjectFilters.indexOf(problemOrPassage.subject) !== -1);\n    }\n    if (difficultyFilters.length) {\n      if (type === 'problems') {\n        problemsOrPassages = problemsOrPassages.filter(problem => difficultyFilters.indexOf(problem.difficulty) !== -1);\n      } else {\n        problemsOrPassages = this.onFilterPassages(problemsOrPassages, 'difficulty', difficultyFilters);\n      }\n    }\n    if (typeFilters.length) {\n      if (type === 'problems') {\n        problemsOrPassages = problemsOrPassages.filter(problem => typeFilters.indexOf(problem.type) !== -1);\n      } else {\n        problemsOrPassages = this.onFilterPassages(problemsOrPassages, 'type', typeFilters);\n      }\n    }\n    if (workbookFilters.length) {\n      if (type === 'problems') {\n        problemsOrPassages = problemsOrPassages.filter(problem => workbookFilters.indexOf(workbookMap[problem.inWorkbook]) !== -1);\n      } else {\n        problemsOrPassages = this.onFilterPassages(problemsOrPassages, 'workbook', workbookFilters);\n      }\n    }\n    if (topicFilter.length) {\n      if (type === 'problems') {\n        problemsOrPassages = problemsOrPassages.filter(problem => problem.topics.indexOf(topicFilter) !== -1);\n      } else {\n        problemsOrPassages = this.onFilterPassages(problemsOrPassages, 'topic', topicFilter);\n      }\n    }\n    return problemsOrPassages;\n  }\n\n  onAddSelectedProblems = (addTime) => {\n    const { selectedProblems, selectedPassages } = this.state;\n    const { addSelectedProblems } = this.props;\n    addSelectedProblems(selectedProblems, selectedPassages, addTime);\n    this.setState({ selectedPassages: [], selectedProblems: [], addProblemsDropdownOpen: false });\n   }\n\n  getMappableProblemsOrPassages = (type) => {\n    const { subjectFilters, difficultyFilters, typeFilters, workbookFilters, topicFilter, sort, problems: allProblems, passages: allPassages } = this.state;\n    let problemsOrPassages;\n    if (type === 'problems') {\n      problemsOrPassages = allProblems;\n    } else {\n      problemsOrPassages = allPassages;\n    }\n    if (topicFilter.length || subjectFilters.length || difficultyFilters.length || typeFilters.length || workbookFilters.length) {\n      problemsOrPassages = this.onFilterProblemsOrPassages(type);\n    }\n    if (sort) {\n      return this.onSortBySubject(problemsOrPassages);\n    }\n    return problemsOrPassages;\n  }\n\n  determineSort = () => {\n    const { sort } = this.state;\n    if (sort === '' || sort === 'descending') {\n      return this.onSetAscendingSort();\n    }\n    return this.onSetDescendingSort();\n  }\n\n  handleFilterClick = (filterType, filter) => {\n    const { subjectFilters: currentSubjectFilters, difficultyFilters: currentDifficultyFilters,\n      typeFilters: currentTypeFilters, workbookFilters: currentWorkbookFilters } = this.state;\n    let modifiedFilterCurrentState;\n    let modifiedFilterName;\n    let modifiedFilterUpdatedState;\n    switch (filterType) {\n      case 'subject':\n        modifiedFilterCurrentState = currentSubjectFilters;\n        modifiedFilterName = 'subjectFilters';\n        break;\n      case 'difficulty':\n        modifiedFilterCurrentState = currentDifficultyFilters;\n        modifiedFilterName = 'difficultyFilters';\n        break;\n      case 'type':\n        modifiedFilterCurrentState = currentTypeFilters;\n        modifiedFilterName = 'typeFilters';\n        break;\n      case 'workbook':\n        modifiedFilterCurrentState = currentWorkbookFilters;\n        modifiedFilterName = 'workbookFilters';\n        break;\n      default:\n        break;\n    }\n    if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $push: [filter],\n      });\n    } else {\n      const filterIndex = modifiedFilterCurrentState.indexOf(filter);\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $splice: [[ filterIndex, 1 ]],\n      });\n    }\n    this.setState({ [modifiedFilterName]: modifiedFilterUpdatedState });\n  }\n\n  toggleSelectAllProblemsOrPassages = () => {\n    const { openSection: type, problems, passages, selectedProblems: currentSelectedProblems, selectedPassages: currentSelectedPassages } = this.state;\n    let clickedTypeCurrentState;\n    let clickedTypeName;\n    let clickedAllOfType;\n    if (type === 'problems') {\n      clickedTypeCurrentState = currentSelectedProblems;\n      clickedTypeName = 'selectedProblems';\n      clickedAllOfType = problems;\n    } else {\n      clickedTypeCurrentState = currentSelectedPassages;\n      clickedTypeName = 'selectedPassages';\n      clickedAllOfType = passages;\n    }\n    if (clickedTypeCurrentState.length === 0) {\n      this.setState({ [clickedTypeName]: clickedAllOfType });\n    } else {\n      this.setState({ [clickedTypeName]: [] });\n    }\n  }\n\n  // Conditionally updates the selected problem or passages array depending on the incoming type name\n  handleProblemOrPassageClick = (type, value) => {\n    const { selectedProblems: currentSelectedProblems, selectedPassages: currentSelectedPassages } = this.state;\n    let clickedTypeCurrentState;\n    let clickedTypeName;\n    if (type === 'problem') {\n      clickedTypeCurrentState = currentSelectedProblems;\n      clickedTypeName = 'selectedProblems';\n    } else {\n      clickedTypeCurrentState = currentSelectedPassages;\n      clickedTypeName = 'selectedPassages';\n    }\n    let clickedTypeUpdatedState;\n    if (clickedTypeCurrentState.map(selectedElement => selectedElement.id).indexOf(value.id) === -1) {\n      clickedTypeUpdatedState = update(clickedTypeCurrentState, {\n        $push: [value],\n      });\n    } else {\n      const selectedIndex = clickedTypeCurrentState.map(selectedElement => selectedElement.id).indexOf(value.id);\n      clickedTypeUpdatedState = update(clickedTypeCurrentState, {\n        $splice: [[ selectedIndex, 1 ]],\n      });\n    }\n    this.setState({ [clickedTypeName]: clickedTypeUpdatedState });\n  }\n\n  mapProblems = () => this.getMappableProblemsOrPassages('problems').map(problem => {\n    const { selectedProblems } = this.state;\n    const selected = selectedProblems.map(selectedProblem => selectedProblem.id).indexOf(problem.id) !== -1;\n    return (\n      <div className={selected ? \"card list-table-row list-row-added\" : \"card list-table-row\"}>\n        <div className=\"list-table-cell checkbox-cell\">\n          <label>\n            <input\n              type=\"checkbox\"\n              className=\"filled-in\"\n              name=\"check_01\"\n              checked={selectedProblems.map(selectedProblem => selectedProblem.id).indexOf(problem.id) !== -1}\n              onChange={() => this.handleProblemOrPassageClick('problem', problem)}\n            />\n            <span>&nbsp;</span>\n          </label>\n        </div>\n        <div className=\"list-table-cell subject-cell\">\n          <span>{subjectMap[problem.subject]}</span>\n        </div>\n        <div className=\"list-table-cell info-cell\">\n          <span>{difficultyMap[problem.difficulty]}</span>\n        </div>\n        <div className=\"list-table-cell type-cell\">\n          <span>{typeMap[problem.type]}</span>\n        </div>\n        <div className=\"list-table-cell in-cell\">{problem.inWorkbook ? 'Yes' : 'No'}</div>\n        <div className=\"list-table-cell topic-cell\">\n          {problem.topics.map(topic => <span className=\"chip\" id={topic}>{topicMap[topic]}</span>)}\n        </div>\n        <div className=\"list-table-cell view-cell\">\n          <a href=\"#\"><i className=\"icon-eye\"></i></a>\n        </div>\n        <div className=\"list-table-cell drop-cell\">\n          <a href=\"#\"><i className=\"icon-plus-circle\"></i></a>\n        </div>\n      </div>\n    )\n  })\n\n  mapPassages = () => this.getMappableProblemsOrPassages('passages').map(passage => {\n    const { selectedPassages } = this.state;\n    const selected = selectedPassages.map(selectedPassage => selectedPassage.id).indexOf(passage.id) !== -1;\n    return (\n      <div className=\"list-view-section\">\n        <div className={selected ? \"list-table detail-table list-table-added\" : \"list-table detail-table\"}>\n          <TableHeader sortBySubject={this.determineSort} />\n          <div className=\"list-table-body\">\n            <div className=\"combined-holder\">\n              <div className=\"combined-header\">\n                <div className=\"list-table-row\">\n                  <div className=\"list-table-cell checkbox-cell\">\n                    <div className=\"checkbox-block\">\n                      <label>\n                        <input\n                          type=\"checkbox\"\n                          className=\"filled-in\"\n                          checked={selectedPassages.map(selectedPassage => selectedPassage.id).indexOf(passage.id) !== -1}\n                          onChange={() => this.handleProblemOrPassageClick('passage', passage)}\n                        />\n                        <span>&nbsp;</span>\n                      </label>\n                    </div>\n                  </div>\n                  <div className=\"list-table-cell subject-cell\">\n                    <div className=\"filter-name\">{subjectMap[passage.subject]}</div>\n                  </div>\n                  <div className=\"list-table-cell combined-title-cell\">\n                    <div className=\"combined-title\">{passage.title}</div>\n                  </div>\n                  <div className=\"list-table-cell view-cell\">\n                    <a href=\"#\"><i className=\"custom-icon-triangle-right\"></i></a>\n                  </div>\n                  <div className=\"list-table-cell drop-cell\">\n                    <a href=\"#\"><i className=\"icon-plus-circle\"></i></a>\n                  </div>\n                </div>\n              </div>\n              <div className=\"collection\">\n                {passage.problems.map(problem => (\n                  <div className=\"collection-item list-table-row\" id={problem.id}>\n                    <div className=\"list-table-cell checkbox-cell\">\n                      <span>&nbsp;</span>\n                    </div>\n                    <div className=\"list-table-cell subject-cell\">\n                      <span>{subjectMap[problem.subject]}</span>\n                    </div>\n                    <div className=\"list-table-cell info-cell\">\n                      <span>{difficultyMap[problem.difficulty]}</span>\n                    </div>\n                    <div className=\"list-table-cell type-cell\">\n                      <span>{typeMap[problem.type]}</span>\n                    </div>\n                    <div className=\"list-table-cell in-cell\">{problem.inWorkbook ? 'Yes' : 'No'}</div>\n                    <div className=\"list-table-cell topic-cell\">\n                      {problem.topics.map(topic => <span className=\"chip\" id={topic}>{topicMap[topic]}</span>)}\n                    </div>\n                    <div className=\"list-table-cell view-cell\">\n                      <a href=\"#\"><i className=\"icon-eye\"></i></a>\n                    </div>\n                    <div className=\"list-table-cell drop-cell\">\n                      <span>&nbsp;</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  })\n\n  render() {\n    const { open, onClose } = this.props;\n    const { openSection, subjectFilters, difficultyFilters, typeFilters, workbookFilters, addProblemsDropdownOpen } = this.state;\n    return (\n      <Portal selector=\"#modal\">\n        {open && (\n          <div className=\"wrapper\">\n            <div id=\"modal_add_problem\" className=\"modal-page modal modal-custom\" style={{ zIndex: '1003' }}>\n              <div className=\"card-modal grey lighten-3\">\n                <div className=\"header-modal-box card-panel light-blue lighten-1 white-text\">\n                  <div className=\"header-flex-row row mb-0\">\n                    <div className=\"col s12 m4 l5\">\n                      <div className=\"header-holder\">\n                        <div className=\"header-col\">\n                          <div className=\"icon-col\">\n                            <i className=\"icon-search\"></i>\n                          </div>\n                        </div>\n                        <div className=\"header-col\">\n                          <nav className=\"breadcrumb-header\">\n                            <div className=\"nav-wrapper \">\n                              <a href=\"#!\" className=\"breadcrumb modal-close\">&lt; Custom Worksheet</a>\n                            </div>\n                          </nav>\n                          <div className=\"card-panel-text\">\n                            <h1 className=\"text-large\">Problem Bank</h1>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"card-panel-description col s8 m3 l2\">\n                      <div className=\"card-panel-text\">\n                        <div className=\"col-row\">\n                        {/* TODO: Figure out what this number is supposed to reflect */}\n                          <span className=\"value\">24</span>\n                          <span className=\"value-text\">worksheet <br />problems</span>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"col s2 m1 right-align position-mobile-right\">\n                      <div className=\"close-block\">\n                        <a href=\"#\" className=\"modal-close close\" onClick={onClose}><i className=\"icon-close-thin\"></i></a>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"tabs-switcher-holder card-panel-row\">\n                    <ul className=\"tabs\">\n                      <li\n                        className=\"tab col s3\"\n                        style={{ borderBottom: openSection === 'problems' ? '2px solid white' : '' }}\n                      >\n                        <a className={openSection === 'problems' ? 'active' : ''} href=\"#\" onClick={() => this.onChangeOpenSection('problems')}>\n                          <b>Problems</b>\n                        </a>\n                      </li>\n                      <li\n                        className=\"tab col s3\"\n                        style={{ borderBottom: openSection === 'passages' ? '2px solid white' : '' }}\n                      >\n                        <a className={openSection === 'passages' ? 'active' : ''} href=\"#\" onClick={() => this.onChangeOpenSection('passages')}>\n                          <b>Passages</b>\n                        </a>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n                <div className=\"tabs-content\">\n                  <FilterSection\n                    onSetFilteredTopicState={this.onSetFilteredTopicState}\n                    onClearFilters={this.onClearFilters}\n                    sortBySubject={this.determineSort}\n                    toggleSelectAllProblemsOrPassages={this.toggleSelectAllProblemsOrPassages}\n                    handleFilterClick={this.handleFilterClick}\n                    subjectFilters={subjectFilters}\n                    difficultyFilters={difficultyFilters}\n                    typeFilters={typeFilters}\n                    workbookFilters={workbookFilters}\n                  />\n                  <Choose>\n                    <When condition={openSection === 'problems'}>\n                      <div id=\"tab_problems\" className=\"tab-content active\">\n                        <div className=\"content-section content-section-80\">\n                          <div className=\"container-lg\">\n                            <div className=\"result-row center-align\">\n                              <b className=\"result\">- {this.getMappableProblemsOrPassages('problems').length} matches -</b>\n                            </div>\n                            <div className=\"list-view-section\">\n                              <div className=\"list-table detail-table\">\n                                <TableHeader sortBySubject={this.determineSort} />\n                                <div className=\"list-table-body\">\n                                  {this.mapProblems()}\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </When>\n                    <Otherwise>\n                      <div id=\"tab_passages\" className=\"tab-content active\">\n                        <div className=\"content-section content-section-80\">\n                          <div className=\"container-lg\">\n                            <div className=\"result-row center-align\">\n                              <b className=\"result\">- {this.getMappableProblemsOrPassages('passages').length} matches -</b>\n                            </div>\n                            {this.mapPassages()}\n                          </div>\n                        </div>\n                      </div>\n                    </Otherwise>\n                  </Choose>\n                  <div className=\"add-btn-block\">\n                    <a\n                      href=\"#\"\n                      className=\"dropdown-trigger waves-effect waves-teal btn add-btn\"\n                      data-target='dropdown_assign_selected_passeges'\n                      onClick={this.onToggleAddProblemDropdown}\n                    >\n                      <i className=\"material-icons\">add</i>\n                      Add Selected Problems\n                    </a>\n                    <ul\n                      id='dropdown_assign_selected_passeges'\n                      className='dropdown-content'\n                      style={{ display: addProblemsDropdownOpen ? 'block' : '0', opacity: addProblemsDropdownOpen ? '1' : '0' }}\n                    >\n                      <li><a href=\"#\" onClick={() => this.onAddSelectedProblems('today')}>For Today</a></li>\n                      <li><a href=\"#\" onClick={() => this.onAddSelectedProblems('tomorrow')}>For Tomorrow</a></li>\n                      <li><a href=\"#\" onClick={() => this.onAddSelectedProblems('nextSession')}>For Next Session</a></li>\n                      <li><a href=\"#\" onClick={() => this.onAddSelectedProblems('date')}>For Date...</a></li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        <style jsx>\n          {`\n              .card-modal {\n                margin: 0;\n                border-radius: 6px;\n              }\n              .wrapper {\n                min-height: 0px;\n              }\n              .modal-custom {\n                opacity: 1;\n                visibility: visible;\n              }\n              .modal-footer {\n                background-color: white;\n              }\n            `}\n        </style>\n      </Portal>\n    );\n  }\n}\n\nProblemBank.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  addSelectedProblems: PropTypes.func.isRequired,\n}\n\nexport default ProblemBank;\n"]},"metadata":{},"sourceType":"module"}