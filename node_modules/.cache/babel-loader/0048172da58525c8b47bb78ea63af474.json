{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from 'react';\nimport update from 'immutability-helper';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport FilterSection from '../components/CourseTemplate/components/FilterSection';\nimport TemplateCard from '../components/CourseTemplate/components/TemplateCard';\nimport sampleTemplates from '../components/CourseTemplate/utils/sampleTemplate';\nimport { sessionSort, lessonSort, estimatedTotalCourseWorkSort } from '../components/CourseTemplate/utils/sortOptions';\n\nvar CourseTemplates =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CourseTemplates, _React$Component);\n\n  function CourseTemplates(props) {\n    var _this;\n\n    _classCallCheck(this, CourseTemplates);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CourseTemplates).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClearFilters\", function () {\n      return _this.setState({\n        subjectFilters: [],\n        sourceFilters: [],\n        titleFilter: '',\n        sort: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetSort\", function (sort) {\n      return _this.setState({\n        sort: sort\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetFilteredState\", function (titleFilter) {\n      return _this.setState({\n        templatesAreFiltered: true,\n        titleFilter: titleFilter\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onUnsetFilteredState\", function () {\n      return _this.setState({\n        templatesAreFiltered: false,\n        titleFilter: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSetDropdown\", function (dropdownIndex) {\n      return _this.setState({\n        dropdownIndex: dropdownIndex,\n        dropdownIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseDropdown\", function () {\n      return _this.setState({\n        dropdownIsOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToggleEditModal\", function () {\n      return _this.setState(function (_ref) {\n        var editModalOpen = _ref.editModalOpen;\n        return {\n          editModalOpen: !editModalOpen\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSortTemplates\", function (templates) {\n      var sort = _this.state.sort;\n\n      switch (sort) {\n        case 'sessions':\n          return templates.sort(sessionSort);\n\n        case 'estimatedTotalCourseWork':\n          return templates.sort(estimatedTotalCourseWorkSort);\n\n        case 'lessons':\n          return templates.sort(lessonSort);\n\n        default:\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterByTitle\", function () {\n      var _this$state = _this.state,\n          templates = _this$state.templates,\n          titleFilter = _this$state.titleFilter;\n      return templates.reduce(function (finalArr, currentTemplate) {\n        var title = currentTemplate.title;\n        var templateString = title.replace(/\\s/g, \"\").toLowerCase();\n\n        if (templateString.indexOf(titleFilter) !== -1 && finalArr.indexOf(currentTemplate) === -1) {\n          finalArr.push(currentTemplate);\n        }\n\n        return finalArr;\n      }, []);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilterTemplates\", function () {\n      var _this$state2 = _this.state,\n          subjectFilters = _this$state2.subjectFilters,\n          sourceFilters = _this$state2.sourceFilters,\n          allTemplates = _this$state2.templates;\n      var templates = allTemplates;\n\n      if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n        templates = templates.filter(function (template) {\n          return subjectFilters.indexOf(template.subject) !== -1;\n        });\n      }\n\n      if (sourceFilters.length) {\n        templates = templates.filter(function (template) {\n          return sourceFilters.indexOf(template.source) !== -1;\n        });\n      }\n\n      return templates;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMappableTemplates\", function () {\n      var _this$state3 = _this.state,\n          subjectFilters = _this$state3.subjectFilters,\n          sourceFilters = _this$state3.sourceFilters,\n          titleFilter = _this$state3.titleFilter,\n          sort = _this$state3.sort,\n          templates = _this$state3.templates;\n      var mappableTemplates = templates;\n\n      if (titleFilter.length) {\n        mappableTemplates = _this.onFilterByTitle();\n      }\n\n      if (subjectFilters.length || sourceFilters.length) {\n        mappableTemplates = _this.onFilterTemplates();\n      }\n\n      if (sort) {\n        return _this.onSortTemplates(mappableTemplates);\n      }\n\n      return mappableTemplates;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"importTemplateFromFile\", function () {\n      console.warn('stubbed out import function');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFilterClick\", function (filterType, filter) {\n      var _this$state4 = _this.state,\n          currentSubjectFilters = _this$state4.subjectFilters,\n          currentSourceFilters = _this$state4.sourceFilters;\n      var modifiedFilterCurrentState;\n      var modifiedFilterName;\n      var modifiedFilterUpdatedState;\n\n      switch (filterType) {\n        case 'subject':\n          modifiedFilterCurrentState = currentSubjectFilters;\n          modifiedFilterName = 'subjectFilters';\n          break;\n\n        case 'source':\n          modifiedFilterCurrentState = currentSourceFilters;\n          modifiedFilterName = 'sourceFilters';\n          break;\n\n        default:\n          break;\n      } // Decide whether we're adding or removing the selected filter\n\n\n      if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $push: [filter]\n        });\n      } else {\n        var filterIndex = modifiedFilterCurrentState.indexOf(filter);\n        modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n          $splice: [[filterIndex, 1]]\n        });\n      }\n\n      _this.setState(_defineProperty({}, modifiedFilterName, modifiedFilterUpdatedState));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mapTemplateCards\", function () {\n      return _this.getMappableTemplates().map(function (template, index) {\n        return React.createElement(TemplateCard, {\n          template: template,\n          index: index,\n          dropdownIndex: _this.state.dropdownIndex,\n          dropdownIsOpen: _this.state.dropdownIsOpen,\n          onCloseDropdown: _this.onCloseDropdown,\n          onSetDropdown: _this.onSetDropdown,\n          onToggleEditModal: _this.onToggleEditModal\n        });\n      });\n    });\n\n    _this.state = {\n      templates: sampleTemplates,\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      editModalOpen: false,\n      subjectFilters: [],\n      sourceFilters: [],\n      titleFilter: '',\n      sort: ''\n    };\n    return _this;\n  }\n\n  _createClass(CourseTemplates, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state5 = this.state,\n          subjectFilters = _this$state5.subjectFilters,\n          sourceFilters = _this$state5.sourceFilters;\n      return React.createElement(\"main\", {\n        id: \"main\",\n        role: \"main\"\n      }, React.createElement(\"div\", {\n        className: \"main-holder grey lighten-5 switcher-section\"\n      }, React.createElement(StickyContainer, null, React.createElement(Sticky, null, function (_ref2) {\n        var style = _ref2.style;\n        return React.createElement(\"div\", {\n          className: \"title-row card-panel\",\n          style: _objectSpread({}, style, {\n            zIndex: 1999\n          })\n        }, React.createElement(\"div\", {\n          className: \"mobile-header\"\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          \"data-target\": \"slide-out\",\n          className: \"sidenav-trigger\"\n        }, React.createElement(\"i\", {\n          className: \"material-icons\"\n        }, \"menu\"))), React.createElement(\"h2\", {\n          className: \"h1 white-text\"\n        }, React.createElement(\"span\", {\n          className: \"heading-holder\"\n        }, React.createElement(\"i\", {\n          className: \"icon-module\"\n        }), React.createElement(\"span\", {\n          className: \"heading-block\"\n        }, \"Course Template Library\"))));\n      }), React.createElement(FilterSection, {\n        subjectFilters: subjectFilters,\n        sourceFilters: sourceFilters,\n        onSetSort: this.onSetSort,\n        onClearFilters: this.onClearFilters,\n        handleFilterClick: this.handleFilterClick,\n        onSetFilteredState: this.onSetFilteredState,\n        onUnsetFilteredState: this.onUnsetFilteredState\n      }), React.createElement(\"div\", {\n        className: \"content-section\"\n      }, React.createElement(\"div\", {\n        className: \"container-middle\"\n      }, React.createElement(\"div\", {\n        className: \"result-row center-align\"\n      }, React.createElement(\"b\", {\n        className: \"result\"\n      }, \"- \", this.getMappableTemplates().length, \" matches -\")), React.createElement(\"div\", {\n        className: \"d-flex-content row card-width-470\"\n      }, this.mapTemplateCards()))), React.createElement(\"div\", {\n        className: \"add-btn-block\"\n      }, React.createElement(\"a\", {\n        href: \"#\",\n        onClick: this.importTemplateFromFile,\n        className: \"waves-effect waves-teal btn add-btn\"\n      }, React.createElement(\"i\", {\n        className: \"material-icons\"\n      }, \"add\"), \" Import Template from File\")))));\n    }\n  }]);\n\n  return CourseTemplates;\n}(React.Component);\n\nexport default CourseTemplates;","map":{"version":3,"sources":["/Volumes/HDD/Sites/clearchoicetestprep/clear-choice-admin/pages/courseTemplates.js"],"names":["React","update","StickyContainer","Sticky","FilterSection","TemplateCard","sampleTemplates","sessionSort","lessonSort","estimatedTotalCourseWorkSort","CourseTemplates","props","setState","subjectFilters","sourceFilters","titleFilter","sort","templatesAreFiltered","dropdownIndex","dropdownIsOpen","editModalOpen","templates","state","reduce","finalArr","currentTemplate","title","templateString","replace","toLowerCase","indexOf","push","allTemplates","length","filter","template","subject","source","mappableTemplates","onFilterByTitle","onFilterTemplates","onSortTemplates","console","warn","filterType","currentSubjectFilters","currentSourceFilters","modifiedFilterCurrentState","modifiedFilterName","modifiedFilterUpdatedState","$push","filterIndex","$splice","getMappableTemplates","map","index","onCloseDropdown","onSetDropdown","onToggleEditModal","style","zIndex","onSetSort","onClearFilters","handleFilterClick","onSetFilteredState","onUnsetFilteredState","mapTemplateCards","importTemplateFromFile","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,SAAQC,eAAR,EAAyBC,MAAzB,QAAsC,cAAtC;AACA,OAAOC,aAAP,MAA0B,uDAA1B;AACA,OAAOC,YAAP,MAAyB,sDAAzB;AAEA,OAAOC,eAAP,MAA4B,mDAA5B;AACA,SAASC,WAAT,EAAsBC,UAAtB,EAAkCC,4BAAlC,QAAsE,gDAAtE;;IAEMC,e;;;;;AACJ,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,yFAAMA,KAAN;;AADiB,qEAcF;AAAA,aAAM,MAAKC,QAAL,CAAc;AAAEC,QAAAA,cAAc,EAAE,EAAlB;AAAsBC,QAAAA,aAAa,EAAE,EAArC;AAAyCC,QAAAA,WAAW,EAAE,EAAtD;AAA0DC,QAAAA,IAAI,EAAE;AAAhE,OAAd,CAAN;AAAA,KAdE;;AAAA,gEAgBP,UAACA,IAAD;AAAA,aAAU,MAAKJ,QAAL,CAAc;AAAEI,QAAAA,IAAI,EAAJA;AAAF,OAAd,CAAV;AAAA,KAhBO;;AAAA,yEAiBE,UAACD,WAAD;AAAA,aAAiB,MAAKH,QAAL,CAAc;AAAEK,QAAAA,oBAAoB,EAAE,IAAxB;AAA8BF,QAAAA,WAAW,EAAXA;AAA9B,OAAd,CAAjB;AAAA,KAjBF;;AAAA,2EAkBI;AAAA,aAAM,MAAKH,QAAL,CAAc;AAAEK,QAAAA,oBAAoB,EAAE,KAAxB;AAA+BF,QAAAA,WAAW,EAAE;AAA5C,OAAd,CAAN;AAAA,KAlBJ;;AAAA,oEAoBH,UAACG,aAAD;AAAA,aAAmB,MAAKN,QAAL,CAAc;AAAEM,QAAAA,aAAa,EAAbA,aAAF;AAAiBC,QAAAA,cAAc,EAAE;AAAjC,OAAd,CAAnB;AAAA,KApBG;;AAAA,sEAqBD;AAAA,aAAM,MAAKP,QAAL,CAAc;AAAEO,QAAAA,cAAc,EAAE;AAAlB,OAAd,CAAN;AAAA,KArBC;;AAAA,wEAuBC;AAAA,aAAM,MAAKP,QAAL,CAAc;AAAA,YAAGQ,aAAH,QAAGA,aAAH;AAAA,eAAwB;AAAEA,UAAAA,aAAa,EAAE,CAACA;AAAlB,SAAxB;AAAA,OAAd,CAAN;AAAA,KAvBD;;AAAA,sEA0BD,UAACC,SAAD,EAAe;AAAA,UACvBL,IADuB,GACd,MAAKM,KADS,CACvBN,IADuB;;AAE/B,cAAQA,IAAR;AACE,aAAK,UAAL;AACE,iBAAOK,SAAS,CAACL,IAAV,CAAeT,WAAf,CAAP;;AACF,aAAK,0BAAL;AACE,iBAAOc,SAAS,CAACL,IAAV,CAAeP,4BAAf,CAAP;;AACF,aAAK,SAAL;AACE,iBAAOY,SAAS,CAACL,IAAV,CAAeR,UAAf,CAAP;;AACF;AACE;AARJ;AAUD,KAtCkB;;AAAA,sEAwCD,YAAM;AAAA,wBACa,MAAKc,KADlB;AAAA,UACdD,SADc,eACdA,SADc;AAAA,UACHN,WADG,eACHA,WADG;AAEtB,aAAOM,SAAS,CAACE,MAAV,CAAiB,UAACC,QAAD,EAAWC,eAAX,EAA+B;AAAA,YAC7CC,KAD6C,GACnCD,eADmC,CAC7CC,KAD6C;AAErD,YAAMC,cAAc,GAAGD,KAAK,CAACE,OAAN,CAAc,KAAd,EAAqB,EAArB,EAAyBC,WAAzB,EAAvB;;AACA,YAAIF,cAAc,CAACG,OAAf,CAAuBf,WAAvB,MAAwC,CAAC,CAAzC,IAA8CS,QAAQ,CAACM,OAAT,CAAiBL,eAAjB,MAAsC,CAAC,CAAzF,EAA4F;AAC1FD,UAAAA,QAAQ,CAACO,IAAT,CAAcN,eAAd;AACD;;AACD,eAAOD,QAAP;AACD,OAPM,EAOJ,EAPI,CAAP;AAQD,KAlDkB;;AAAA,wEAoDC,YAAM;AAAA,yBAC2C,MAAKF,KADhD;AAAA,UAChBT,cADgB,gBAChBA,cADgB;AAAA,UACAC,aADA,gBACAA,aADA;AAAA,UAC0BkB,YAD1B,gBACeX,SADf;AAExB,UAAIA,SAAS,GAAGW,YAAhB;;AACA,UAAInB,cAAc,CAACoB,MAAf,IAAyBpB,cAAc,CAACiB,OAAf,CAAuB,KAAvB,MAAkC,CAAC,CAAhE,EAAmE;AACjET,QAAAA,SAAS,GAAGA,SAAS,CAACa,MAAV,CAAiB,UAAAC,QAAQ;AAAA,iBAAItB,cAAc,CAACiB,OAAf,CAAuBK,QAAQ,CAACC,OAAhC,MAA6C,CAAC,CAAlD;AAAA,SAAzB,CAAZ;AACD;;AACD,UAAItB,aAAa,CAACmB,MAAlB,EAA0B;AACxBZ,QAAAA,SAAS,GAAGA,SAAS,CAACa,MAAV,CAAiB,UAAAC,QAAQ;AAAA,iBAAIrB,aAAa,CAACgB,OAAd,CAAsBK,QAAQ,CAACE,MAA/B,MAA2C,CAAC,CAAhD;AAAA,SAAzB,CAAZ;AACD;;AACD,aAAOhB,SAAP;AACD,KA9DkB;;AAAA,2EAgEI,YAAM;AAAA,yBAC6C,MAAKC,KADlD;AAAA,UACnBT,cADmB,gBACnBA,cADmB;AAAA,UACHC,aADG,gBACHA,aADG;AAAA,UACYC,WADZ,gBACYA,WADZ;AAAA,UACyBC,IADzB,gBACyBA,IADzB;AAAA,UAC+BK,SAD/B,gBAC+BA,SAD/B;AAE3B,UAAIiB,iBAAiB,GAAGjB,SAAxB;;AACA,UAAIN,WAAW,CAACkB,MAAhB,EAAwB;AACtBK,QAAAA,iBAAiB,GAAG,MAAKC,eAAL,EAApB;AACD;;AACD,UAAI1B,cAAc,CAACoB,MAAf,IAAyBnB,aAAa,CAACmB,MAA3C,EAAmD;AACjDK,QAAAA,iBAAiB,GAAG,MAAKE,iBAAL,EAApB;AACD;;AACD,UAAIxB,IAAJ,EAAU;AACR,eAAO,MAAKyB,eAAL,CAAqBH,iBAArB,CAAP;AACD;;AACD,aAAOA,iBAAP;AACD,KA7EkB;;AAAA,6EA+EM,YAAM;AAC7BI,MAAAA,OAAO,CAACC,IAAR,CAAa,6BAAb;AACD,KAjFkB;;AAAA,wEAmFC,UAACC,UAAD,EAAaV,MAAb,EAAwB;AAAA,yBAC6C,MAAKZ,KADlD;AAAA,UAClBuB,qBADkB,gBAClChC,cADkC;AAAA,UACoBiC,oBADpB,gBACKhC,aADL;AAE1C,UAAIiC,0BAAJ;AACA,UAAIC,kBAAJ;AACA,UAAIC,0BAAJ;;AACA,cAAQL,UAAR;AACE,aAAK,SAAL;AACEG,UAAAA,0BAA0B,GAAGF,qBAA7B;AACAG,UAAAA,kBAAkB,GAAG,gBAArB;AACA;;AACF,aAAK,QAAL;AACED,UAAAA,0BAA0B,GAAGD,oBAA7B;AACAE,UAAAA,kBAAkB,GAAG,eAArB;AACA;;AACF;AACE;AAVJ,OAL0C,CAiB1C;;;AACA,UAAID,0BAA0B,CAACjB,OAA3B,CAAmCI,MAAnC,MAA+C,CAAC,CAApD,EAAuD;AACrDe,QAAAA,0BAA0B,GAAGhD,MAAM,CAAC8C,0BAAD,EAA6B;AAC9DG,UAAAA,KAAK,EAAE,CAAChB,MAAD;AADuD,SAA7B,CAAnC;AAGD,OAJD,MAIO;AACL,YAAMiB,WAAW,GAAGJ,0BAA0B,CAACjB,OAA3B,CAAmCI,MAAnC,CAApB;AACAe,QAAAA,0BAA0B,GAAGhD,MAAM,CAAC8C,0BAAD,EAA6B;AAC9DK,UAAAA,OAAO,EAAE,CAAC,CAAED,WAAF,EAAe,CAAf,CAAD;AADqD,SAA7B,CAAnC;AAGD;;AACD,YAAKvC,QAAL,qBAAiBoC,kBAAjB,EAAsCC,0BAAtC;AACD,KAhHkB;;AAAA,uEAkHA;AAAA,aAAM,MAAKI,oBAAL,GAA4BC,GAA5B,CAAgC,UAACnB,QAAD,EAAWoB,KAAX;AAAA,eACvD,oBAAC,YAAD;AACE,UAAA,QAAQ,EAAEpB,QADZ;AAEE,UAAA,KAAK,EAAEoB,KAFT;AAGE,UAAA,aAAa,EAAE,MAAKjC,KAAL,CAAWJ,aAH5B;AAIE,UAAA,cAAc,EAAE,MAAKI,KAAL,CAAWH,cAJ7B;AAKE,UAAA,eAAe,EAAE,MAAKqC,eALxB;AAME,UAAA,aAAa,EAAE,MAAKC,aANtB;AAOE,UAAA,iBAAiB,EAAE,MAAKC;AAP1B,UADuD;AAAA,OAAhC,CAAN;AAAA,KAlHA;;AAEjB,UAAKpC,KAAL,GAAa;AACXD,MAAAA,SAAS,EAAEf,eADA;AAEXa,MAAAA,cAAc,EAAE,KAFL;AAGXD,MAAAA,aAAa,EAAE,IAHJ;AAIXE,MAAAA,aAAa,EAAE,KAJJ;AAKXP,MAAAA,cAAc,EAAE,EALL;AAMXC,MAAAA,aAAa,EAAE,EANJ;AAOXC,MAAAA,WAAW,EAAE,EAPF;AAQXC,MAAAA,IAAI,EAAE;AARK,KAAb;AAFiB;AAYlB;;;;6BAkHQ;AAAA,yBACmC,KAAKM,KADxC;AAAA,UACCT,cADD,gBACCA,cADD;AAAA,UACiBC,aADjB,gBACiBA,aADjB;AAEP,aACE;AAAM,QAAA,EAAE,EAAC,MAAT;AAAgB,QAAA,IAAI,EAAC;AAArB,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE,oBAAC,eAAD,QACA,oBAAC,MAAD,QACD;AAAA,YAAG6C,KAAH,SAAGA,KAAH;AAAA,eACC;AAAK,UAAA,SAAS,EAAC,sBAAf;AAAsC,UAAA,KAAK,oBAAOA,KAAP;AAAcC,YAAAA,MAAM,EAAE;AAAtB;AAA3C,WACE;AAAK,UAAA,SAAS,EAAC;AAAf,WACE;AAAG,UAAA,IAAI,EAAC,GAAR;AAAY,yBAAY,WAAxB;AAAoC,UAAA,SAAS,EAAC;AAA9C,WAAgE;AAAG,UAAA,SAAS,EAAC;AAAb,kBAAhE,CADF,CADF,EAIE;AAAI,UAAA,SAAS,EAAC;AAAd,WACE;AAAM,UAAA,SAAS,EAAC;AAAhB,WACE;AAAG,UAAA,SAAS,EAAC;AAAb,UADF,EAEE;AAAM,UAAA,SAAS,EAAC;AAAhB,qCAFF,CADF,CAJF,CADD;AAAA,OADC,CADA,EAgBA,oBAAC,aAAD;AACE,QAAA,cAAc,EAAE/C,cADlB;AAEE,QAAA,aAAa,EAAEC,aAFjB;AAGE,QAAA,SAAS,EAAE,KAAK+C,SAHlB;AAIE,QAAA,cAAc,EAAE,KAAKC,cAJvB;AAKE,QAAA,iBAAiB,EAAE,KAAKC,iBAL1B;AAME,QAAA,kBAAkB,EAAE,KAAKC,kBAN3B;AAOE,QAAA,oBAAoB,EAAE,KAAKC;AAP7B,QAhBA,EAyBA;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAG,QAAA,SAAS,EAAC;AAAb,eAAyB,KAAKZ,oBAAL,GAA4BpB,MAArD,eADF,CADF,EAIE;AAAK,QAAA,SAAS,EAAC;AAAf,SACG,KAAKiC,gBAAL,EADH,CAJF,CADF,CAzBA,EAmCF;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,OAAO,EAAE,KAAKC,sBAA1B;AAAkD,QAAA,SAAS,EAAC;AAA5D,SAAkG;AAAG,QAAA,SAAS,EAAC;AAAb,eAAlG,+BADF,CAnCE,CADF,CADF,CADF;AA6CD;;;;EA9K2BnE,KAAK,CAACoE,S;;AAiLpC,eAAe1D,eAAf","sourcesContent":["import React from 'react';\nimport update from 'immutability-helper';\nimport {StickyContainer, Sticky} from 'react-sticky';\nimport FilterSection from '../components/CourseTemplate/components/FilterSection';\nimport TemplateCard from '../components/CourseTemplate/components/TemplateCard';\n\nimport sampleTemplates from '../components/CourseTemplate/utils/sampleTemplate';\nimport { sessionSort, lessonSort, estimatedTotalCourseWorkSort } from '../components/CourseTemplate/utils/sortOptions';\n\nclass CourseTemplates extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      templates: sampleTemplates,\n      dropdownIsOpen: false,\n      dropdownIndex: null,\n      editModalOpen: false,\n      subjectFilters: [],\n      sourceFilters: [],\n      titleFilter: '',\n      sort: '',\n    };\n  }\n\n  onClearFilters = () => this.setState({ subjectFilters: [], sourceFilters: [], titleFilter: '', sort: '' })\n\n  onSetSort = (sort) => this.setState({ sort })\n  onSetFilteredState = (titleFilter) => this.setState({ templatesAreFiltered: true, titleFilter })\n  onUnsetFilteredState = () => this.setState({ templatesAreFiltered: false, titleFilter: '' })\n\n  onSetDropdown = (dropdownIndex) => this.setState({ dropdownIndex, dropdownIsOpen: true });\n  onCloseDropdown = () => this.setState({ dropdownIsOpen: false });\n\n  onToggleEditModal = () => this.setState(({ editModalOpen }) => ({ editModalOpen: !editModalOpen }))\n\n  // eslint-disable-next-line consistent-return\n  onSortTemplates = (templates) => {\n    const { sort } = this.state;\n    switch (sort) {\n      case 'sessions':\n        return templates.sort(sessionSort);\n      case 'estimatedTotalCourseWork':\n        return templates.sort(estimatedTotalCourseWorkSort);\n      case 'lessons':\n        return templates.sort(lessonSort);\n      default:\n        break;\n    }\n  }\n\n  onFilterByTitle = () => {\n    const { templates, titleFilter } = this.state;\n    return templates.reduce((finalArr, currentTemplate) => {\n      const { title } = currentTemplate;\n      const templateString = title.replace(/\\s/g, \"\").toLowerCase();\n      if (templateString.indexOf(titleFilter) !== -1 && finalArr.indexOf(currentTemplate) === -1) {\n        finalArr.push(currentTemplate);\n      }\n      return finalArr;\n    }, []);\n  }\n\n  onFilterTemplates = () => {\n    const { subjectFilters, sourceFilters, templates: allTemplates } = this.state;\n    let templates = allTemplates\n    if (subjectFilters.length && subjectFilters.indexOf('all') === -1) {\n      templates = templates.filter(template => subjectFilters.indexOf(template.subject) !== -1);\n    }\n    if (sourceFilters.length) {\n      templates = templates.filter(template => sourceFilters.indexOf(template.source) !== -1);\n    }\n    return templates;\n  }\n\n  getMappableTemplates = () => {\n    const { subjectFilters, sourceFilters, titleFilter, sort, templates } = this.state;\n    let mappableTemplates = templates;\n    if (titleFilter.length) {\n      mappableTemplates = this.onFilterByTitle();\n    }\n    if (subjectFilters.length || sourceFilters.length) {\n      mappableTemplates = this.onFilterTemplates();\n    }\n    if (sort) {\n      return this.onSortTemplates(mappableTemplates);\n    }\n    return mappableTemplates;\n  }\n\n  importTemplateFromFile = () => {\n    console.warn('stubbed out import function');\n  }\n\n  handleFilterClick = (filterType, filter) => {\n    const { subjectFilters: currentSubjectFilters, sourceFilters: currentSourceFilters } = this.state;\n    let modifiedFilterCurrentState;\n    let modifiedFilterName;\n    let modifiedFilterUpdatedState;\n    switch (filterType) {\n      case 'subject':\n        modifiedFilterCurrentState = currentSubjectFilters;\n        modifiedFilterName = 'subjectFilters';\n        break;\n      case 'source':\n        modifiedFilterCurrentState = currentSourceFilters;\n        modifiedFilterName = 'sourceFilters';\n        break;\n      default:\n        break;\n    }\n    // Decide whether we're adding or removing the selected filter\n    if (modifiedFilterCurrentState.indexOf(filter) === -1) {\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $push: [filter],\n      });\n    } else {\n      const filterIndex = modifiedFilterCurrentState.indexOf(filter);\n      modifiedFilterUpdatedState = update(modifiedFilterCurrentState, {\n        $splice: [[ filterIndex, 1 ]],\n      });\n    }\n    this.setState({ [modifiedFilterName]: modifiedFilterUpdatedState });\n  }\n\n  mapTemplateCards = () => this.getMappableTemplates().map((template, index) => (\n    <TemplateCard\n      template={template}\n      index={index}\n      dropdownIndex={this.state.dropdownIndex}\n      dropdownIsOpen={this.state.dropdownIsOpen}\n      onCloseDropdown={this.onCloseDropdown}\n      onSetDropdown={this.onSetDropdown}\n      onToggleEditModal={this.onToggleEditModal}\n    />\n  ))\n\n  render() {\n    const { subjectFilters, sourceFilters } = this.state;\n    return (\n      <main id=\"main\" role=\"main\">\n        <div className=\"main-holder grey lighten-5 switcher-section\">\n          <StickyContainer>\n          <Sticky>\n        {({ style }) => (\n          <div className=\"title-row card-panel\" style={{ ...style, zIndex: 1999 }}>\n            <div className=\"mobile-header\">\n              <a href=\"#\" data-target=\"slide-out\" className=\"sidenav-trigger\"><i className=\"material-icons\">menu</i></a>\n            </div>\n            <h2 className=\"h1 white-text\">\n              <span className=\"heading-holder\">\n                <i className=\"icon-module\"></i>\n                <span className=\"heading-block\">Course Template Library</span>\n              </span>\n            </h2>\n          </div>\n        )}\n          </Sticky>\n          <FilterSection\n            subjectFilters={subjectFilters}\n            sourceFilters={sourceFilters}\n            onSetSort={this.onSetSort}\n            onClearFilters={this.onClearFilters}\n            handleFilterClick={this.handleFilterClick}\n            onSetFilteredState={this.onSetFilteredState}\n            onUnsetFilteredState={this.onUnsetFilteredState}\n          />\n          <div className=\"content-section\">\n            <div className=\"container-middle\">\n              <div className=\"result-row center-align\">\n                <b className=\"result\">- {this.getMappableTemplates().length} matches -</b>\n              </div>\n              <div className=\"d-flex-content row card-width-470\">\n                {this.mapTemplateCards()}\n              </div>\n            </div>\n          </div>\n        <div className=\"add-btn-block\">\n          <a href=\"#\" onClick={this.importTemplateFromFile} className=\"waves-effect waves-teal btn add-btn\"><i className=\"material-icons\">add</i> Import Template from File</a>\n          </div>\n          </StickyContainer>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default CourseTemplates;"]},"metadata":{},"sourceType":"module"}